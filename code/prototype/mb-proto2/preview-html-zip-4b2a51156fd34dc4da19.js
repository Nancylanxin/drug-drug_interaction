(()=>{var xn={99099:(L,D,n)=>{"use strict";n.d(D,{lQ:()=>En,Qb:()=>wn,od:()=>Cn});var E=n(87587),p=n(71114),v=n(17200),u=n(4978),i=n(35433),O=n(71101);const R={};function s(g,z){typeof g=="object"&&(z=g,g=void 0),z=z||{};const H=(0,v.H)(g,z.path||"/socket.io"),oe=H.source,q=H.id,Ce=H.path,Te=R[q]&&Ce in R[q].nsps,ae=z.forceNew||z["force new connection"]||z.multiplex===!1||Te;let fe;return ae?fe=new u.d(oe,z):(R[q]||(R[q]=new u.d(oe,z)),fe=R[q]),H.query&&!z.query&&(z.query=H.queryKey),fe.socket(H.path,z)}Object.assign(s,{Manager:u.d,Socket:i.s,io:s,connect:s});var f=n(63828),o=n(81697),a=n(60074),y=n(71090);const m=2*1e3,S=16*1e3,U=32*1e3,M=()=>{},j=g=>{(0,a.Q)("SKT-QUE",g)},_=()=>({destroy:M,reset:M,emitAsync:d,emitLossy:M,reqRoomAsync:()=>Promise.resolve(),getIsConnected:()=>!0,getSocketId:()=>"",getReadyPromise:()=>Promise.resolve(),getOffsetMsec:()=>0,DUMMY:!0}),d=async(g,z)=>({type:g,payload:z,isDummy:!0}),A=g=>{let{query:{uId:z,fURL:H=globalThis.location.href.slice(0,128),uTag:oe=o.ck,vTag:q=y.i},lossyListenerMap:Ce={},queueListenerMap:Te={},socketUrl:ae=globalThis.location.origin,socketPath:fe=o.z3,usePolling:ye=!1}=g;const $=(0,f.hF)();let ie,G=(0,E.vH)(),J=0,X=h,re=null;const Pe=()=>{ie!==void 0&&(ie.close(),ie=void 0,G=(0,E.vH)(),Ue=!1,re&&clearTimeout(re),re=null)},Je=()=>{Pe();const ue=new u.d(ae,{path:fe,query:{uId:z,fURL:H,uTag:oe,vTag:q},transports:ye?["polling","websocket"]:["websocket"],reconnectionDelay:Math.round((m+S)/2),reconnectionDelayMax:U,randomizationFactor:(S-m)/(S+m),closeOnBeforeunload:!1}).socket(o.Or);ue.on("connect_error",Ee=>{console.log("[socket] connect_error",Ee),Ee.message.includes(o.Jc)&&(Pe(),$.dispatchEvent({type:o.E$,payload:{error:Ee}})),$.dispatchEvent({type:o.Rm,payload:{error:Ee}})}),ue.on("connect",async()=>{console.log("[socket] connect");{const Ee=Date.now(),Re=await Se(o.hD),xe=Date.now();J=Re-(Ee+xe)*.5}X!==h&&await Se(o.Cu,X),re=(0,p.Q3)(()=>{!ie||!ie.connected||Ue||Je()},(10+Math.random()*10)*60*1e3),console.log("[socket] ready"),$.dispatchEvent({type:o.FC}),G.resolve()});{let Ee=Promise.resolve();const Re=xe=>{const Ge=Ee.then(xe);return Ee=Ge.then(M,j),Ge};$.clear();for(const[xe,Ge]of Object.entries(Ce))ue.on(xe,He=>Ge({type:xe,payload:He})),$.addEventListener(xe,He=>{let{payload:V}=He;return Ge({type:xe,payload:V})});for(const[xe,Ge]of Object.entries(Te))ue.on(xe,He=>Re(()=>Ge({type:xe,payload:He}))),$.addEventListener(xe,He=>{let{payload:V}=He;return Re(()=>Ge({type:xe,payload:V}))})}ie=ue};let Ue=!1;const Se=(Ne,ue)=>new Promise(Ee=>{ie.emit(Ne,ue,Ee),Ue=!0}).then(Ee=>{Ue=!1;const{error:Re,result:xe}=Ee;if(Re!==void 0)throw Object.assign(new Error(typeof Re=="object"&&Re.message||"SKT-USR error"),Re);return xe}),Oe=(Ne,ue)=>{ie.volatile.emit(Ne,ue)},Fe=async Ne=>{await Se(o.Cu,Ne),X=Ne};return Je(),{destroy:Pe,reset:Je,emitAsync:Se,emitLossy:Oe,reqRoomAsync:Fe,getIsConnected:()=>ie?ie.connected:!1,getSocketId:()=>ie?ie.id:"",getReadyPromise:()=>G.promise,getOffsetMsec:()=>J}},h=[[],[],[]];var P=n(4423),x=n(6515),ne=n(93701),ve=n(52910),ge=n(91320),me=n(66234),W=n(76336),Q=n(21630);const Ae=0,we={cDebugMin:Ae,cCmtPack:Ae+1,cCmtThread:Ae+2,cCmtContent:Ae+3,cDebugMax:35},Z=(0,Q.$)("cmt-type",we),ee=Z.pack("cCmtPack"),be=Z.pack("cCmtThread"),Ze=Z.pack("cCmtContent"),mt=new Set(["cCmtPack","cCmtThread","cCmtContent"]),ze=new Set([ee,be,Ze]);var ot=n(80693);const ft={unstyled:0,"header-one":1,"header-two":2,"header-three":3,"ordered-list-item":4,"unordered-list-item":5,atomic:6},et=(0,Q.$)("DraftBlockType",ft),gt={left:0,center:1,right:2,justify:3},k=(0,Q.$)("DraftAlignment",gt),N={LINK:0,IMAGE:1},pe=(0,Q.$)("DraftEntityMapType",N),De={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2},le=(0,Q.$)("DraftEntityMapMutability",De),he={_blank:0,_self:1},Ke=(0,Q.$)("DraftLinkTargetOption",he),Le=g=>{const z={};return Object.keys(g).forEach(H=>{const{type:oe,mutability:q,data:Ce}=g[H],Te=[pe.pack(oe),le.pack(q)],ae=[];oe==="LINK"?(Te.push(Ke.pack(Ce.targetOption)),ae.push(Ce.url||"")):oe==="IMAGE"&&(Te.push((0,me.xd)(Ce.width),k.pack(Ce.alignment)),ae.push(Ce.src||"",Ce.alt||"")),z["e/"+H]=[Te.join(W.Kt),...ae]}),z},Ye=g=>{const z={};for(const H of Object.keys(g)){if(!H.startsWith("e/"))continue;const oe=H.split("e/")[1],[q,...Ce]=g[H],[Te,ae,fe,ye]=q.split(W.Kt),$=pe.parse(Te),ie=le.parse(ae);z[oe]=$==="LINK"?{type:$,mutability:ie,data:{url:Ce[0],targetOption:Ke.parse(fe)}}:{type:$,mutability:ie,data:{src:Ce[0],alt:Ce[1],width:(0,me.nZ)(fe),alignment:k.parse(ye)}}}return z},Xe=g=>{const z={};return Object.keys(g).forEach(H=>{const{text:oe,type:q,depth:Ce,inlineStyleRanges:Te,entityRanges:ae,data:{textAlign:fe,textIndent:ye,paraSpacing:$}}=g[H],ie=[et.packDef(q,"unstyled"),(0,me.xd)(Ce),fe?k.pack(fe):"",ye!==void 0?(0,me.xd)(ye):"",$!==void 0?(0,ge.DF)($):""];z["b/"+H]=[ie.join(W.Kt),oe,Te.map(G=>{let{offset:J,length:X,style:re}=G;return Ct(J,X,re)}),ae.map(G=>{let{offset:J,length:X,key:re}=G;return yt(J,X,re)})]}),z},yt=(g,z,H)=>""+(0,me.xd)(g)+W.Kt+(0,me.xd)(z)+W.Kt+(0,me.xd)(H),Mt=g=>{const z=g.indexOf(W.Kt),H=g.indexOf(W.Kt,z+1);return[(0,me.nZ)(g.slice(0,z)),(0,me.nZ)(g.slice(z+1,H)),(0,me.nZ)(g.slice(H+1))]},Ct=(g,z,H)=>""+(0,me.xd)(g)+W.Kt+(0,me.xd)(z)+W.Kt+H,wt=g=>{const z=g.indexOf(W.Kt),H=g.indexOf(W.Kt,z+1);return[(0,me.nZ)(g.slice(0,z)),(0,me.nZ)(g.slice(z+1,H)),g.slice(H+1)]},Pt=g=>{const z={};for(const H of Object.keys(g)){if(!H.startsWith("b/"))continue;const oe=H.split("b/")[1],[q,Ce,Te,ae]=g[H],[fe,ye,$,ie,G]=q.split(W.Kt),J={};$!==""&&(J.textAlign=k.parse($)),ie!==""&&(J.textIndent=(0,me.nZ)(ie)),G!==""&&G!==void 0&&(J.paraSpacing=(0,ge.Ci)(G)),z[oe]={text:Ce,type:et.parse(fe),depth:(0,me.nZ)(ye),inlineStyleRanges:Te.map(X=>{const[re,Pe,Je]=wt(X);return{offset:re,length:Pe,style:Je}}),entityRanges:ae.map(X=>{const[re,Pe,Je]=Mt(X);return{offset:re,length:Pe,key:Je}}),data:J}}return z},St=g=>{let{message:z}=g;const{blocks:H={},entityMap:oe={}}=z;return{...Xe(H),...Le(oe)}},Bt=g=>({message:{blocks:Pt(g),entityMap:Ye(g)}}),Rt=g=>({T:Z.pack(g.type),IC:[(0,me.xd)(g.index),(0,me.hc)(g.ctime)].join(W.Kt)}),xt=g=>{const[z,H]=g.IC.split(W.Kt);return{type:Z.parse(g.T),index:(0,me.nZ)(z),ctime:(0,me.sO)(H)}},Lt=g=>({...Rt(g),R:g.refKey}),Ft=g=>({...xt(g),refKey:g.R}),I=g=>({...Rt(g),...St(g),xy:(0,ge.jq)(g.x,g.y),wh:(0,ge.jq)(g.w,g.h),z:(0,ge.DF)(g.z),userInfo:g.userInfo,userId:(0,ge.DF)(g.userId),mtime:(0,me.hc)(g.mtime),isCompleted:(0,ot.aY)(g.isCompleted),canvasVec2:g.canvasVec2?{x:(0,ge.DF)(g.canvasVec2.x),y:(0,ge.DF)(g.canvasVec2.y)}:g.canvasVec2,canvasCid:g.canvasCid,threadType:g.threadType}),F=g=>{const[z,H]=(0,ge.dn)(g.xy),[oe,q]=(0,ge.dn)(g.wh),Ce=g.canvasVec2?(0,ge.Ci)(g.canvasVec2.x):void 0,Te=g.canvasVec2?(0,ge.Ci)(g.canvasVec2.y):void 0,ae=(0,ge.Ci)(g.z);return{...xt(g),...Bt(g),x:z,y:H,w:oe,h:q,z:ae,mtime:(0,me.sO)(g.mtime),userInfo:g.userInfo,userId:(0,ge.Ci)(g.userId),isCompleted:(0,ot.YI)(g.isCompleted),canvasCid:g.canvasCid,threadType:g.threadType,canvasVec2:Ce&&Te?{x:Ce,y:Te}:void 0}},Y=g=>({...Rt(g),...St(g),mtime:(0,me.hc)(g.mtime),userInfo:g.userInfo}),se=g=>({...xt(g),...Bt(g),mtime:(0,me.sO)(g.mtime),userInfo:g.userInfo}),Be=g=>{try{switch(g.T){case void 0:return g;case ee:return Ft(g);case be:return F(g);case Ze:return se(g);default:throw new Error("invalid attr: "+g.T+" -> "+Z.parse(g.T))}}catch(z){throw(0,a.Q)("toP2CHA badDat",z,g),z}},Qe=g=>{try{switch(g.type){case void 0:return g;case"cCmtPack":return Lt(g);case"cCmtThread":return I(g);case"cCmtContent":return Y(g);default:throw new Error("invalid attr: "+g.type)}}catch(z){throw(0,a.Q)("toP2CCA badDat",z,g),z}};var pt=n(9390);const at=(g,z)=>{const H=ae=>{const fe=g(ae);return fe===void 0?[]:fe.sub.map(ye=>g(ye))},oe=(0,pt.Ir)(ae=>ae.sub.map(fe=>g(fe))),q=(ae,fe)=>{const ye=g(ae);ye!==void 0&&(fe(ye)||ye.sub.length!==0&&oe(ye,fe))};return{getHotItem:g,getSubHotItemList:H,walkHotItemSubtree:q,isTrashed:ae=>(0,x.z4)(ae,z.getFlatTree()),__devHotTree:function(ae){ae===void 0&&(ae=x.$3);const fe=new Map,ye=$=>{let ie=fe.get($);return ie===void 0&&fe.set($,ie={}),ie};return q(ae,$=>{ye($.sup)[$.key]=$.hotAttr,$.sub.length!==0&&(ye($.sup)[$.key+" SUB"]=ye($.key))}),ye(g(ae).sup)}}};var it=n(53705),tt=n(93834),ct=n(96293),We=n(2150),bt=n(60264);const Et=(g,z,H)=>{const oe=G=>{if(G===void 0||G.length===0)return;const J=new Set;for(const re of G)J.add(re.key),re.type==="I"&&J.add(re.keySup);const X=(0,x.O2)([...J].filter(x.w3),H.getFlatTree());g({type:bt.K,payload:X})},q=G=>{const J=[],X=G(J);return oe(H.applyDiff(J)),X},Ce=G=>q(J=>{const X=[],re=G(X);for(const Pe of X)Pe.type==="update"?ye(Pe.hotItem,J):Pe.type==="delete"&&$(Pe.key,J);return re}),Te=function(){const G=[],J=[];let X,re=!1;for(var Pe=arguments.length,Je=new Array(Pe),Ue=0;Ue<Pe;Ue++)Je[Ue]=arguments[Ue];for(const Se of Je){X=Se(G);const Oe=H.applyDiff(G);Oe!==void 0&&(J.push(...Oe),re?H.combineLastUndo():re=!0)}return oe(J),X},ae=function(){for(var G=arguments.length,J=new Array(G),X=0;X<G;X++)J[X]=arguments[X];const re=J.map(Pe=>Je=>{const Ue=[],Se=Pe(Ue);for(const Oe of Ue)Oe.type==="update"?ye(Oe.hotItem,Je):Oe.type==="delete"&&$(Oe.key,Je);return Se});return Te(...re)},fe=(G,J)=>{for(const X of Object.keys(G)){const re=G[X],Pe=J[X];re!==Pe&&(0,it.$N)(re)&&(0,it.$N)(Pe)&&JSON.stringify(re)===JSON.stringify(Pe)&&(G[X]=Pe)}},ye=(G,J)=>{const X=(0,x.c6)(G.key,H.getFlatTree());if(X===void 0)J.push({type:We.P6,key:G.key,keySup:G.sup}),J.push({type:We.q$,key:G.key,attrDiff:Qe(G.hotAttr)});else{X.sup!==G.sup&&J.push({type:We.P6,key:G.key,keySup:G.sup});const re=Qe(G.hotAttr);fe(re,X.attr);const Pe=(0,ct.O)(re,X.attr);Pe!==void 0&&J.push({type:We.q$,key:G.key,attrDiff:Pe})}},$=(G,J)=>{H.getFlatItem(G)&&J.push({type:We.P6,key:G,keySup:x.bx})},ie=(G,J,X)=>{H.getFlatItem(G)&&H.getFlatItem(J)&&X.push({type:We.P6,key:G,keySup:J})};return{_edit:q,_editAction:Ce,_editBatch:Te,_editActionBatch:ae,onRemotePatchList:G=>{const J=[];for(const X of G){const re=H.applyDiffNoUndo(X.diffList,X.clock);re!==void 0&&J.push(...re)}oe(J)},updateHotItem:G=>q(J=>{ye(G,J)}),updateHotItemBatch:G=>q(J=>{for(const X of G)ye(X,J)}),deleteHotItem:G=>q(J=>{$(G,J)}),deleteHotItemBatch:G=>q(J=>{for(const X of G)$(X,J)}),moveHotItem:(G,J)=>q(X=>{ie(G,J,X)}),moveHotItemBatch:G=>q(J=>{for(const[X,re]of G)ie(X,re,J)}),editHotItemBatch:G=>q(J=>{for(const X of G)X.type==="update"?ye(X.hotItem,J):X.type==="delete"&&$(X.key,J)}),updateHotAttrMerge:(G,J)=>q(X=>{const re=z(G);if(re===void 0)throw new Error("no item: "+G);ye((0,tt.iA)(re,"hotAttr",{...re.hotAttr,...J}),X)}),updateHotAttrKV:(G,J,X)=>q(re=>{const Pe=z(G);if(Pe===void 0)throw new Error("no item: "+G);ye((0,tt.iA)(Pe,"hotAttr",(0,tt.iA)(Pe.hotAttr,J,X)),re)}),canUndo:H.canUndo,canRedo:H.canRedo,combineMergeMark:H.combineMergeMark,combineMerge:H.combineMerge,undo:()=>{oe(H.undo())},redo:()=>{oe(H.redo())}}},kt=g=>{const z=(0,f.Dt)(),H=z.subscribe,oe=z.unsubscribe,q=jt(g),Ce=at(q,g),Te=()=>_n(g.getFlatTree),ae=Et(z.send,q,g),{_edit:fe,_editAction:ye,_editBatch:$,_editActionBatch:ie,...G}=ae;return{subscribe:H,unsubscribe:oe,...Ce,createRoCmtStore:Te,...G}},jt=g=>z=>{const H=g.getFlatTree().get(z);if(H===void 0)return;const oe=g.getOCI(H);return oe.hotItem===void 0&&(oe.hotItem={key:H.key,sup:H.sup,sub:H.sub,hotAttr:Be(H.attr)}),oe.hotItem},_n=g=>{const z=(0,ve.A)(g(),(0,P.LQ)({})),H=()=>z.getFlatTree()!==g(),oe=()=>z.sync(g()),q=jt(z),Ce=at(q,z);return{hasUpdate:H,syncUpdate:oe,...Ce}};var Yt=n(20100),un=n(30388),vt=n(58161),Zt=n(82940);const mn=g=>{const[z,H,oe]=g,q=()=>(0,x.Z0)((0,Zt.rm)(z.tre)),Ce=function($){$===void 0&&($=-1);const ie=[];for(const{pbx:G,t10s:J}of H){if(J<$)continue;const X=(0,Zt.rm)(G);for(const re of(0,vt.sd)(X))ie.push(re)}for(const{pch:G,t10s:J}of oe)J<$||ie.push(G);return ie},Te=function($){$===void 0&&($=-1);const ie=[];for(const G of Ce($))ie.push((0,We.G8)(G));return ie},ae=function($){$===void 0&&($=-1);const ie=[];for(const G of Ce($)){const{clock:J,diffList:X}=(0,We.G8)(G);ie.push([(0,P.I_)(J).slice(5),X,G])}return ie};return{getParsedTre:q,getPchList:Ce,getPatchList:Te,getReadablePatchList:ae,filterReadablePatchList:function($,ie){return ie===void 0&&(ie=-1),ae(ie).filter(G=>{let[,J,X]=G;return X.includes($)})},getMergedReadablePatchList:function($,ie){$===void 0&&($=-1),ie===void 0&&(ie=16);const G=[];let J={timePrefix:"",countDI:0,countDA:0,userIdSet:new Set};const X=re=>{J.timePrefix!==re&&(J.timePrefix!==""&&G.push(J.timePrefix.slice(5)+"..Z I*"+(J.countDI||"-")+" A*"+(J.countDA||"-")+" ["+[...J.userIdSet].join(",")+"]"),J={timePrefix:re,countDI:0,countDA:0,userIdSet:new Set})};for(const{clock:[re,Pe],diffList:Je}of Te($)){const Ue=new Date(re).toISOString().slice(0,ie);X(Ue),J.userIdSet.add(Pe);for(const{type:Se}of Je)Se===We.P6?J.countDI++:J.countDA++}return X(""),G},flpak:g}},Xt=g=>Math.floor(g/10/1e3),pn=g=>{const[z]=(0,We.$i)(g);return Xt(z)},an=g=>{let[z,H,oe]=g;return oe.length!==0?oe[oe.length-1].t10s:H.length!==0?H[H.length-1].t10s:z.t10s};var zt=n(50781),Ut=n(67833),Nt=n(71902);const Gt=(g,z)=>{let H=!1,oe=0,q=0;const Ce=new Map;let Te=[],ae,fe,ye,$;const ie=()=>{fe===void 0&&console.log("sync|onSocketConnect")},G=ue=>{let[Ee,,Re]=ue;if(Ee!==g)return!1;const xe=(0,vt.Ue)(Re);for(const Ge of xe)Te.push([Ge,pn(Ge),!1]);return ye!==void 0&&ye(xe.map(Ge=>(0,We.G8)(Ge))),!0},J=async(ue,Ee)=>{if(fe!==void 0)throw new Error("no re-init flatStore");ae=ue,$=Ee;const Re=await $(g);{const He="INSP-INIT-FLPAK";location.hash.includes(He)&&Object.assign(globalThis,{[He+"/"+g]:{...mn(Re),__flpakKey:g,__name:z}})}oe=an(Re);const xe=await(0,Ut.Ys)(Nt.V,Re);let Ge=x.DO;{const He="BYPASS-FLPAK";location.hash.includes(He)&&(Ge=V=>console.warn("["+He+"|vFT]",V))}for(const[He,V,ke]of Te)!ke&&oe>=V||(0,vt.kA)(xe,He);Ge(xe),fe=(0,ve.A)(xe,ue,(He,V,ke)=>{if(H&&console.log("flat|onPatch",{diffList:He,clock:V,isLocal:ke}),Te.push([(0,We.ZC)({diffList:He,clock:V}),Xt(V[0]),ke]),ke)return;const[_t,st,dt,Tt]=V;q=Math.max(q,_t);const ht=(0,P.kY)(st,dt);if(ae.selfCCK===ht)throw new Error("unexpected selfCck: "+ht);const Ot=Ce.get(ht)||-1;if(Ot>=Tt)throw new Error("bad editId for cck: "+ht+", last: "+Ot+", new: "+Tt);Ce.set(ht,Tt)},(He,V)=>{console.log("flat|requestResync",{error:He,message:V})}),ye=He=>{for(const V of He)fe.applyDiffNoUndo(V.diffList,V.clock)}},X=ue=>{ye=ue},re=()=>ae,Pe=()=>fe,Je=async function(ue){ue===void 0&&(ue="");try{if(!fe||!oe||!Oe())return;const Ee=fe.getFlatTree(),[Re,xe]=await(0,Ut.TC)(Nt.V,Ee);await(0,zt.au)("//FSS/"+z+"/"+g,new Blob([xe],{type:"application/octet-stream"}),{message:ue,treRawSize:Re,treSize:xe.byteLength})}catch(Ee){console.warn("saveSOS",ue,Ee)}},Ue=async()=>{try{const ue=await(0,zt.IF)("//FSS/"+z+"/"+g);if(ue.length){console.warn("[loadSOS] found "+ue.length+" record");const{data:Ee,extra:Re}=ue[0];console.warn("[loadSOS] load record from "+new Date(Re.time).toISOString());const xe=await(0,un.H)(Ee),Ge=await(0,Ut.$U)(Nt.V,xe);return console.warn("[loadSOS] record tree: "+Ge.size),{tree:Ge,...Re}}}catch(ue){console.warn("loadSOS",ue)}},Se=async()=>{try{return await(0,zt.Af)("//FSS/"+z+"/"+g)}catch(ue){console.warn("freeSOS",ue)}},Oe=()=>{for(const[,,ue]of Te)if(ue)return!0;return!1};return{flpakKey:g,name:z,__setIsDev:ue=>{H=ue},onSocketConnect:ie,onRemotePayloadSave:G,bind:J,useExtORPL:X,getClockStore:re,getFlatStore:Pe,saveSOS:Je,loadSOS:Ue,freeSOS:Se,hasPatch:Oe,preSettlePatch:()=>{const ue=[];for(const[Ee,,Re]of Te)Re&&ue.push(Ee);return ue},postSettlePatch:ue=>{Te=Te.filter(Ee=>{let[Re,xe,Ge]=Ee;return!Ge||!ue.includes(Re)})}}},dn=(g,z)=>{let H,oe;return{flpakKey:g,name:"[DUMMY]"+z,__setIsDev:q=>{},onSocketConnect:()=>{},onRemotePayloadSave:q=>{let[Ce,,Te]=q;return!1},bind:async(q,Ce)=>{if(oe!==void 0)throw new Error("no re-init flatStore");H=q,oe=(0,ve.A)((0,x.ZR)(),q)},useExtORPL:q=>{},getClockStore:()=>H,getFlatStore:()=>oe,saveSOS:async q=>{},loadSOS:async()=>{},freeSOS:async()=>0,hasPatch:()=>!1,preSettlePatch:()=>[],postSettlePatch:q=>{}}};var hn=n(91458);const fn=ge.jq,gn=ge.dn,yn=g=>{const z=new Map;let H=!1,oe,q=()=>"";const Ce=()=>{z.clear(),fe()};let Te=0;const ae=Se=>{const Oe={socketId:Se,index:Te++,lastCurAt:0,cur:void 0,lastStatAt:0,stat:void 0};return z.set(Se,Oe),Oe},fe=(0,E.My)(async()=>{if(await(0,p.Kb)(2*1e3),oe===void 0)return;const Se=[];for(const{socketId:Fe,lastStatAt:Ne}of z.values())Ne!==0&&Se.push(Fe);const Oe=await oe([g,Se]);for(const[Fe,Ne,ue]of Oe){const Ee=z.get(Fe)||ae(Fe);Ee.lastStatAt=Date.now(),Ee.stat=[Ne,ue]}G=3}).trigger,ye=Se=>{let[Oe,Fe,Ne]=Se;const[ue,Ee]=gn(Ne),Re=[ue,Ee,Fe],xe=z.get(Oe)||ae(Oe);xe.lastCurAt=Date.now(),xe.cur=Re,xe.lastStatAt===0?fe():H=!0},$=Se=>{let[Oe,Fe]=Se;const Ne=z.has(Fe);Oe===0&&Ne?z.delete(Fe):Oe===1&&!Ne&&(ae(Fe),fe())};let ie=["",NaN,NaN],G=0;const J=function(Se){Se===void 0&&(Se=ie[0]);for(const{socketId:Oe,cur:Fe}of z.values())if(Fe&&Fe[2]===Se&&Oe!==q())return!0;return!1};return{flpakKey:g,__curStatMap:z,onSocketConnect:Ce,onRemoteCur:ye,onRemoteSocket:$,hasOtherUser:J,tryPackCur:function(Se,Oe,Fe){if(Oe===void 0&&(Oe=ge.nl),Fe===void 0&&(Fe=ge.nl),!(z.size<2)){if(ie[0]!==Se)G=3;else if(!G&&ie[0]===Se&&ie[1]===Oe&&ie[2]===Fe)return;if(ie=[Se,Oe,Fe],!(!J(Se)&&!G))return G&&G--,[g,Se,fn(Oe,Fe)]}},bind:async(Se,Oe)=>{if(oe!==void 0)throw new Error("no re-init flatStore");oe=Se,q=Oe,fe()},getSocketStat:()=>{const Se=q(),Oe=[];for(const{socketId:Fe,stat:Ne}of z.values()){if(Ne===void 0)continue;const[ue,Ee]=Ne;Se===Fe?Oe.unshift([Fe,ue,Ee]):Oe.push([Fe,ue,Ee])}return Oe},getCurStat:Se=>{const Oe=q(),Fe=[];for(const{socketId:Ne,index:ue,cur:Ee,stat:Re}of z.values()){if(Oe===Ne||Ee===void 0||Re===void 0)continue;const[xe,Ge,He]=Ee;if(He!==Se||xe===ge.nl)continue;const[V,ke]=Re;Fe.push([ue,xe,Ge,V,ke])}return Fe},pollChange:()=>H?(H=!1,!0):!1}},bn=g=>({flpakKey:g,onSocketConnect:()=>{},onRemoteCur:$=>{let[ie,G,J]=$},onRemoteSocket:$=>{let[ie,G]=$},hasOtherUser:$=>!1,tryPackCur:($,ie,G)=>{},bind:async($,ie)=>{},getSocketStat:()=>[],getCurStat:$=>[],pollChange:()=>!1}),$t=()=>{};let Qt=!1;const En=g=>{Qt=g},qt="dat",kn="cmt",Mn="mkt:dat",Cn=async g=>{let{flpakKey:z,userId:H,uTag:oe,token:q,passwd:Ce,isDummyCmt:Te=!1,isAllowDat:ae=!1,isAllowCmt:fe=!1,isAllowCur:ye=!1,afterStoreCreate:$=$t,__fetchFlpakAsync:ie=Yt.WD,onTransferError:G=$t,onReadOnlyError:J=function(V,ke){return ke===void 0&&(ke=""),console.warn(V,ke)}}=g;const X=Gt(z,qt),re=(Te?dn:Gt)((0,hn.a6)(z),kn),Pe=(ye?yn:bn)(z);await $({fssDat:X});const Je=async(V,ke)=>{await X.saveSOS("OTE|"+V+"|"+ke),await G(V,ke)},Ue=H?A({query:{uId:String(H),uTag:oe},usePolling:Qt,lossyListenerMap:{[o.GF]:V=>{const{payload:ke}=V;Pe.onRemoteCur(ke)}},queueListenerMap:{[o.E$]:V=>{const{error:ke}=V;console.log("flat-ws drop-client",ke),Je("4XX",ke)},[o.Rm]:V=>{const{error:ke}=V;console.log("flat-ws error",ke),Je("5XX",ke)},[o.FC]:()=>{console.log("flat-ws (re)connected"),X.onSocketConnect(),re.onSocketConnect(),Pe.onSocketConnect()},[o.nB]:V=>{const{payload:ke}=V;console.log("flat-ws save:",ke),X.onRemotePayloadSave(ke)||re.onRemotePayloadSave(ke)||console.log("drop save payload:",ke)},[o.FK]:V=>{const{payload:ke}=V;console.log("flat-ws room cursor:",ke),Pe.onRemoteSocket(ke)}}}):_();await Promise.all([(async()=>{await Ue.getReadyPromise()})(),(async()=>{await Ue.reqRoomAsync([ae?[z]:[],fe?[z]:[],ye?[z]:[]])})()]);const Se=async(V,ke,_t)=>{try{return await ie(V,{token:q,passwd:Ce,skipTTre:String(ke||""),skipTPbxList:(_t||[]).join("")})}catch(st){const dt=Kt(st);throw(0,a.Q)("fFS "+dt,st),await Je(dt,st),st}};await Promise.all([X.bind((0,P.LQ)({userId:H,mtimeOffset:Ue.getOffsetMsec()}),Se).catch(V=>{throw(0,a.Q)("bindDat",V),V}),re.bind((0,P.LQ)({userId:H,mtimeOffset:Ue.getOffsetMsec()}),Se).catch(V=>{throw(0,a.Q)("bindCmt",V),V}),Pe.bind(async V=>await Ue.emitAsync(o.tE,V),Ue.getSocketId).catch(V=>{throw(0,a.Q)("bindCur",V),V})]);const Oe=new Error("[tracked-error]"),Fe=async(V,ke)=>{if(!V.hasPatch())return;const _t=V.preSettlePatch(),st=(0,vt.S0)((0,vt.Mg)(_t));ke!==!0&&(J(V.name===qt?"Dat":"Cmt","RO|"+V.name+"|"+V.flpakKey+" #"+_t.length),st.length=0);for(let dt=0,Tt=st.length;dt<Tt;dt++){const ht=st[dt];try{await Ue.emitAsync(o.Tm,[V.flpakKey,ht.length,(0,vt.Cd)(ht)])}catch(Ot){const en=Kt(Ot);throw(0,a.Q)("saveFss "+en,Ot,V.name,V.flpakKey,dt+1+"/"+Tt,ht),await Je(en,Ot),Oe}}V.postSettlePatch(_t)},Ne=(0,E.My)(async()=>(0,E.n7)(async()=>{await Fe(X,ae),await Fe(re,fe),await X.freeSOS(),!Pe.hasOtherUser()&&await(0,p.Kb)(5*1e3)},42*1e3),V=>{if(V===Oe)return;const ke=Kt(V);(0,a.Q)("lFFss "+ke,V),Promise.resolve(Je(ke,V)).catch(_t=>{(0,a.Q)("lFFss "+ke+" Err",_t)})});setInterval(Ne.trigger,2*1e3),ye&&setInterval(()=>Pe.onSocketConnect(),20*60*1e3);const ue=X.getFlatStore(),Ee=(0,ne.p)(X.getFlatStore());X.useExtORPL(Ee.onRemotePatchList);const Re=kt(re.getFlatStore());re.useExtORPL(Re.onRemotePatchList);const xe=()=>X.hasPatch()||re.hasPatch(),Ge=(0,E.zH)(async()=>(0,E.rP)(async()=>{let V=0;for(;xe();)Ne.trigger(),await Ne.getRunningPromise(),await(0,p.Kb)(Math.max(V*.5,5)*1e3),V++})),He=()=>globalThis.MB.getSelectionItems()[0].key;return{fssDat:X,fssCmt:re,cssCur:Pe,flatSocket:Ue,flatStore:ue,sdkStore:Ee,cmtStore:Re,sendCur:(V,ke,_t)=>{if(ye===!0){const st=Pe.tryPackCur(V,ke,_t);st&&Ue.emitLossy(o.sv,st)}else ye==="RO"&&J("Cur","")},hasSave:xe,saveAsync:Ge,triggerSave:V=>{Ne.trigger(),V&&Ge().then(V)},triggerFlushLocalPatch:Ne.trigger,theTree:function(V){return V===void 0&&(V=x.$3),console.log((0,x.im)(ue.getFlatTree(),V))},hotTree:function(V){return V===void 0&&(V=x.$3),console.log(Ee.__devHotTree(V))},slctTree:function(V){return V===void 0&&(V=He()),console.log(Ee.__devHotTree(V))},upTree:function(V,ke){return V===void 0&&(V=He()),ke===void 0&&(ke=x.$3),console.log(Ee.findUpHotItemList(V,ke))},cmtTree:function(V){return V===void 0&&(V=x.$3),console.log(Re.__devHotTree(V))}}},Kt=g=>{const z=g&&g.status;return z>=400&&z<500?"4XX":String(g).toLowerCase().includes("timeout")?"Tot":"5XX"},wn=async g=>{let{flpakKey:z,token:H,passwd:oe}=g;const q=Gt(z,Mn),Ce=async(fe,ye,$)=>(0,Yt.WD)(fe,{token:H,passwd:oe,skipTTre:String(ye||""),skipTPbxList:($||[]).join("")});await q.bind((0,P.LQ)({}),Ce);const Te=q.getFlatStore(),ae=(0,ne.p)(q.getFlatStore());return{fssDat:q,flatStore:Te,sdkStore:ae}}},19786:(L,D,n)=>{"use strict";n.d(D,{O:()=>p,q:()=>v});var E=n(4423);const p=(u,i,O)=>{const R=new Set(Object.keys(u));for(const s of Object.keys(i)){R.delete(s);const f=u[s];if(f===void 0&&Object.prototype.hasOwnProperty.call(u,s))throw new Error('attr "'+s+'" value: undefined'+(O?" | "+O:""));if(f===null)throw new Error('attr "'+s+'" value: null'+(O?" | "+O:""));const o=i[s];(0,E.W_)(o,O)}if(R.size!==0)throw new Error('extra attr: "'+[...R].join(",")+'"'+(O?" | "+O:""))},v=(u,i)=>{const O={};for(const R of Object.keys(u))O[R]=i;return O}},52910:(L,D,n)=>{"use strict";n.d(D,{A:()=>u});var E=n(3233),p=n(32313),v=n(16331);const u=function(O,R,s,f){s===void 0&&(s=()=>{}),f===void 0&&(f=()=>{});const o=(_,d,A)=>{if(_.length===0)return;s(_,d,A);const h=[];try{const P=(0,E.W8)(O,_,d,h);if(P===void 0)return;O=P}catch(P){throw f(P,"FlatStore|applyDiff"),P}return h},a=(0,p.o)(),{popUndo:y,popRedo:m,addUndo:S,addUndoResetRedo:U,addRedo:M,...j}=(0,v.B)();return{sync:_=>{O=_,a.resetOOCache()},...a,getOCI:_=>a.getOCache(_),getOCT:_=>a.getOOCache(O,_),getCTObj:()=>O,getFlatTree:()=>O,getFlatItem:_=>O.get(_),applyDiff:_=>U(o(_,R.stepClock(),!0)),applyDiffOptiUDL:_=>{const d=o(_,R.stepClock(),!0);return(0,E.kB)(O,d),U(d)},applyDiffNoUndo:(_,d)=>o(_,d,!1),...j,undo:()=>{const _=y();if(_!==void 0)return M(o(_,R.stepClock(),!0))},redo:()=>{const _=m();if(_!==void 0)return S(o(_,R.stepClock(),!0))}}},i=function(O,R,s){s===void 0&&(s=()=>{});let f={};const o=(_,d)=>{_.length===0||(s(_,d,!1),!applyTreeDiffMutate(O,_,d,void 0))||(f={},a.resetOOCache())},a=createFlatStoreCache(),{popUndo:y,popRedo:m,addUndo:S,addUndoResetRedo:U,addRedo:M,...j}=createFlatStoreUndo();return{sync:_=>{O=_,f={},a.resetOOCache()},...a,getOCI:_=>a.getOCache(_),getOCT:_=>a.getOOCache(f,_),getCTObj:()=>f,getFlatTree:()=>O,getFlatItem:_=>O.get(_),applyDiff:_=>o(_,R.stepClock()),applyDiffOptiUDL:_=>o(_,R.stepClock()),applyDiffNoUndo:(_,d)=>o(_,d),...j,undo:()=>{},redo:()=>{}}}},91458:(L,D,n)=>{"use strict";n.d(D,{a6:()=>v,cQ:()=>p});const E="_cmt",p=f=>f.endsWith(E),v=f=>{if(p(f))throw new Error("bad datKey: "+f);return""+f+E},u=f=>{if(!p(f))throw new Error("bad cmtKey: "+f);return f.slice(0,-E.length)},i="_cur",O=f=>f.endsWith(i),R=f=>{if(O(f))throw new Error("bad datKey: "+f);return""+f+i},s=f=>{if(!O(f))throw new Error("bad curKey: "+f);return f.slice(0,-i.length)}},14501:(L,D,n)=>{"use strict";n.d(D,{Qf:()=>v});var E=n(11972);const p=j=>{let[_,d,A,h]=j;return{tre:_?_.size:0,treGz:_?_.tre.byteLength:0,flpbx:d.reduce((P,x)=>{let{size:ne}=x;return P+ne},0),flpbxGz:d.reduce((P,x)=>{let{pbx:ne}=x;return P+ne.byteLength},0),flpbxC:d.length,flpch:A.reduce((P,x)=>{let{pch:ne}=x;return P+ne.length},0),flpchC:A.length,timeISO:h.toISOString()}},v=j=>{const _=p(j);return"@"+_.timeISO+", tre: "+(0,E.Ec)(_.treGz)+"B/"+(0,E.Ec)(_.tre)+", pbx#"+_.flpbxC+": "+(0,E.Ec)(_.flpbxGz)+"B/"+(0,E.Ec)(_.flpbx)+", pch#"+_.flpchC+": "+(0,E.Ec)(_.flpch)},u=j=>{let[_,d,A]=j;return{treGz:_?_.tre.byteLength:0,flpbxGz:d.reduce((h,P)=>{let{pbx:x}=P;return h+x.byteLength},0),flpbxC:d.length,flpch:A.reduce((h,P)=>{let{pch:x}=P;return h+x.length},0),flpchC:A.length}},i=j=>{let[{tre:_},d,A]=j;return[_.length,d.reduce((h,P)=>{let{pbx:x}=P;return h+x.length},0),A.reduce((h,P)=>{let{pch:x}=P;return h+x.length},0)]},O=function(j,_){_===void 0&&(_="");const[d,A,h]=i(j);return"sTreGz: "+d+", sPbxGz: "+A+", sPch: "+h+" "+_},R=12,s=24,f=j=>j?s:R,o=function(j,_){_===void 0&&(_=j*.75);const d=Math.ceil(j*1024*1024),A=Math.ceil(_*1024*1024);return h=>{const P=u(h);return P.treGz>=A||P.treGz+P.flpbxGz+P.flpch>=d}},a=o(15,R),y=o(30,s),m=(j,_)=>(_?y:a)(j),S=o(25,20),U=o(45,36),M=(j,_)=>(_?U:S)(j)},93701:(L,D,n)=>{"use strict";n.d(D,{p:()=>a});var E=n(63828),p=n(52910),v=n(4423),u=n(91893),i=n(34896),O=n(18820),R=n(34012),s=n(73486),f=n(74701),o=n(8114);const a=U=>{const M=(0,E.Dt)(),j=M.subscribe,_=M.unsubscribe,{setPCXYConfigMap:d,unpatchHotAttr:A,getSourceHotItem:h,getHotItem:P}=m(U),x=(0,O.b)(P,U),ne=()=>S(U.getFlatTree),ve=(0,R.d)(x,U),ge=(0,s.H)(M.send,A,P,x.getHotItemTL,x._unpaaatchToHotAttr,U),{_edit:me,_editAction:W,_editBatch:Q,_editActionBatch:Ae,...we}=ge,Z=(0,f.e)(x,ge,U),ee=(0,f.Q)(x,ge,Z,U);return{subscribe:j,unsubscribe:_,setPCXYConfigMap:d,getSourceHotItem:h,...x,...ve,createRoSdkStore:ne,...we,...Z,...ee}},y=U=>{const{getSourceHotItem:M}=m(U),j=(me,W)=>W,_=createAccessFuncPack(M,U),d=createEditFuncPack(void 0,j,M,_.getHotItemTL,_._unpaaatchToHotAttr,U),{_edit:A,_editAction:h,_editBatch:P,_editActionBatch:x,...ne}=d,ve=createEditPlusFuncPack(_,d,U),ge=createEditPlusPlusFuncPack(_,d,ve,U);return{..._,...ne,...ve,...ge}},m=U=>{let M;const j=h=>{M!==h&&(M=h,U.resetOOCache())},_=(h,P)=>M===void 0||P.type!=="rResCanvas"||M[h]===void 0?P:(0,o.vJ)(P,M[h]),d=h=>{if(h===void 0)throw new Error("[gSHI] bad key");const P=(0,i.fY)(h,U.getFlatTree(),U.getCTObj());if(P===void 0)return;const x=U.getOCI(P);return x.hotItem===void 0&&(x.hotItem={key:P.key,sup:P.sup,sub:P.sub,hotAttr:(0,u.gn)(P.attr)}),x.hotItem};return{setPCXYConfigMap:j,unpatchHotAttr:_,getSourceHotItem:d,getHotItem:h=>{const P=d(h);if(P===void 0||M===void 0||P.hotAttr.type!=="rResCanvas"||M[h]===void 0)return P;const x=U.getOOCache(M,P);return x.pcxyHI===void 0&&(x.pcxyHI=(0,o.l4)(P,M)),x.pcxyHI}}},S=U=>{const M=(0,p.A)(U(),(0,v.LQ)({})),j=()=>M.getFlatTree()!==U(),_=()=>M.sync(U()),{getHotItem:d}=m(M),A=(0,O.b)(d,M);return{hasUpdate:j,syncUpdate:_,...A}}},50397:(L,D,n)=>{"use strict";n.d(D,{E:()=>v});var E=n(73752);const p=()=>fetchGetJSON("/api/web/v3/guide/guide_data"),v=u=>(0,E._Z)("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:u}})},95485:(L,D,n)=>{"use strict";n.d(D,{$p:()=>j,By:()=>ge,Yo:()=>_,cN:()=>A});var E=n(87587),p=n(35517),v=n(99099),u=n(49842),i=n(26886),O=n(74982),R=n(60074),s=n(98388),f=n(67817),o=n(94223),a=n(43980),y=n(18890),m=n.n(y),S=n(60264),U=n(28016),M=n(91839);ENV.IS_SKT_HTTP&&(0,v.lQ)(!0),(0,R.d)(a.uT,a.n_);const j=async(W,Q)=>{console.warn("[onTransferError]",W,Q),W==="Tot"||W==="5XX"?MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:32*1e3,showClose:!0,priority:1,type:"super"}):W==="4XX"&&Q&&/403/.test(Q.message)?MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.cant_edit,confirmText:I18N.dModule.exit_editing,desc:I18N.dModule.cant_edit_desc}).then(()=>MB.global.onBackButtonClick()):W==="4XX"&&Q&&/401/.test(Q.message)?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,p.av)())):W==="4XX"?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,p.av)())):await MB.global.popupHelper.alertAsyncBlocked({desc:window.I18N.dModule.unknown_error.replace(/%s/i,status),isHTML:!0})},_=async(W,Q)=>{console.warn("[onReadOnlyError]",W,Q),W!=="Cur"&&MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1})},d=W=>{let{sendCur:Q}=W;const Ae=(0,E.P2)(()=>{try{const we=(0,i.UF)();if(!we)return;const{current:{currentScreen:Z},screencontainer:{cursorPos:ee}}=we,be=Z&&(Z.cid||Z.key);if(!be)return;const{x:Ze,y:mt}=ee||{};Q(be,Ze,mt)}catch(we){console.error("cssCur push error",we)}},.05*1e3,!0);setInterval(Ae,5*1e3),document.addEventListener("pointermove",Ae,{passive:!0})},A=function(W,Q){var Ae,we,Z,ee,be,Ze,mt;Q===void 0&&(Q=rootSdk);const ze=(0,i.UF)();if(!(!ze||!MB.action)){if(ze.current.currentPage&&W.includes(ze.current.currentPage.key)&&((Ae=Q.sdkStore.getHotItem(ze.current.currentPage.key))==null?void 0:Ae.sup)==="B@trash"&&(ze.mode.basketEditor.item&&MB.action("entry:exit:edit:basket"),ze.mode.basketEditor.refPage?MB.action("entry:update:screen:list"):MB.action("entry:activate:root-project:home-screen"),MB.notice({text:"\u5F53\u524D\u9009\u4E2D\u753B\u5E03\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"})),ze.mode.basketEditor.item&&Q.sdkStore.isTrashed(ze.mode.basketEditor.item)&&(MB.action("entry:exit:edit:basket"),MB.notice({text:"\u5F53\u524D\u7F16\u8F91\u52A8\u6001\u7EC4\u4EF6\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"})),ze.mode.basketEditor.item&&W[0]){var ot;const le=Q.sdkStore.getHotItem(W[0]);if((le==null?void 0:le.sup)==="@@T"&&(le==null||(ot=le.hotAttr)==null?void 0:ot.type)==="rResCanvas"){var ft;const he=Q.sdkStore.getHotItem(ze.mode.basketEditor.item);if(W[1]&&he&&((ft=he.hotAttr)==null?void 0:ft.refRBPageKey)===W[1]){const Ke=Q.sdkStore.findAllTypeUnder(W[1],"rResCanvas");(Ke==null?void 0:Ke.length)===0&&(MB.action("entry:exit:edit:basket"),W[0]&&Q.sdkStore.deleteHotItem(W[0]))}}}if(ze.mode.basketEditor.refPage&&W.includes(ze.mode.basketEditor.refPage)&&((we=Q.sdkStore.getHotItem(ze.mode.basketEditor.refPage))==null?void 0:we.sup)==="@@T"){var et;if(MB.action("entry:exit:edit:basket"),MB.notice({text:"\u5F53\u524D\u7F16\u8F91\u6BCD\u7248\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"}),((et=Q.sdkStore.getSubHotItemList(ze.mode.basketEditor.refPage))==null?void 0:et.length)===0){const le=Q.sdkStore.findAllBasketFRBPage(ze.mode.basketEditor.refPage);Q.sdkStore.deleteHotItemBatch([...le.map(he=>he.key),ze.mode.basketEditor.refPage])}}if(((Z=Q.sdkStore.getHotItem(W[0]))==null?void 0:Z.hotAttr.type)==="rResBunch"&&((ee=Q.sdkStore.getHotItem(W[0]))==null?void 0:ee.hotAttr.bunch)==="rbPage")if(!ze.rightnav.screenDataMap[W])MB.action("entry:update:screen:list");else{const le=ze.rightnav.screenDataMap[W],he=Q.sdkStore.getHotItem(W[0]);if(he&&!m()(he==null?void 0:he.hotAttr,le==null?void 0:le.hotAttr)){var gt,k,N;(le==null||(gt=le.hotAttr)==null?void 0:gt.name)!==(he==null||(k=he.hotAttr)==null?void 0:k.name)&&MB.action("entry:update:screen:list");const Ke=ze==null||(N=ze.current)==null?void 0:N.currentPage;(Ke==null?void 0:Ke.cid)===(he==null?void 0:he.key)&&MB.action("entry:update:current:screen-mata",{screenMeta:{cid:he==null?void 0:he.key,sup:he==null?void 0:he.sup,sub:he==null?void 0:he.sub,...he==null?void 0:he.hotAttr},updateWidgetTreeData:!1})}}if((be=ze.table)!=null&&be.selectTableCellInfo&&W[0]===((Ze=ze.table)==null||(Ze=Ze.widget)==null?void 0:Ze.key)&&((mt=Q.sdkStore.getHotItem(W[0]))==null?void 0:mt.hotAttr.type)==="wTable")if(Q.sdkStore.isTrashed(W[0]))MB.action("entry:clear:selection"),MB.action("table:update:info",{selectTableCellInfo:null,isShowTableMenu:!1,widget:null,isEditTable:!1}),MB.f.isEditTable=!1;else{var pe,De;const{selectionLeftTopInfo:{x:le,y:he},selectionRightBottomInfo:{x:Ke,y:Le}}=(pe=ze.table)==null?void 0:pe.selectTableCellInfo,Ye=Q.sdkStore.getHotItem(W[0]);if(Ye!=null&&(De=Ye.hotAttr)!=null&&De.tableData){const{hotAttr:{tableData:{columns:Xe,rows:yt}}}=Ye;let Mt=le,Ct=he,wt=Ke,Pt=Le;le>Xe.length-1&&(Mt=Xe.length-1),Ke>Xe.length-1&&(wt=Xe.length-1),he>yt.length-1&&(Ct=yt.length-1),Le>yt.length-1&&(Pt=yt.length-1);const St={...ze.table.widget,...Ye.hotAttr};(0,U.G)({widget:St,x1:Mt,y1:Ct,x2:wt,y2:Pt})}}MB.action("entry:rebuild:screen-widget-tree")}},h=(0,E.P2)(W=>{A(W)},.5*1e3),P={repaint:W=>{let{type:Q,payload:Ae}=W;Q===O.K&&h(Ae)}},x=(0,E.P2)(()=>{!(0,i.UF)()||!MB.action||MB.action("entry:comment:rebuild:commentList")},.5*1e3),ne={repaint:W=>{let{type:Q,payload:Ae}=W;Q===S.K&&x()}},ve=async W=>{let{projectBasicCid:Q}=W;try{const{userId:Ae,flatKey:we}=await fetchGetJSON("/api/flat/web_v1/proj2-edit-info?prj2Cid="+Q);return{userId:Ae,flatKey:we}}catch(Ae){await apiErrorModals(Ae)}},ge=async(W,Q)=>{try{const we=await(0,v.od)(W),Z=we.sdkStore.createRoSdkStore();Object.assign(globalThis,{...we,rootSdk:we,roSdkStore:Z}),(0,u.s_)()||d(we),we.sdkStore.subscribe(P.repaint),we.cmtStore.subscribe(ne.repaint),Q&&(0,u.mK)()&&(0,M.B)(we.flatStore,Q)}catch(we){var Ae;const Z=we?Number(we.status)||Number((Ae=we.toString().split("status")[1])==null||(Ae=Ae.split(":")[1])==null?void 0:Ae.split(",")[0])||401:void 0;console.warn("[initRootSdk]",we,Z),(0,R.Q)("initRootSdk",we,{status:Z,sdkOption:W,projectBasic:Q}),await(0,p.Vz)({status:Z}),await new Promise(()=>{})}},me=W=>async Q=>{let{fssDat:Ae}=Q;try{const we=await Ae.loadSOS();if(!we)return;console.warn("[afterStoreCreate] found unsaved proj tree",we);const Z=await MB.global.popupHelper.confirmAsync({isClose:!0,isHTML:!0,title:"\u6062\u590D\u6570\u636E",desc:["<p>\u68C0\u6D4B\u5230\u672A\u6210\u529F\u4FDD\u5B58\u5230\u4E91\u7AEF\u7684\u6587\u4EF6\u6570\u636E\uFF0C\u6700\u540E\u8BB0\u5F55\u65F6\u95F4\u4E3A\uFF1A"+getFormatDateString(new Date(we.time).getTime(),"","-")+"\u3002</p>","<p>\u662F\u5426\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF1F</p>"].join(""),confirmText:"\u6062\u590D",cancelText:"\u53D6\u6D88"});if(toSentry("loadSOS",void 0,{isKeep:!!Z,time:we.time}),Z){const{clientData:{upperCid:ee}}=await newFlpakFromTree(we.tree,W.team_cid,{...W,name:W.name+"-\u6062\u590D\u6570\u636E"});await Ae.freeSOS(),refreshLocationHref("/proto/design/"+ee)}else await Ae.freeSOS()}catch(we){console.warn("[afterStoreCreate]",we)}}},16426:(L,D,n)=>{"use strict";n.d(D,{YN:()=>U,om:()=>S});var E=n(95485),p=n(99099),v=n(20100),u=n(73752),i=n(7776),O=n(74982),R=n(26886),s=n(87587),f=n(14501);const o=async M=>{const[[j,_],[d,A]]=await Promise.all([(async()=>{const{project_basic:h,project_metas:[P]}=await fetchGetJSON("/api/upper/web_v1/basics/"+M);return[h,P]})(),(async()=>{const{userId:h,flatKey:P}=await getFlatEditData({projectBasicCid:M});return console.log("[p2edit] uId="+h+" key="+P+" pbCid="+M),[h,P]})()]);return await initRootSdk({userId:d,flpakKey:A,afterStoreCreate:getAfterStoreCreate(j),onTransferError,onReadOnlyError,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0,__fetchFlpakAsync:async(h,P)=>{const x=await fetchFlpakAsync(h,P),ne=statFlpak(x),ve=Number(((ne.treGz+ne.flpbxGz+ne.flpch)/1024/1024).toFixed(1)),ge=ENV.IS_FEAT_FLPAK4GB;return ENV["@FLPAK_SIZE_INFO"]={isFlpakSizeWarn:isFlpakSizeWarn(x,ENV.IS_FEAT_FLPAK4GB),isFlpakSizeLimit:isFlpakSizeLimit(x,ENV.IS_FEAT_FLPAK4GB),currentSize:ve,warnSize:getWarnTreMiB(ge)},x}},j),{projectBasic:j,projectMeta:_}},a=async M=>{const{market_template:j,project_metas:[_]}=await requestResourcesDetailData(M);return await initRootSdk({userId:void 0,flpakKey:_.cid,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0,onTransferError,onReadOnlyError},j),{projectBasic:j,projectMeta:_}},y={repaint:M=>{let{type:j,payload:_}=M;j===O.K&&m(_)}},m=(0,s.P2)(M=>{const j=(0,R.UF)();if(!j||!MB.action)return;const _=j.popups.base.currentPopupPanel,d=j.current.currentOrg,A=j.current.currentUser,h=j.mode.editingOrgComboMode,P=j.mode.editingUserComboMode;if(_!=="builtin"&&!(A&&P)&&!(d&&h))return;const x=j.popups.widget.navIndex;if(P||h){const W=P?userSdk:orgSdk;if(!W)return;(0,E.cN)(M,W)}else if(A&&x===1&&userSdk){var ne,ve;((ne=userSdk.sdkStore.getHotItem(M[0]))==null?void 0:ne.hotAttr.type)==="rResBunch"&&((ve=userSdk.sdkStore.getHotItem(M[0]))==null?void 0:ve.hotAttr.bunch)==="rbPage"&&MB.action("entry:load:user:combo:group:list")}else if(d&&x===2&&orgSdk){var ge,me;((ge=orgSdk.sdkStore.getHotItem(M[0]))==null?void 0:ge.hotAttr.type)==="rResBunch"&&((me=orgSdk.sdkStore.getHotItem(M[0]))==null?void 0:me.hotAttr.bunch)==="rbPage"&&MB.action("entry:load:org:combo:group:list")}},.5*1e3),S=async M=>{let{project_meta_cid:j,userId:_,repaint:d}=M;try{const A=await(0,p.od)({userId:_,flpakKey:j,isDummyCmt:!0,isAllowDat:!0,onTransferError:E.$p,onReadOnlyError:E.Yo});return d&&A.sdkStore.subscribe(y.repaint),A}catch(A){console.warn("[initComboStore]",A)}},U=M=>(0,u.EE)("/api/upper/web_v1/design/initial?project_cid="+M)},99990:(L,D,n)=>{"use strict";n.d(D,{$B:()=>N,BG:()=>f,F7:()=>ee,H3:()=>Ct,HP:()=>gt,IS:()=>xt,Im:()=>E.Im,J5:()=>me,KI:()=>ft,KQ:()=>M,My:()=>wt,NK:()=>Pt,P3:()=>Ae,Qs:()=>mt,RI:()=>U,RO:()=>Mt,Tz:()=>Xe,Vp:()=>Le,W:()=>d,X6:()=>Ze,Xr:()=>S,_5:()=>Ft,a$:()=>m,be:()=>ge,bt:()=>ne,cD:()=>he,iq:()=>Ye,kk:()=>Lt,qr:()=>pe,rM:()=>Z,rw:()=>ot,sE:()=>St,tr:()=>Bt,uB:()=>le,uo:()=>x,ur:()=>Q});var E=n(7776),p=n(73752),v=n(76985),u=n(35517),i=n(11230);const O=(I,F)=>{const Y=new Error("[NO SENTRY] "+I);return Object.assign(Y,F),Y},R=(I,F)=>fetchGetJSON("/api/upper/web_v1/design/readonly_initial?access_token="+I+"&password="+F),s=async(I,F)=>{const Y="/api/flat/web_v1/preview/initial?access_token="+I+"&view_mode="+F,se=await fetch(Y,{credentials:"same-origin"}),Be=await se.json();if(se.status!==200)throw O("[fetchGetHead] failed with "+se.status+": "+Y,{status:se.status,error_type:Be==null?void 0:Be.error_type});return Be},f=(I,F)=>(0,p.IP)("/api/upper/web_v1/basics/"+I,{...F}),o=()=>fetchGetJSON("/api/web/v3/configuration/design_activity"),a=()=>fetchGetJSON("/api/web/v3/configuration/square_topic"),y=()=>fetchGetJSON("/api/web/v3/configuration/workspace"),m=async()=>{let I=[];try{const F=await(0,p.EE)("/api/library/v4/recent_keywords");F!=null&&F.keywords&&(I=F==null?void 0:F.keywords)}catch(F){await(0,u.Vz)(F)}return I},S=()=>(0,p._E)("/api/library/v4/recent_keywords"),U=I=>(0,p.Mn)("/api/library/v4/recent_keywords",{keyword:I}),M=async()=>{if((0,i.p)())return j();{var I;let F;try{F=await(0,p.EE)("/api/library/v3/project_upper/user_combo_groups")}catch(Y){return await(0,u.Vz)(Y),{}}return{userComboGroupList:(I=F)==null?void 0:I.user_combo_groups}}},j=async()=>{var I;let F;try{F=await(0,p.EE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+MB.user.solo_org.cid)}catch(Y){return await(0,u.Vz)(Y),{}}return{userComboGroupList:(I=F)==null?void 0:I.org_combo_groups}},_=I=>fetchPutJSON("/api/proto7/web_v1/screen_aligns/"+I.cid,{...I}),d=async I=>{var F;let{orgCid:Y}=I,se;try{se=await(0,p.EE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+Y)}catch(Be){return await(0,u.Vz)(Be),{}}return{orgComboGroupList:(F=se)==null?void 0:F.org_combo_groups}},A=async I=>{const{project_metas:F,screen_metas:Y,screen_glues:se,market_template:Be,icon_group:Qe}=await requestResourcesDetailData(I),{category:pt}=Be,at=pt===COMBO_GROUP;if(pt===ICON_GROUP){const{title:tt,source:ct}=Qe,We=await fetchGetJSON(ct),bt=ICON_LIBRARY_TYPE_MAP[tt]||"svg",{iconGroupData:Et,iconData:kt}=getLibraryIconInfoFromRequestData(We,bt);return{marketTemplate:Be,iconGroupData:Et,iconData:kt}}else{const tt=[];if(at){const ct={};Y.forEach(We=>{ct[We.screen_glue_cid]=We.cid});for(const We of se){const{cid:bt,name:Et,project_meta_cid:kt}=We;tt.push({cid:bt,name:Et,type:Be.category,projectBasicCid:Be.cid,projectMetaCid:kt,screenGlue:We,screenMetaCid:ct[We.cid]||""})}}else{const ct=se.find(We=>We.type==="project-main");for(const We of Y){const{cid:bt,name:Et,project_meta_cid:kt,screen_glue_cid:jt}=We;ct.cid===jt&&tt.push({cid:bt,name:Et,type:Be.category,projectBasicCid:Be.cid,projectMetaCid:kt,screenGlue:ct,screenMetaCid:bt})}}return{marketTemplate:Be,marketTemplateItemList:tt,projectMetaList:F,screenGlueList:se,screenMetaList:Y}}},h=async()=>{const I=await requestUserStarredList(COMBO_GROUP),F=await requestUserStarredList(ICON_GROUP),Y=await requestUserStarredList(SCREEN_LIST),se=I.concat(F).concat(Y),Be=se.filter(it=>{let{category:tt}=it;return[COMBO_GROUP,SCREEN_LIST].includes(tt)}),Qe=se.filter(it=>{let{category:tt}=it;return tt===ICON_GROUP}),pt=new Map,at=new Map;for(const it of se){const{category:tt,cid:ct}=it;tt===ICON_GROUP?at.set(ct,it):pt.set(ct,it)}return{marketTemplateList:Be,iconLibraryList:Qe,marketTemplateListMap:pt,iconLibraryListMap:at}},P=I=>{let{marketTemplateCid:F}=I;return fetchDeleteHead("/api/community/v1/market_template/use/"+F)},x=async I=>{const{icon_group:F,market_template:Y}=await(0,E.Mv)(I.cid),{source:se,title:Be}=F||{},Qe=await(0,p.EE)(se),pt=v.em[Be]||"svg",{iconGroupData:at,iconData:it}=(0,v._7)(Qe,pt);return{iconGroupData:at,iconData:it,marketTemplate:Y}},ne=async()=>{if((0,i.p)())return ve();try{const{asset_groups:I}=await(0,p.sE)("/api/library/v3/asset_data/me/asset_groups");return{userAssetGroupList:I}}catch(I){await(0,u.Vz)(I)}},ve=async()=>{const I=MB.user.solo_org.cid;try{const{asset_groups:F}=await(0,p.sE)("/api/library/v3/asset_data/org/asset_groups?org_cid="+I);return{userAssetGroupList:F}}catch(F){await(0,u.Vz)(F)}},ge=async I=>{let{orgCid:F}=I;try{const{asset_groups:Y}=await(0,p.sE)("/api/library/v3/asset_data/org/asset_groups?org_cid="+F);return{orgAssetGroupList:Y}}catch(Y){await(0,u.Vz)(Y)}},me=async I=>{if((0,i.p)())return W(I);try{const{asset:F,user_asset:Y}=await(0,p.NS)("/api/library/v3/asset_data/me/search_by_url",{image_url:I});return{asset:F,user_asset:Y}}catch(F){await(0,u.Vz)(F)}},W=async I=>{const F=MB.user.solo_org.cid;try{const{asset:Y,org_asset:se}=await(0,p.NS)("/api/library/v3/asset_data/org/search_by_url",{image_url:I,org_cid:F});return{asset:Y,user_asset:se}}catch(Y){await(0,u.Vz)(Y)}},Q=async(I,F)=>{try{const{asset:Y,org_asset:se}=await(0,p.NS)("/api/library/v3/asset_data/org/search_by_url",{image_url:I,org_cid:F});return{asset:Y,org_asset:se}}catch(Y){await(0,u.Vz)(Y)}},Ae=async I=>{if((0,i.p)())return we(I);try{const{user_asset_group:F}=await(0,p.bX)("/api/library/v4/users/asset_groups/"+I.cid,{...I});return{user_asset_group:F}}catch(F){await(0,u.Vz)(F)}},we=async I=>{const F=MB.user.solo_org.cid;try{const{org_asset_group:Y}=await(0,p.bX)("/api/library/v4/orgs/asset_groups/"+I.cid,{...I,org_cid:F});return{user_asset_group:Y}}catch(Y){await(0,u.Vz)(Y)}},Z=async I=>{try{const{org_asset_group:F}=await(0,p.bX)("/api/library/v4/orgs/asset_groups/"+I.cid,{...I});return{org_asset_group:F}}catch(F){await(0,u.Vz)(F)}},ee=async I=>{if((0,i.p)())return be(I);try{return await(0,p.bX)("/api/library/v3/asset_data/me/assets/"+I.asset_cid,{...I})}catch(F){await(0,u.Vz)(F)}},be=async I=>{try{return await(0,p.bX)("/api/library/v3/orgs/assets/"+I.cid+"?org_cid="+I.org_cid,{...I})}catch(F){await(0,u.Vz)(F)}},Ze=async I=>{try{return await(0,p.bX)("/api/library/v3/orgs/assets/"+I.cid+"?org_cid="+I.org_cid,{...I})}catch(F){await(0,u.Vz)(F)}},mt=async I=>{let{cid:F,name:Y,groupCid:se}=I;if((0,i.p)())return ze({cid:F,name:Y,groupCid:se});try{await(0,p.NS)("/api/library/v3/asset_data/me/assets",{cid:F,name:Y,group_cid:se})}catch(Be){await(0,u.Vz)(Be)}},ze=async I=>{let{cid:F,name:Y,groupCid:se}=I;const Be=MB.user.solo_org.cid;try{await(0,p.NS)("/api/library/v3/orgs/assets?org_cid="+Be,{cid:F,name:Y,group_cid:se})}catch(Qe){await(0,u.Vz)(Qe)}},ot=async I=>{let{orgCid:F,cid:Y,name:se,groupCid:Be}=I;try{const Qe=await(0,p.NS)("/api/library/v3/orgs/assets",{cid:Y,org_cid:F,name:se,group_cid:Be});return Qe==null?void 0:Qe.cid}catch(Qe){await(0,u.Vz)(Qe)}},ft=async I=>{let{user_asset_group_cid:F,org_cid:Y,org_asset_group_cid:se}=I;if((0,i.p)())return et({user_asset_group_cid:F,org_cid:Y,org_asset_group_cid:se});try{return(0,p.NS)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid:F,org_cid:Y,org_asset_group_cid:se})}catch(Be){await(0,u.Vz)(Be)}},et=async I=>{let{user_asset_group_cid:F,org_cid:Y,org_asset_group_cid:se}=I;try{return(0,p.NS)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid:F,org_cid:Y,org_asset_group_cid:se})}catch(Be){await(0,u.Vz)(Be)}},gt=async I=>{if((0,i.p)())return k(I);try{const{user_asset_group:F,user_assets:Y}=await(0,p.sE)("/api/library/v3/asset_data/me/asset_groups/"+I);return{user_asset_group:F,userAssets:Y}}catch(F){await(0,u.Vz)(F)}},k=async I=>{try{const{org_asset_group:F,org_assets:Y}=await(0,p.sE)("/api/library/v3/orgs/asset_groups/"+I);return{user_asset_group:F,userAssets:Y}}catch(F){await(0,u.Vz)(F)}},N=async I=>{try{const{org_asset_group:F,org_assets:Y}=await(0,p.sE)("/api/library/v3/orgs/asset_groups/"+I);return{org_asset_group:F,orgAssets:Y}}catch(F){await(0,u.Vz)(F)}},pe=async I=>{(0,i.p)()?await De(I):await(0,p._E)("/api/library/v3/asset_data/me/assets/"+I.cid)},De=async I=>{await(0,p._E)("/api/library/v3/orgs/assets/"+I.cid+"?org_cid="+I.org_cid)},le=async I=>{await(0,p._E)("/api/library/v3/orgs/assets/"+I.cid+"?org_cid="+I.org_cid)},he=async I=>{(0,i.p)()?await Ke(I):await(0,p._E)("/api/library/v3/asset_data/me/asset_groups/"+I)},Ke=async I=>{await(0,p._E)("/api/library/v3/orgs/asset_groups/"+I)},Le=async I=>{await(0,p._E)("/api/library/v3/orgs/asset_groups/"+I)},Ye=I=>(0,p._Z)("/preferences/update",{...I}),Xe=async(I,F)=>{if((0,i.p)())return yt(I,F);try{return await(0,p.bX)("/api/library/v4/users/asset_groups/"+I,{...F})}catch(Y){await(0,u.Vz)(Y)}},yt=async(I,F)=>{const Y=MB.user.solo_org.cid;try{return await(0,p.bX)("/api/library/v4/orgs/asset_groups/"+I,{...F,org_cid:Y})}catch(se){await(0,u.Vz)(se)}},Mt=I=>async(F,Y)=>{try{const se={...Y,org_cid:I};return await(0,p.bX)("/api/library/v4/orgs/asset_groups/"+F,{...se})}catch(se){await(0,u.Vz)(se)}},Ct=async(I,F)=>{let Y=null;try{const se=await(0,p.sE)("/api/community/v1/workspace?category="+I+"&plabel="+F);se!=null&&se.market_templates&&(Y=se==null?void 0:se.market_templates)}catch(se){await(0,u.Vz)(se)}return Y},wt=async I=>{let F=null;try{const Y=await(0,p.EE)("/flpak/w-p2wsearch?"+I);Y!=null&&Y.data&&(F=Y)}catch(Y){await(0,u.Vz)(Y)}return F},Pt=async I=>{let F=null;try{const Y=await(0,p.EE)("/flpak/w-p2meta/"+I);Y!=null&&Y.length&&(F=Y)}catch(Y){await(0,u.Vz)(Y)}return F},St=async I=>{let{currentComboPanel:F,projectMetaCid:Y}=I;try{await(0,p.Gf)("/flpak/w-migrate-"+F+"-combo-group/"+Y+"?mode=normal")}catch(se){await(0,u.Vz)(se)}},Bt=async I=>{let{projectBasicCid:F}=I;try{const{userId:Y,flatKey:se}=await(0,p.EE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+F);return{userId:Y,flatKey:se}}catch(Y){await(0,u.Vz)(Y)}},Rt=async I=>{let{projectBasicCid:F,accessToken:Y,password:se}=I;try{const{userId:Be,flatKey:Qe}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+F+"&access_token="+Y+"&password="+se);return{userId:Be,flatKey:Qe}}catch(Be){await apiErrorModals(Be)}},xt=I=>(0,p.EE)("/api/dashboard/v5/orgs/"+I),Lt=async I=>{const{project:F}=await(0,p.EE)("/api/dashboard/v5/projects/"+I);return F},Ft=async I=>(0,p.EE)("/api/upper/web_v1/basics/statstics/"+I)},91839:(L,D,n)=>{"use strict";n.d(D,{B:()=>U,V:()=>m});var E=n(3954),p=n(49777),v=n(2150),u=n(71913),i=n(95060),O=n(6515),R=n(66234),s=n(11685),f=n(35125),o=n(30906),a=n(3175);const y={iphone_14_pro_max:54,iphone_14_pro:54,iphone_13_pro_max:44,iphone_13_pro:44,iphone_11_pro_max:44,iphone_11_pro:44,iphone_8_plus:20,iphone_8:20,Huawei_p8:24,Huawei_p40:24,google_pixel_2:24,google_pixel_2_xl:24,ipad_mini:24,ipad_pro_11:24,ipad_pro_12:24},m=M=>{let j=!1,_=!1,d="";if(M.hotAttr.device==="customize"){for(const h of["android","iphone","ipad"])for(const[P,x]of Object.entries(E[h]))if(x.height===M.hotAttr.h&&x.width===M.hotAttr.w){if(j=!0,d=h,h==="iphone"||h==="ipad"){const ne=E.iphone.iphone_8,ve=E.iphone.iphone_8_plus;ne.width===M.hotAttr.w&&ne.height===M.hotAttr.h||ve.width===M.hotAttr.w&&ve.height===M.hotAttr.h?_=!1:_=!0}break}}else for(const h of["android","iphone","ipad"])if(E[h][M.hotAttr.device]){j=!0,d=h,(h==="iphone"||h==="ipad")&&(["iphone_8","iphone_8_plus"].includes(M.hotAttr.device)||(_=!0));break}let A;if(j){A=[];let h;d==="ipad"||d==="iphone"?h=o._.wIphoneXSB(I18N.w.wIphoneXSB):h=o._.wAndroidSB(I18N.w.android_status_bar),h.h=y[M.hotAttr.device]||44,h.w=M.hotAttr.w,h.x=M.hotAttr.w/2,h.y=h.h/2,h.zIndex=6,h.fixPosTo="top";const P={key:(0,u.Tl)(),hotAttr:h,sup:M.key,sub:[]};A.push(P)}if(_){let h=o._.wRect(I18N.w.tab_bar);h={...h,zIndex:7,fixPosTo:"bottom",fill:{fillIsVisible:!0,fill:"solid",solidColor:4177066239},border:{bdrIsVisible:!1,bdrColor:4278190080,bdrWidth:1,bdrStyle:"solid"},borderRadius:4,borderVisibility:{bdrIsVisibleT:!0,bdrIsVisibleL:!0,bdrIsVisibleB:!0,bdrIsVisibleR:!0}},h.h=21,h.w=M.hotAttr.w,h.x=M.hotAttr.w/2,h.y=M.hotAttr.h-h.h/2;const P={key:(0,u.Tl)(),hotAttr:h,sup:M.key,sub:[]};A.push(P);let x=o._.wRect(I18N.w.wRect);x={...x,zIndex:8,fixPosTo:"bottom",fill:{fillIsVisible:!0,fill:"solid",solidColor:255},borderRadius:3,border:{bdrIsVisible:!1,bdrColor:3149642751,bdrWidth:1,bdrStyle:"solid"}},x.h=5,x.w=134,x.x=M.hotAttr.w/2,x.y=h.y;const ne={key:(0,u.Tl)(),hotAttr:x,sup:M.key,sub:[]};A.push(ne)}return A},S=(M,j)=>{var _,d;const{model:A,height:h,width:P,attr:x}=j,ne=(0,u.Tl)("rbp");if((0,f.ff)(M,{key:ne,sup:p.X3,attr:(0,f.cr)(I18N.LeftSidePanel.page,1,A,P,h,(_=x==null?void 0:x.orientation)!=null?_:"portrait")}),A==="iphone_13_pro"&&(d=(0,a.zi)())!=null&&d.isToShow)return M;const ve=o._[s.l.Canvas](I18N.LeftSidePanel.artboard+" 1",5,P/2,h/2,P,h,A),ge=(0,i.f4)(ve),me=(0,u.Tl)("rc");M.push({type:v.P6,key:me,keySup:ne}),M.push({type:v.q$,key:me,attrDiff:ge});const W=m({hotAttr:ve,key:me});if(W!==void 0){for(const Q of W)M.push({type:v.P6,key:Q.key,keySup:Q.sup}),M.push({type:v.q$,key:Q.key,attrDiff:Q.hotAttr});W.length===1?M.push({type:v.q$,key:me,attrDiff:{shh:(0,R.xd)(W[0].hotAttr.h)}}):M.push({type:v.q$,key:me,attrDiff:{shh:(0,R.xd)(W[0].hotAttr.h),sfh:(0,R.xd)(W[1].hotAttr.h)}})}return M},U=(M,j)=>{if(M.getFlatTree().get("B@main").sub.length===0){const _=S([],j);M.applyDiff(_),M.resetUndo()}else if(!M.getFlatTree().get("B@ref-mind")){const _=[];_.push({type:v.P6,key:p.T3,keySup:O.$3}),_.push({type:v.q$,key:p.T3,attrDiff:(0,f.oE)("rbRefMind")}),M.applyDiff(_),M.resetUndo()}}},4091:(L,D,n)=>{"use strict";n.d(D,{S3:()=>p,kC:()=>i,ky:()=>u,mp:()=>O,pX:()=>E});const E="/proto",p=s=>E+"/"+s,v=s=>{const f=/^\/proto\/design\/(?:([^/]+?))$/i.exec(s);return f?f[1]:new Error("project cid error")},u=s=>{let{search:f,pathname:o}=s;return o.includes("/sharing")?o.includes("dashboard")||o.includes("htmlzip")?o.split("/").at(-3):o.includes("embed/v2")?location.pathname.split("/").at(-4):o.split("/").at(-2):new URLSearchParams(f).get("token")||/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(o)[1]},i="/p2mkt_view",O=s=>i+"/"+s,R=s=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(s)[1]},77321:(L,D,n)=>{"use strict";n.d(D,{Jy:()=>R,U2:()=>u,Xs:()=>O,hd:()=>s,s0:()=>i});var E=n(59387),p=n(1823),v=n(29184);let u=function(f){return f.OrgPrototypePageNumber="OrgPrototypePageNumber",f.OrgVersionNumber="OrgVersionNumber",f.OrgMaxPicSize="OrgMaxPicSize",f.SoloPrototypePageNumber="SoloPrototypePageNumber",f.SoloMaxPicSize="SoloMaxPicSize",f.SoloToOrgFeature="SoloToOrgFeature",f.MaxSharingCount="MaxSharingCount",f}({});const i=f=>{const o=(0,v.F)();return p.PA[f][o]},O={[u.OrgPrototypePageNumber]:p.X4.CanvasOrPagesCount,[u.OrgVersionNumber]:p.X4.ProjectVersionsCount,[u.OrgMaxPicSize]:p.X4.ImgCapacity,[u.SoloToOrgFeature]:p.X4.ProjectVersionsCount,[u.MaxSharingCount]:p.X4.ProjectShareLinksCount,[u.SoloPrototypePageNumber]:p.X4.CanvasOrPagesCount,[u.SoloMaxPicSize]:p.X4.ImgCapacity},R={[u.OrgPrototypePageNumber]:{payEntrance:"\u7F16\u8F91\u533A-v8_\u56E2\u961F_\u753B\u5E03\u8D85\u9650_\u5F39\u7A97",checkoutPlace:"workspace-v8_org_page_limit_popup"},[u.OrgVersionNumber]:{payEntrance:"\u7F16\u8F91\u533A-v8_\u56E2\u961F_\u7248\u672C\u8D85\u9650_\u5347\u7EA7",checkoutPlace:"workspace-v8_fileversion_org_upgrade"},[u.OrgMaxPicSize]:{payEntrance:"\u7F16\u8F91\u533A-v8_\u4E0A\u4F20\u56FE\u7247\u5BB9\u91CF\u8D85\u9650",checkoutPlace:"workspace-v8_upload_pic_limit"},[u.SoloMaxPicSize]:{payEntrance:"\u7F16\u8F91\u533A-v8_\u4E0A\u4F20\u56FE\u7247\u5BB9\u91CF\u8D85\u9650",checkoutPlace:"workspace-v8_upload_pic_limit"},[u.SoloPrototypePageNumber]:{payEntrance:"\u7F16\u8F91\u533A-v8_\u4E2A\u4EBA_\u753B\u5E03\u8D85\u9650_\u5F39\u7A97",checkoutPlace:"workspace-v8_solo_page_limit_popup"},[u.SoloToOrgFeature]:{payEntrance:"\u7F16\u8F91\u533A-\u7248\u672C\u8BB0\u5F55_\u5347\u7EA7\u7248\u672C",checkoutPlace:"workspace-v8_fileversion_org_upgrade"},[u.MaxSharingCount]:{payEntrance:"\u7F16\u8F91\u533A-\u591A\u94FE\u63A5\u5206\u4EAB_\u5347\u7EA7\u7248\u672C",checkoutPlace:"workspace-linkshare_limit"}},s=f=>{let{limitType:o,user:a,org:y}=f;const{maxScreenCount:m,maxProjectVersionCount:S,maxPicBytes:U,maxSharingCount:M}=(0,E.tD)(a,y);switch(o){case u.OrgPrototypePageNumber:case u.SoloPrototypePageNumber:return"\u65B0\u5EFA\u8D85"+m+"\u753B\u5E03";case u.OrgVersionNumber:return"\u539F\u578B\u7F16\u8F91\u533A\u65B0\u5EFA>"+S+"\u4E2A\u7248\u672C";case u.OrgMaxPicSize:return"\u4E0A\u4F20>"+U/1024/1024+"MB\u7684\u56FE\u7247";case u.MaxSharingCount:return"\u539F\u578B\u5185\u9AD8\u7EA7\u5206\u4EAB>"+M+"\u4E2A";case u.SoloMaxPicSize:return"\u4E0A\u4F20>"+U+"MB\u7684\u56FE\u7247";case u.SoloToOrgFeature:return"\u539F\u578B\u5185\u70B9\u51FB\u7248\u672C\u8BB0\u5F55"}}},8090:(L,D,n)=>{"use strict";n.d(D,{Z:()=>R});var E=n(49650),p=n(7485),v=n(71464),u=n(27004),i=n(14974),O=n(35269);class R extends p.PureComponent{constructor(){super(...arguments),(0,E.Z)(this,"setComponentRef",f=>this.modal=f),(0,E.Z)(this,"getEntry",()=>{const f=new URLSearchParams(location.search),o=f&&f.get("view_mode");return o?v.I[o]:""})}componentDidMount(){const{dispatch:f,onConfirm:o}=this.props,a=this;window.onmessage=async function(y){if(y.data==="loginSuccess")typeof f=="function"&&f({type:"modal:update:state",payload:{loginModal:{isOpen:!1}}}),o();else if(y.data==="close"){var m;a==null||(m=a.modal)==null||m.close()}},u.x.userSourceTrack(this.getEntry())}render(){const{isOpen:f,onClose:o,type:a,source:y}=this.props,m=this.getEntry(),S=m?"&entry="+m:"",U=location.origin+"/embed/auth_box?type="+a+(y?"&source="+y:"")+S;return(0,O.jsx)(i.B,{isOpen:f,onClose:o,ref:this.setComponentRef,className:"login-modal",children:(0,O.jsx)("iframe",{src:U})})}}(0,E.Z)(R,"defaultProps",{type:"signin"})},12317:(L,D,n)=>{"use strict";n.d(D,{Z:()=>R});var E=n(49650),p=n(7485),v=n(94223),u=n(24397),i=n(14974),O=n(35269);class R extends p.PureComponent{constructor(){super(...arguments),(0,E.Z)(this,"setComponentRef",f=>this.modal=f)}componentDidMount(){const f=this;window.onmessage=async function(o){if(o.data==="loginSuccess"||o.data==="registerSuccess"){const a=btoa("client=web&type=to_url&url="+location.href),y="https://accounts.wondershare.com/v3/user/oauth-client/authorize?response_type=code&redirect_uri="+location.origin+"/wondershare/callback&scope=user%20normal&state="+a+"&source=37&app_key=689b3b14b4e225a9ddadd80a5ef81ca3&product_id=8038";(0,v.ll)(y)}else o.data==="close"&&f.modal.close()}}render(){const{isOpen:f,onClose:o,type:a}=this.props,y="https://accounts.wondershare.com/web/"+(a==="signin"?"login":"register")+"?redirect_uri="+location.origin+"&source=37&site=mockitt.wondershare.com&mode=1";return(0,O.jsxs)(i.I,{isOpen:f,onClose:o,ref:this.setComponentRef,className:"login-modal",children:[(0,O.jsx)("iframe",{src:y}),(0,O.jsx)("button",{className:"btn-close-modal",onClick:o,children:(0,O.jsx)(u.q,{name:"common/close"})})]})}}(0,E.Z)(R,"defaultProps",{type:"signin"})},75507:(L,D,n)=>{"use strict";n.d(D,{FS:()=>y,NQ:()=>a,qK:()=>o});var E=n(53375),p=n.n(E),v=n(92728),u=n(85322),i=n(80461),O=n(68543),R=n(76626),s=n(37273);const f=()=>MB.getSelectionItems().length===0,o={keys:{tab:()=>{if(document.activeElement===document.body)return!1},enter:()=>{MB.action("entry:enter:key"),(0,i.k)("enter")},f2:()=>{MB.action("entry:enter:key"),(0,i.k)("f2")},"command+shift+h":()=>{MB.action("entry:toggle:visible"),(0,i.k)("command+shift+h")},"ctrl+shift+h":()=>{MB.action("entry:toggle:visible"),(0,i.k)("ctrl+shift+h")},left:()=>{MB.action("entry:arrow:key",{direction:"x",rate:-1}),(0,i.k)("left")},"alt+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-1}),(0,i.k)("alt+left")},right:()=>{MB.action("entry:arrow:key",{direction:"x",rate:1}),(0,i.k)("right")},"alt+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:1}),(0,i.k)("alt+right")},up:()=>{MB.action("entry:arrow:key",{direction:"y",rate:-1}),(0,i.k)("up")},"alt+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-1}),(0,i.k)("alt+up")},down:()=>{MB.action("entry:arrow:key",{direction:"y",rate:1}),(0,i.k)("down")},"alt+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:1}),(0,i.k)("alt+down")},"shift+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-10}),(0,i.k)("shift+left")},"alt+shift+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-10}),(0,i.k)("alt+shift+left")},"shift+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:10}),(0,i.k)("shift+right")},"alt+shift+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:10}),(0,i.k)("alt+shift+right")},"shift+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-10}),(0,i.k)("shift+up")},"alt+shift+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-10}),(0,i.k)("alt+shift+up")},"shift+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:10}),(0,i.k)("shift+down")},"alt+shift+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:10}),(0,i.k)("alt+shift+down")},"command+c":()=>{f()||(MB.action("entry:copy:items"),MB.action("entry:copy:items:properties"),(0,v.BK)(),(0,i.k)("command+c"))},"ctrl+c":()=>{f()||(MB.action("entry:copy:items"),MB.action("entry:copy:items:properties"),(0,v.BK)(),(0,i.k)("ctrl+c"))},"command+d":()=>{f()||(MB.action("entry:duplicate:items",{shift:!1}),(0,i.k)("command+d"))},"ctrl+d":()=>{f()||(MB.action("entry:duplicate:items",{shift:!1}),(0,i.k)("ctrl+d"))},"command+shift+d":()=>{f()||(MB.action("entry:duplicate:items",{shift:!0}),(0,i.k)("command+shift+d"))},"ctrl+shift+d":()=>{f()||(MB.action("entry:duplicate:items",{shift:!0}),(0,i.k)("ctrl+shift+d"))},"command+shift+v":()=>{MB.action("entry:paste:items:at",{clientPos:{clientX:MB.clientX,clientY:MB.clientY}}),(0,i.k)("command+shift+v")},"ctrl+shift+v":()=>{MB.action("entry:paste:items:at",{clientPos:{clientX:MB.clientX,clientY:MB.clientY}}),(0,i.k)("ctrl+shift+v")},"command+x":()=>{f()||(MB.action("entry:cut:items"),(0,v.BK)(),(0,i.k)("command+x"))},"ctrl+x":()=>{f()||(MB.action("entry:cut:items"),(0,v.BK)(),(0,i.k)("ctrl+x"))},backspace:()=>{MB.action("entry:delete:selected-items"),MB.action("enter:comment:shortcut:del"),(0,i.k)("backspace")},del:()=>{MB.action("entry:delete:selected-items"),MB.action("enter:comment:shortcut:del"),(0,i.k)("delete")},"command+shift+l":()=>{MB.action("entry:toggle:lock"),(0,i.k)("command+shift+l")},"ctrl+shift+l":()=>{MB.action("entry:toggle:lock"),(0,i.k)("ctrl+shift+l")},"command+g":()=>{MB.action("entry:group:items"),(0,i.k)("command+g")},"ctrl+g":()=>{MB.action("entry:group:items"),(0,i.k)("ctrl+g")},"command+shift+g":()=>{MB.action("entry:ungroup:items"),(0,i.k)("command+shift+g")},"ctrl+shift+g":()=>{MB.action("entry:ungroup:items"),(0,i.k)("ctrl+shift+g")},"command+alt+l":()=>{MB.action("entry:align:items",{direction:"left"}),(0,i.k)("command+alt+l")},"ctrl+alt+l":()=>{MB.action("entry:align:items",{direction:"left"}),(0,i.k)("ctrl+alt+l")},"command+alt+c":()=>{MB.action("entry:align:items",{direction:"center"}),(0,i.k)("command+alt+c")},"ctrl+alt+c":()=>{MB.action("entry:align:items",{direction:"center"}),(0,i.k)("ctrl+alt+c")},"command+alt+r":()=>{MB.action("entry:align:items",{direction:"right"}),(0,i.k)("command+alt+r")},"ctrl+alt+r":()=>{MB.action("entry:align:items",{direction:"right"}),(0,i.k)("ctrl+alt+r")},"command+alt+t":()=>{MB.action("entry:align:items",{direction:"top"}),(0,i.k)("command+alt+t")},"ctrl+alt+t":()=>{MB.action("entry:align:items",{direction:"top"}),(0,i.k)("ctrl+alt+t")},"command+alt+m":()=>{MB.action("entry:align:items",{direction:"middle"}),(0,i.k)("command+alt+m")},"ctrl+alt+m":()=>{MB.action("entry:align:items",{direction:"middle"}),(0,i.k)("ctrl+alt+m")},"command+alt+b":()=>{MB.action("entry:align:items",{direction:"bottom"}),(0,i.k)("command+alt+b")},"ctrl+alt+b":()=>{MB.action("entry:align:items",{direction:"bottom"}),(0,i.k)("ctrl+alt+b")},"command+alt+h":()=>{MB.action("entry:distribute:items",{direction:"horizontal"}),(0,i.k)("command+alt+h")},"ctrl+alt+h":()=>{MB.action("entry:distribute:items",{direction:"horizontal"}),(0,i.k)("ctrl+alt+h")},"command+alt+u":()=>{MB.action("entry:distribute:items",{direction:"vertical"}),(0,i.k)("command+alt+u")},"ctrl+alt+u":()=>{MB.action("entry:distribute:items",{direction:"vertical"}),(0,i.k)("ctrl+alt+u")},"command+alt+up":()=>{MB.action("entry:items:forward"),(0,i.k)("command+alt+up")},"ctrl+alt+up":()=>{MB.action("entry:items:forward"),(0,i.k)("ctrl+alt+up")},"command+alt+down":()=>{MB.action("entry:items:backward"),(0,i.k)("command+alt+down")},"ctrl+alt+down":()=>{MB.action("entry:items:backward"),(0,i.k)("ctrl+alt+down")},"command+shift+up":()=>{MB.action("entry:items:send:front"),(0,i.k)("command+shift+up")},"ctrl+shift+up":()=>{MB.action("entry:items:send:front"),(0,i.k)("ctrl+shift+up")},"command+shift+down":()=>{MB.action("entry:items:send:back"),(0,i.k)("command+shift+down")},"ctrl+shift+down":()=>{MB.action("entry:items:send:back"),(0,i.k)("ctrl+shift+down")},"command+;":()=>{MB.action("entry:expand:all:screen"),(0,i.k)("command+;")},"ctrl+;":()=>{MB.action("entry:expand:all:screen"),(0,i.k)("ctrl+;")},"command+'":()=>{MB.action("entry:unexpand:all:screen"),(0,i.k)("command+''")},"ctrl+'":()=>{MB.action("entry:unexpand:all:screen"),(0,i.k)("ctrl+'")},"`":()=>{(0,i.k)("`")},"\xB7":()=>{(0,i.k)("`")},"[, ]":()=>{p()().isBefore("2021-11-12 23:59:59")&&MB.notice({text:I18N.Common.brackets_key_update_tips.replace("%key%",'<span class="key">'+((0,O.ED)()?"Ctrl":"\u2318")+"</span>")}),(0,i.k)("[, ]")},"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")},"command+s":()=>{MB.global.experienceLoginModalHelper("isSave")||MB.action("entry:start:saving"),(0,i.k)("command+s")},"ctrl+s":()=>{MB.global.experienceLoginModalHelper("isSave")||MB.action("entry:start:saving"),(0,i.k)("ctrl+s")},1:()=>{MB.action("entry:number:key",{key:1}),(0,i.k)("1")},2:()=>{MB.action("entry:number:key",{key:2}),(0,i.k)("2")},3:()=>{MB.action("entry:number:key",{key:3}),(0,i.k)("3")},4:()=>{MB.action("entry:number:key",{key:"4"}),(0,i.k)("4")},5:()=>{MB.action("entry:number:key",{key:5}),(0,i.k)("5")},6:()=>{MB.action("entry:number:key",{key:6}),(0,i.k)("6")},7:()=>{MB.action("entry:number:key",{key:7}),(0,i.k)("7")},8:()=>{(0,s.oT)()&&(MB.action("entry:number:key",{key:8}),(0,i.k)("8"))},"command+a":()=>{MB.action("entry:select:all"),(0,i.k)("command+a")},"ctrl+a":()=>{MB.action("entry:select:all"),(0,i.k)("ctrl+a")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+z":()=>{MB.action("entry:undo-stack:undo"),(0,i.k)("command+z")},"ctrl+z":()=>{MB.action("entry:undo-stack:undo"),(0,i.k)("ctrl+z")},"command+shift+z":()=>{MB.action("entry:undo-stack:redo"),(0,i.k)("command+shift+z")},"ctrl+shift+z":()=>{MB.action("entry:undo-stack:redo"),(0,i.k)("ctrl+shift+z")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+alt+a":()=>{MB.action("entry:isShowSticky:toggle"),(0,i.k)("command+alt+a")},"ctrl+alt+a":()=>{MB.action("entry:isShowSticky:toggle"),(0,i.k)("ctrl+alt+a")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},"command+alt+v":()=>{f()||(MB.action("entry:paste:items:properties"),(0,i.k)("command+alt+v"))},"ctrl+alt+v":()=>{f()||(MB.action("entry:paste:items:properties"),(0,i.k)("ctrl+alt+v"))},"command+b":()=>{MB.action("entry:set:text:attr:by:key",{attr:"boldType"}),(0,i.k)("command+b \u9009\u4E2D\u6574\u4F53")},"ctrl+b":()=>{MB.action("entry:set:text:attr:by:key",{attr:"boldType"}),(0,i.k)("command+b \u9009\u4E2D\u6574\u4F53")},"command+i":()=>{MB.action("entry:set:text:attr:by:key",{attr:"italic"}),(0,i.k)("command+i \u9009\u4E2D\u6574\u4F53")},"ctrl+i":()=>{MB.action("entry:set:text:attr:by:key",{attr:"italic"}),(0,i.k)("command+i \u9009\u4E2D\u6574\u4F53")},"command+u":()=>{MB.action("entry:set:text:attr:by:key",{attr:"underline"}),(0,i.k)("command+u \u9009\u4E2D\u6574\u4F53")},"ctrl+u":()=>{MB.action("entry:set:text:attr:by:key",{attr:"underline"}),(0,i.k)("command+u \u9009\u4E2D\u6574\u4F53")},"command+shift+s":()=>{MB.action("entry:set:text:attr:by:key",{attr:"lineThrough"}),(0,i.k)("command+shift+s \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+s":()=>{MB.action("entry:set:text:attr:by:key",{attr:"lineThrough"}),(0,i.k)("command+shift+s \u9009\u4E2D\u6574\u4F53")},"command+shift+.":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"increase"}),(0,i.k)("command+shift+. \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+.":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"increase"}),(0,i.k)("command+shift+. \u9009\u4E2D\u6574\u4F53")},"command+shift+,":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"decrease"}),(0,i.k)("command+shift+, \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+,":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"decrease"}),(0,i.k)("command+shift+, \u9009\u4E2D\u6574\u4F53")},"shift+/":()=>{MB.action("entry:shortcut:undoable:items:set:attr:border")},i:()=>{(0,R.Yp)(S=>{let{sRGBHex:U}=S;return MB.action("entry:i:key",{color:U})}),(0,i.k)("i")},"alt+1":()=>{MB.action("entry:directory:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:directory:nav:key",{key:2}),(0,i.k)("alt+2")},c:()=>{MB.action("entry:comment:toggle"),MB.action("entry:ST:STMode:disable"),MB.action("elbow:update",{isInElbowMode:!1}),(0,i.k)("c")},e:()=>{MB.action("entry:elbow:isInElbowMode:toggle"),MB.action("entry:ST:STMode:disable"),MB.action("set:quick-create-widget",{widget:null})}},priority:u.e7.Normal,isGlobal:!1},a={keys:{"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},c:()=>{MB.action("entry:comment:toggle",{onlyView:!0}),(0,i.k)("c")},"alt+1":()=>{MB.action("entry:directory:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:directory:nav:key",{key:2}),(0,i.k)("alt+2")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")}},priority:u.e7.Normal,isGlobal:!1},y={keys:{esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")}},priority:u.e7.Normal,isGlobal:!1},m={keys:{"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},"alt+1":()=>{MB.action("entry:directory:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:directory:nav:key",{key:2}),(0,i.k)("alt+2")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")}},priority:u.e7.Normal,isGlobal:!1}},89719:(L,D,n)=>{"use strict";n.d(D,{Ei:()=>o,NZ:()=>S,X4:()=>s,ec:()=>y,ew:()=>d,hm:()=>f,j_:()=>m,o6:()=>A});var E=n(46198),p=n(63077),v=n(35517),u=n(73752),i=n(29184),O=n(35269);const R=async h=>{let{projectCid:P}=h;return fetchGetJSON("/api/upper/web_v1/sharing/initial?cid="+P)},s=async h=>{let{projectCid:P,sharing:x}=h;return(await(0,u.Gf)("/api/flat/web_v1/project_share/"+P,{...x})).project_share},f=async h=>{let{projectCid:P,sharingCid:x}=h;try{return await(0,u.Bh)("/api/flat/web_v1/project_share/"+x+"?project_cid="+P)}catch(ne){await(0,v.Vz)(ne)}},o=async h=>{let{sharing:P}=h;try{return await(0,u.IP)("/api/flat/web_v1/project_share/"+P.cid,{project_share:P})}catch(x){await(0,v.Vz)(x)}},a=()=>{const h=document.getElementById("workspace");E.render((0,O.jsx)(p.Z,{locale:(0,i.F)(),errorType:404,customDes:I18N.ToolBar.ReEnter,isShowPrimaryBtn:!1}),h)},y=async h=>{try{if(!h.accessToken||h.project.access_token===h.accessToken)return m(h.project);{const{project:P,accessToken:x}=h,{project_share:ne}=await(0,u.EE)("/api/flat/web_v1/project_share/"+P.cid+"?access_token="+x);return{sharing:{...ne,type:"advanced",view_mode:ne.device_model}}}}catch(P){await a()}},m=h=>{const{cid:P,access_token:x,access:ne,building:ve,comment_permission:ge,password:me,visibility:W,wechat:Q}=h,Ae=new URLSearchParams(location.search),we=Ae.get("screen"),Z=Ae.get("canvasId"),ee=Ae.get("view_mode")||"read_only",be=!!Ae.get("selection"),Ze=be?Ae.get("selection").split(","):[];return{sharing:{type:"default",project_cid:P,access_token:x,view_access:ne,view_sticky:ve,comment_permission:ge,password:me,visibility:W,wechat:Q,view_mode:ee,screen_visible_switch:be,screen_visible_list:Ze,page_begin:we,canvas_begin:Z}}},S=async h=>{let{projectCid:P}=h;try{const{project_shares:x}=await(0,u.EE)("/api/flat/web_v1/project_share/"+P+"/all");return x.sort((ne,ve)=>new Date(ve.created_at).getTime()-new Date(ne.created_at).getTime())}catch(x){await(0,v.Vz)(x)}},U=async h=>{try{const{result:P}=await fetchGetJSON("/api/accesses/v4/project/"+h+"/permission_check?permission=P:update");return P}catch(P){await apiErrorModals(P)}},M=async h=>{let P=null;try{P=await fetchGetJSON("/flpak/w-p2meta/"+h)}catch(x){await apiErrorModals(x)}return P},j={access_token:"",comment_permission:"",device_model:"",highlight:!0,password:"",project_cid:"",screen_visible_switch:!1,screen_visible_list:[],shell_type:"device",simulator_type:"device",sticky:!0,view_access:"private",view_count:0,view_prd:!1,wechat:!1},_=()=>({sharing:j}),d=async h=>{let P,x;try{P=await(0,u.EE)("/api/upper/web_v1/basics/"+h+"/get_details"),P&&JSON.stringify(P)!=="{}"&&(x=!0)}catch(ne){P=ne,x=!1}return{result:P,statusOk:x}},A=async h=>{let P,x;try{P=await(0,u.EE)("/api/accesses/v4/project/"+h+"/permission_check?permission=P:update"),P&&JSON.stringify(P)!=="{}"&&(x=!0)}catch(ne){P=ne,x=!1}return{result:P,statusOk:x}}},68035:(L,D,n)=>{"use strict";n.d(D,{K:()=>R,L:()=>s});var E=n(63077),p=n(86478),v=n(7485),u=n(18166),i=n(29184),O=n(35269);const R=f=>{if((0,u.EG)(f))return s()},s=()=>(setTimeout(()=>{var f;return(f=MB)==null||(f=f.messageBucket)==null?void 0:f.send("mobileLoadProjectError",{errMsg:"\u753B\u5E03\u65E0\u9875\u9762\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),(0,O.jsx)(E.Z,{errorType:404,locale:(0,i.F)(),customTitle:I18N.dModule.project_screen_err_title,customDes:I18N.ToolBar.ReEnter,isShowSecondaryBtn:!1,primaryClick:()=>(0,p.HM)("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}))},10737:(L,D,n)=>{"use strict";n.d(D,{Z:()=>R});var E=n(37780),p=n(77646),v=n(53404),u=n(9038);const i=s=>s.container.previewSetting.isShowSplash,O=(0,p.P1)([v.CL,v.vo,v.gz,i,v.GP,v.yT,v.Uq,v.EB],(s,f,o,a,y,m,S,U)=>{let{activePageKey:M,activeCanvasKey:j}=S;return{screen:s,project:f,isImmersive:o,isShowSplash:a,previewOptions:y,isPanelPreviewMode:m,activePageKey:M,activeCanvasKey:j,isPreviewCombo:U}}),R=(0,E.$j)(s=>O(s))(u.Z)},91166:(L,D,n)=>{"use strict";n.d(D,{Z:()=>u});var E=n(37780),p=n(53404),v=n(23329);const u=(0,E.$j)(i=>{const O=(0,p.kc)(i),R=(0,p.GP)(i),s=(0,p.Ds)(i),f=(0,p.ts)(i),o=(0,p.Nu)(i),a=(0,p.yT)(i);return{user:f,mode:s,theme:o,previewOptions:R,previewSetting:O,isHiddenToolBar:(0,p.qe)(i),isPanelPreviewMode:a}})(v.Z)},16589:(L,D,n)=>{"use strict";n.d(D,{Z:()=>u});var E=n(37780),p=n(53404),v=n(81054);const u=(0,E.$j)(i=>{const O=(0,p.kc)(i),R=(0,p.GP)(i),s=(0,p.S7)(i),f=(0,p.EB)(i);return{previewOptions:R,previewSetting:O,isCommunityComboPreview:s,isPreviewCombo:f}})(v.Z)},86478:(L,D,n)=>{"use strict";n.d(D,{HM:()=>y});var E=n(63077),p=n(45090),v=n(7485),u=n(46198),i=n(8090),O=n(12317),R=n(35269);const s=document.getElementById("workspace"),f=(0,p.ZP)(E.Z).withConfig({displayName:"utils__CustomizedCrashedPageStyle",componentId:"sc-1g7yepo-0"})([".btn-list{display:flex;flex-direction:row-reverse;justify-content:center;.primary{margin-left:20px;}.regular{margin-left:0 !important;}}"]),o=(m,S,U)=>{ReactDOM.render(_jsx(_Fragment,{children:_jsx(f,{locale:getMBLocale(),errorType:m.status||401,customTitle:S,customDes:U})}),s)},a=async m=>{var S;let U,M,j,_,d;try{({user:d}=await fetchGetJSON("/api/web/v3/initial"))}catch(A){console.warn("[crashedPageWithUser]",A);const h=ENV.IS_WONDER_SHARE?LoginModalWS:LoginModal;U=()=>{ReactDOM.render(_jsx(h,{isOpen:!0,type:"signin",source:"proto-org-preview",onConfirm:()=>location.reload()},Math.random()),document.getElementById("IBOT_MODAL_ROOT"))},M=I18N.Common.signin,_=()=>{ReactDOM.render(_jsx(h,{isOpen:!0,type:"signup",source:"proto-org-preview",onConfirm:()=>location.reload()},Math.random()),document.getElementById("IBOT_MODAL_ROOT"))},j=I18N.Common.signup,d={}}ReactDOM.render(_jsx(_Fragment,{children:_jsx(f,{locale:getMBLocale(),errorType:m.status||401,identity:1,account:(S=d)==null?void 0:S.email,primaryBtnText:M,primaryBtnClick:U,secondaryBtnText:j,secondaryBtnClick:_})}),s)},y=(m,S)=>{let U="";m==="zh-CN"?U="/":m==="jp"?U="https://mockitt.wondershare.jp":U="https://mockitt.wondershare.com",location.replace(U)}},73542:(L,D,n)=>{"use strict";n.d(D,{Fh:()=>y,JT:()=>i,T_:()=>s,Xr:()=>R,Yi:()=>f,uP:()=>O});var E=n(59387),p=n(94223),v=n(77321);const u=/^image\/(png|jpg|jpeg|gif|svg|svg\+xml)$/i,i=2,O=5,R=(m,S,U,M,j)=>{if(!u.test(m.type))throw Object.assign(new Error(I18N.dUtils.damaged_file),{desc:I18N.dUtils.support_file_type,asset:m});const _=(0,E.tD)(U,M),{trial:d,plan:A,maxPicBytes:h}=_,P=h/1024/1024,x=(0,E.pq)(A,d),ne=!!MB.currentOrg,{current_plan:ve}=MB.user,ge=ne?P:ve==="free"?i:O;if(m.size>ge*1024*1024)throw S==="library"?(ModalHelper&&ModalHelper.libraryNotice&&ModalHelper.libraryNotice("\u4E0A\u4F20\u56FE\u7247\u5BB9\u91CF\u8FC7\u5927","error"),new Error("dashboard upload failed")):M?(x&&(x===I18N.Common.business_plan||x===I18N.Common.business_trial_plan)?MB.action("modal:update:state",{orgFullBeyondNotice:{isOpen:!0,beyondType:"picSize"}}):MB.action("modal:update:state",{rightsAndInterestsModal:{isOpen:!0,type:v.U2.OrgMaxPicSize}}),new Error("NoErrorTips")):(MB.action("modal:update:state",{rightsAndInterestsModal:{isOpen:!0,type:v.U2.SoloMaxPicSize}}),new Error("NoErrorTips"))},s=async m=>{const S=await new Promise((M,j)=>{const _=new FileReader;_.onerror=()=>j(new Error(I18N.dUtils.unsupported)),_.onload=d=>M(d.target.result),_.readAsDataURL(m)}),U=await new Promise((M,j)=>{const _=new Image;_.onerror=()=>j(new Error(I18N.dUtils.unsupported)),_.onload=()=>M(_),_.src=S});return{data:S,width:U.width,height:U.height}},f=m=>{m.payload&&m.payload.status===401?MB.global.popupHelper.alertAsync({title:I18N.dUtils.err_info_modal.INVALID_COOKIE.title,desc:I18N.dUtils.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dUtils.confirm}).then(()=>{(0,p.ll)(location.origin+"/signin")}):MB.global.popupHelper.alertAsync({title:m.message,desc:m.desc,isHTML:m.isHTML,confirmText:m.confirmText}).then(()=>{m.type==="free"&&MB.global.popupHelper.chargeAsync({mode:"solo",productId:8988,hours:"yearly",payEntrance:"\u56FE\u7247\u9650\u5236-\u5347\u7EA7\u4E2A\u4EBA"})})},o=(m,S)=>m.endsWith(S)?m:m+("-"+S),a=(m,S)=>m.startsWith("#")?"#"+o(m.slice(1),S):null,y=(m,S)=>{if(m.attributes){const U=m.getAttribute("id");U&&U.length>0&&m.setAttribute("id",o(U,S));const M=m.getAttribute("class");if(M&&M.length>0){const _=M.split(/\s+/).map(d=>o(d,S)).join(" ");m.setAttribute("class",_)}for(const _ of["href","xlink:href"]){const d=m.getAttribute(_);if(d&&d.length>0){const A=a(d,S);A&&m.setAttribute(_,A)}}const j=["clip-path","color-profile","fill","filter","marker-start","marker-mid","marker-end","mask","stroke","style"];for(const _ of j){const d=m.getAttribute(_);if(d&&d.length>0){const A=d.replace(/url\((.*?)\)/gi,(h,P)=>{const x=a(P,S);return x==null?h:"url("+x+")"});A&&m.setAttribute(_,A)}}for(const _ of["begin","end"]){const d=m.getAttribute(_);if(d&&d.length>0){const A=d.split(/\s*;\s+/).map(h=>{if(h.endsWith(".end")||h.endsWith(".start")){const[P,x]=h.split(".");return o(P,S)+"."+x}return h});m.setAttribute(_,A.join("; "))}}if(m.childNodes)for(const _ of m.childNodes)y(_,S)}}},80824:(L,D,n)=>{"use strict";n.d(D,{r:()=>u});var E=n(53375),p=n.n(E);const v=i=>{if(!i)return"\u514D\u8D39\u7248";const{edition:O,current_plan:R,trial:s}=i;if(O==="premium_lifetime")return"\u5C0A\u4EAB\u7EC8\u8EAB\u7248";if(O==="standard_lifetime")return"\u7EC8\u8EAB\u7248";if(R==="free")return"\u514D\u8D39\u7248";if(R==="solo")return s?"\u8BD5\u7528\u7248":"\u6807\u51C6\u7248"},u=i=>{if(!i)return"free";const{plan:O,paid:R,trial:s,next_billing_on:f}=i,o=p()(f).startOf("day"),a=p()().startOf("day"),y=o.isSameOrBefore(a);let m;return y?m="free":(R&&(m="paid"),O==="solo"&&s&&(m="trial"),O==="free"&&(m="free")),m}},9569:(L,D,n)=>{"use strict";n.d(D,{C:()=>v,S:()=>u});var E=n(1372);const p=i=>("0"+parseInt(i).toString(16)).slice(-2),v=i=>!i||i==="rgba(0, 0, 0, 0)"||i==="transparent"?"transparent":(i=i.match(/^rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/),"#"+p(i[1])+p(i[2])+p(i[3])),u=i=>(0,E.LW)((0,E.LS)(i))},98388:(L,D,n)=>{"use strict";n.d(D,{PX:()=>U,z:()=>m});var E=n(53375),p=n.n(E),v=n(43827),u=n.n(v),i=n(57480),O=n.n(i),R=n(29184);function s(M){return M<10?"0"+M:M}function f(M,j,_){const d=new Date(M),A=d.getFullYear(),h=s(d.getMonth()+1),P=s(d.getDate()),x=s(d.getHours()),ne=s(d.getMinutes());return j==="time"?x+":"+ne:j==="datetime"?""+h+_+P+" "+x+":"+ne:""+A+_+h+_+P+" "+x+":"+ne}const o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"];function a(M,j){const _=new Date(M),d=_.getFullYear(),A=o[_.getMonth()],h=s(_.getDate()),P=s(_.getHours()),x=s(_.getMinutes());return j==="time"?P+":"+x:j==="datetime"?A+" "+h+" "+P+":"+x:A+" "+h+", "+d+" "+P+":"+x}function y(M,j,_){if(j===void 0&&(j="datetime"),_===void 0&&(_="."),!M)return"";let d=M;typeof M!="number"&&(d=parseInt(M,10)),d.length===10&&(d=d*1e3);let A="";const h=(0,R.F)();return h==="zh-CN"?A=f(d,j,_):(h==="en-US"||h==="en")&&(A=a(d,j,_)),A}function m(M){const _=S()-M;let d="";if(_<=3e3)d=I18N.Common.just_now||"\u521A\u521A";else if(_>3e3&&_<6e4)d=Math.floor(_/1e3)+I18N.Common.num_seconds_ago||"\u79D2\u524D";else if(_>=6e4&&_<36e5)d=Math.floor(_/6e4)+I18N.Common.num_minutes_ago||"\u5206\u949F\u524D";else{d=y(M,"full");const A=new Date(new Date().setHours(0,0,0,0)).getTime(),h=new Date(new Date().getFullYear(),0,1).getTime();M>h&&(d=y(M,"datetime")),M>A&&(d=y(M,"time"))}return d}function S(){return new Date().getTime()}const U=M=>{p().locale(M==="zh-CN"?"zh-cn":M),p().extend(u()),p().extend(O())}},32541:(L,D,n)=>{"use strict";n.d(D,{K:()=>v,N:()=>p});var E=n(41768);const p=u=>{switch(u){case"iphone":case"ipad":case"apple_watch":return"ios";case"android":return"android";default:return"others"}},v=(u,i)=>{let{width:O,orientation:R}=i;const s=R==="landscape";let f="customize";return!s&&u.width===O||s&&u.height===O?f=u.device:Object.entries(E.YE).forEach(o=>{let[a]=o;(!s&&a.width===O||s&&a.height===O)&&(f=a.device)}),!u.template&&!u.combo&&["android","ipad","iphone"].includes(u.device)&&["android","ipad","iphone"].includes(f)}},94586:(L,D,n)=>{"use strict";n.d(D,{F:()=>v});var E=n(68543),p=n(32541);const v=u=>{const i=(0,p.N)(u);return((0,E.V5)()?"mac":(0,E.ED)()?"windows":"other-os")+" "+i+" "+u}},68543:(L,D,n)=>{"use strict";n.d(D,{B0:()=>y,CL:()=>i,Dt:()=>f,ED:()=>v,IF:()=>m,Md:()=>S,Rv:()=>u,V5:()=>p,_j:()=>U,d:()=>E,i7:()=>O,li:()=>M,tq:()=>s,vU:()=>R});const E=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),p=()=>/(Macintosh)/i.test(navigator.userAgent),v=()=>/(Windows)/i.test(navigator.userAgent),u=()=>/(Lark)/i.test(navigator.userAgent),i=()=>/MicroMessenger/i.test(navigator.userAgent),O=()=>/Chrome/i.test(navigator.userAgent),R=()=>/Firefox/i.test(navigator.userAgent),s=()=>/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent),f=()=>/Android/i.test(navigator.userAgent),o=()=>/(iPad)/.test(navigator.userAgent),a=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),y=()=>!!(window.webkit&&window.webkit.messageHandlers),m=()=>navigator.standalone,S=()=>/\/uichina$/.test(location.pathname),U=()=>/\/forum$/.test(location.pathname),M=()=>/(MobileClient)/.test(navigator.userAgent)},60962:(L,D,n)=>{"use strict";n.d(D,{BC:()=>O,fK:()=>R});var E=n(51904),p=n(59387),v=n(80824),u=n(77321);const i={paid:"paid",trial:"trial",free:"free",paidExpire:"expired",trialExpire:"expired",defaultExpire:"expired"};(0,E.Wb)();const O=s=>{let{currentUser:f,selectedOrg:o,limitType:a,planName:y}=s;const m=o?(0,p.NF)(o):(0,v.r)(f),S=i[m],M={limitReason:(0,u.hd)({limitType:a,user:f,org:o}),currentPlanProduct:y,currentPlanCategory:o?"org":"solo",currentType:S,currentEditMember:(o==null?void 0:o.totalSeats)||"",currentViewMember:(o==null?void 0:o.totalViewerSeats)||""};return E.xd.limitPopupNew(M)},R=s=>{let{objectClick:f,limitType:o,currentUser:a,selectedOrg:y,planName:m}=s;const S=y?(0,p.NF)(y):(0,v.r)(a),U=i[S],M=(0,u.hd)({limitType:o,user:a,org:y}),j={objectClick:f,limitReason:M,currentPlanProduct:m,currentPlanCategory:y?"org":"solo",currentType:U,currentEditMember:(y==null?void 0:y.totalSeats)||"",currentViewMember:(y==null?void 0:y.totalViewerSeats)||""};return E.xd.limitPopupClick(j)}},61033:(L,D,n)=>{"use strict";n.d(D,{Mn:()=>s,U1:()=>v,tv:()=>u,wb:()=>p});var E=n(25101);const p=ENV.NO_TRACK?()=>{}:E.wb,v=ENV.NO_TRACK?()=>{}:function(){(0,E.U1)(...arguments)},u=ENV.NO_TRACK?()=>{}:E.pj,i=ENV.IS_WONDER_SHARE?f=>{if(!window.gtag)return console.error("gtag is not a function");window.gtag("config","UA-4839360-64",{user_id:f,transport_type:"beacon"})}:()=>{},O={"https://mockitt.wondershare.com/proto":"B3-V8\u539F\u578B\u5185\u5206\u4EAB"},R=()=>{const f=Object.keys(O).sort((o,a)=>a.length-o.length);return O[f.find(o=>window.location.href.indexOf(o)!==-1)]},s=async f=>{try{await fetch("https://mockitt.wondershare.com/invite_track?entry="+R()+"&entry_term="+f)}catch(o){console.error(o)}}},94223:(L,D,n)=>{"use strict";n.d(D,{_5:()=>u,gn:()=>R,ll:()=>O});var E=n(74223);const p="jsid",v=()=>{try{const f=new URLSearchParams(location.search).get(p);f?window.localStorage.setItem(p,f):window.localStorage.removeItem(p)}catch(s){window.localStorage.removeItem(p)}},u=function(s){s===void 0&&(s=!1);try{if(ENV.IS_ON_PREMISES||ENV.IS_WONDER_SHARE)return"";const f=window.localStorage.getItem(p);return f?s?"&jsid="+f:"?jsid="+f:""}catch(f){return""}};function i(s){const f=/^[^?#]+\?([^#]+)/.test(s),o=u(f),a=o&&(s==null?void 0:s.includes(o==null?void 0:o.slice(1)));return""+s+(a?"":o)}const O=s=>{const f=i(s);location.href=f},R=(s,f,o)=>{const a=i(s);(0,E.MI)(a,f,o)}},97881:(L,D,n)=>{"use strict";n.d(D,{Gk:()=>s,H8:()=>i,MR:()=>u});var E=n(77145),p=n(11685),v=n(34896);const u=f=>{let{node:o,basketKey:a,scale:y}=f;const{transform:m,rect:S}=o.worldBoundingBox,{x:U,y:M}=m.clone().scale(y/100,y/100).apply({x:S.x,y:S.y}),j=sdkStore.getHotItem(a),{x:_,y:d}=E.S.mul(E.S.xy(j.hotAttr.w,j.hotAttr.h),y/100),{x:A,y:h}=E.S.mul(E.S.xy(o.widget.xTL,o.widget.yTL),y/100),P=Math.round(M-h),x=Math.round(U-A),ne=Math.round(_),ve=Math.round(d);return{top:P,left:x,width:ne,height:ve,right:x+ne,bottom:P+ve}},i=f=>{let{editingBasketKey:o,editingBasketRefPage:a}=f;if(o){var y;const m=(y=sdkStore.getHotItem(o))==null?void 0:y.hotAttr;return(m==null?void 0:m.basket)==="bMuban"?(m==null?void 0:m.refRBPageKey)||a:(0,v.pf)(o)?(0,v.Hr)(o).pop():o}return a},O=50,R=50,s=f=>{const{hotAttr:{layout:o,w:a,h:y,type:m,refRBPageKey:S}}=sdkStore.getHotItem(f),U=m===p.l.WBasket?S:f,M=sdkStore.getSubHotItemList(U).filter(A=>A.hotAttr.type===p.l.Canvas).sort((A,h)=>A.hotAttr.order-h.hotAttr.order),j={};let _=0,d=0;return M.forEach((A,h)=>{const{x:P,y:x,w:ne,h:ve}=sdkStore.getHotItem(A.key).hotAttr,ge=ne*.5,me=ve*.5;if(o==="row"){j[A.key]={offsetX:0,offsetY:h===0?0:d+Math.max(me-x,0)};const W=h===0?0:Math.min(x-me,0),Q=Math.max(x+me,y);d=d+(Q-W)+R}else{j[A.key]={offsetX:h===0?0:_+Math.max(ge-P,0),offsetY:0};const W=h===0?0:Math.min(P-ge,0),Q=Math.max(P+ge,a);_=_+(Q-W)+O}}),j}},2470:(L,D,n)=>{"use strict";var E=n(46198),p=n(44475),v=n(7485),u=n(39110),i=n(21202);const O={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};n(34268),n(87645),n(3012);var R=n(16589),s=n(10737),f=n(91166),o=n(68543);const a=e=>{const{isEmbedV1:t=!1}=e||{};return{isDesktop:!((0,o.tq)()||t),isInApp:!1,isMultiLink:!1,isMobile:(0,o.tq)(),isIOSClient:(0,o.B0)(),isStandAlone:(0,o.IF)(),isEmbedV1:t,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,o.Md)(),isForum:(0,o._j)(),isElectron:(0,o.d)(),isSquare:!1,isFeishu:(0,o.Rv)(),isWechat:(0,o.CL)(),...e}},y=e=>{const{isMobile:t,isEmbedV2:c,isSquare:r}=e;return t?s.Z:c||r?R.Z:f.Z};var m=n(22537),S=n(86478),U=n(75985),M=n(9733),j=n(27444);const _=e=>new URLSearchParams(e).toString(),d=e=>{const t={};for(const[c,r]of new URLSearchParams(e).entries())t[c]=r;return t},A={},h={USER_COMBO:"user-combo",ORG_COMBO:"org-combo",PROJECT_MAIN:"project-main",PROJECT_TRASHCAN:"project-trashcan",PROJECT_TEMPLATE:"project-template",PANEL_TEMPLATE:"panel-template"},P={P:"v3"},x={PROTOTYPE:"prototype",DESIGN_DRAFT:"design-draft",MIND_MAP:"mind-map",FLOW_CHART:"flow-chart",ABOARD:"aboard"},ne="proto2",ve=e=>e===ne?x.PROTOTYPE:e;var ge=n(68633);const me=_(P),W=e=>({cid:e.cid,mtime:e.mtime,name:e.name,type:e.type,ttag:e.ttag||me,upper_cid:e.upper_cid,upper_type:e.upper_type}),Q=(e,t)=>{t(e.cid,CID_PROJECT_META),t(e.upper_cid,CID_REF_EXTERNAL_UPPER)},Ae=(e,t)=>(e=W(e),e.cid=t(e.cid,CID_PROJECT_META),e.upper_cid=t(e.upper_cid,CID_REF_EXTERNAL_UPPER),e),we=_(A),Z=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||we,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,project_meta_cid:e.project_meta_cid}),ee=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&t(e.panel_screen_meta_cid,CID_REF_SCREEN_META),t(e.project_meta_cid,CID_REF_PROJECT_META)},be=(e,t)=>(e=Z(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&(e.panel_screen_meta_cid=t(e.panel_screen_meta_cid,CID_REF_SCREEN_META)),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Ze=e=>({cid:e.cid,mtime:e.mtime,name:e.name,parent_cid:e.parent_cid,position:e.position,expanded:e.expanded,orientation:e.orientation,width:e.width,height:e.height,bgcolor:e.bgcolor,bgimage:e.bgimage,deleter_name:e.deleter_name,deleted_at:e.deleted_at,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid,artboard_id:e.artboard_id,artboard_image_url:e.artboard_image_url}),mt=(e,t)=>{t(e.cid,CID_SCREEN_META),e.parent_cid&&t(e.parent_cid,CID_REF_SCREEN_META),e.artboard_id&&t(e.artboard_id,CID_REF_EXTERNAL_ARTBOARD),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},ze=(e,t)=>(e=Ze(e),e.cid=t(e.cid,CID_SCREEN_META),e.parent_cid&&(e.parent_cid=t(e.parent_cid,CID_REF_SCREEN_META)),e.artboard_id&&(e.artboard_id=t(e.artboard_id,CID_REF_EXTERNAL_ARTBOARD)),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),ot=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position,fh:e.fh,hh:e.hh,timestamp:e.timestamp,icon:e.icon}),ft=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},et=(e,t)=>(e=ot(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),gt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,debug:e.debug}),k=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ani_name:"none",ani_count:1,ani_duration:e.ani_duration,ani_delay:e.ani_delay,link_type:e.link_type,widget_cids:e.widget_cids,target_cid:e.target_cid,targetstate_cid:e.targetstate_cid,state_cid:e.state_cid,gesture:e.gesture,transition:e.transition,timer:e.timer,reset:e.reset,menu_offset:e.menu_offset,scroll_offset:e.scroll_offset,screen_target_cid:e.screen_target_cid,ani_hide_duration:e.ani_hide_duration}),N=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,screen_glue_cid:e.screen_glue_cid,screen_meta_cid:e.screen_meta_cid,screen_state_cid:e.screen_state_cid,overflow_behavior:e.overflow_behavior,scroll:e.scroll}),pe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed}),De=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,image:e.image}),le=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,checked:e.checked}),he=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,checked:e.checked}),Ke=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked,switch_disabled:e.switch_disabled,thumb_checked_style:e.thumb_checked_style,thumb_unchecked_style:e.thumb_unchecked_style,track_checked_style:e.track_checked_style,track_unchecked_style:e.track_unchecked_style}),Le=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked,switch_disabled:e.switch_disabled,thumb_checked_style:e.thumb_checked_style,thumb_unchecked_style:e.thumb_unchecked_style,track_checked_style:e.track_checked_style,track_unchecked_style:e.track_unchecked_style}),Ye=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),Xe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),yt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),Mt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),Ct=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),wt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Pt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),St=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Bt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric,image:e.image}),Rt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha}),xt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:e.border,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:""}),Lt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Ft=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),I=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),F=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),Y=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),se=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Be=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Qe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),pt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),at=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),it=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),tt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,td:e.td,bo:e.bo,i:e.i,input_type:e.input_type,border_visibility:e.border_visibility}),ct=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,border_visibility:e.border_visibility}),We=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),bt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:0,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",is:e.is,icon:e.icon,fs:e.fs,view_box:e.view_box,path:e.path}),Et=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:0,text:e.text,border_radius:"",box_shadow:"",text_shadow:"",fs:e.fs,ha:e.ha,lh:e.lh,bo:e.bo,i:e.i,td:e.td,padding:e.padding,point:e.point,fills:e.fills}),kt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i,icon:e.icon,is:e.is,view_box:e.view_box,path:e.path,border_visibility:e.border_visibility,fills:e.fills}),jt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i}),_n=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,_ttPlacement:e._ttPlacement,_ttOffset:e._ttOffset,_ttArrowSize:e._ttArrowSize}),Yt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,border_visibility:e.border_visibility,fills:e.fills}),un=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,side_num:e.side_num,fills:e.fills}),vt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,side_num:e.side_num,radius:e.radius,fills:e.fills}),Zt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,fs:e.fs,td:e.td,bo:e.bo,i:e.i,tableData:e.tableData,innerBorderV:e.innerBorderV,innerBorderH:e.innerBorderH,outerBorder:e.outerBorder,styleType:e.styleType}),mn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,fills:e.fills}),Xt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",image:e.image,p:e.p,clip:e.clip,filter:e.filter,clip_type:e.clip_type,image_rect:e.image_rect}),pn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:""}),an=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:"",points:e.points}),zt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:0,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:"",points:e.points,arrow_types:e.arrow_types,arrow_stroke:e.arrow_stroke}),Ut=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding}),Nt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,clip:e.clip,border_visibility:e.border_visibility,fills:e.fills}),Gt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon}),dn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon}),hn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon,view_box:e.view_box,path:e.path,svgAttr:e.svgAttr,fills:e.fills}),fn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:e.tc,border:0,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,clip:e.clip,size_type:e.size_type,font_direction:e.font_direction}),gn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed}),yn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed}),bn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:0,ro:e.ro,primary_fixed:e.primary_fixed,fills:e.fills}),$t=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:0,ro:e.ro,primary_fixed:e.primary_fixed,fills:e.fills}),Qt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,ha:e.ha,va:e.va,data:e.data}),En=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed}),qt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,expanded:e.expanded}),kn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:1073741823,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio}),Mn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",is_autoplay:e.is_autoplay,is_loop:e.is_loop,is_keep_alive:e.is_keep_alive,is_hidden:e.is_hidden}),Cn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",is_autoplay:e.is_autoplay,is_loop:e.is_loop,is_muted:e.is_muted,is_hide_controls:e.is_hide_controls}),Kt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:"",background:e.background,foreground:e.foreground}),wn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,fills:e.fills}),g=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,chartType:e.chartType,chartCategory:e.chartCategory,chartTheme:e.chartTheme,grid:e.grid,showAxis:e.showAxis,textAngle:e.textAngle,legend:e.legend,showToolTip:e.showToolTip,smooth:e.smooth,showHelpMark:e.showHelpMark,chartBorderRadius:e.chartBorderRadius,chartInnerRadius:e.chartInnerRadius,chartData:e.chartData,progress:e.progress,shLabel:e.shLabel,unit:e.unit}),z=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,min:e.min,max:e.max,sliderSize:e.sliderSize,is:e.is,ic:e.ic,number:e.number}),H=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,pagesNumber:e.pagesNumber,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,number:e.number}),oe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,pagesNumber:e.pagesNumber,checkedBg:e.checkedBg,checkedBorder:e.checkedBorder,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,number:e.number}),q=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data}),Ce=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data,optionData:e.optionData,border_radius:e.border_radius,border:e.border,background:e.background,canExpandOneMenu:e.canExpandOneMenu}),Te=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data,optionData:e.optionData,fs:e.fs,tc:e.tc,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,checkedBg:e.checkedBg,background:e.background,border:e.border,border_radius:e.border_radius}),ae=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,textColor:e.textColor,borderColor:e.borderColor,disabled:e.disabled,checkedTc:e.checkedTc,checkedBgColor:e.checkedBgColor,layout:e.layout,selectionControlType:e.selectionControlType,gap:e.gap}),fe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",optionData:e.optionData,mutualWay:e.mutualWay,fs:e.fs,td:e.td,bo:e.bo,i:e.i,va:e.va,ha:e.ha,dropMenuEcho:e.dropMenuEcho,is_multiple:e.is_multiple}),ye=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,panelData:e.panelData,expandData:e.expandData,selectedData:e.selectedData,isShowIcon:e.isShowIcon,canExpandOneMenu:e.canExpandOneMenu,navigationMenuType:e.navigationMenuType}),$=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,checkedBorder:e.checkedBorder,checkedBoldType:e.checkedBoldType,checkedFontStyle:e.checkedFontStyle,checkedTextDecoration:e.checkedTextDecoration,tc:e.tc}),ie=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,tc:e.tc,background:e.background,border:e.border,border_visibility:e.border_visibility,isShowIcon:e.isShowIcon,isShowText:e.isShowText,iconSize:e.iconSize,iconColor:e.iconColor,selectedTextColor:e.selectedTextColor,selectedIconColor:e.selectedIconColor,isShowSelectedText:e.isShowSelectedText,isShowSelectedIcon:e.isShowSelectedIcon}),G=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i,border_visibility:e.border_visibility,fills:e.fills}),J=e=>({cid:e.cid,mtime:e.mtime,name:e.name,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,data:e.data,display_name:e.display_name,bind_widget_cid:e.bind_widget_cid,ctime:e.ctime,order:e.order}),X=536870911,re=1073741823,Pe=null,Je=e=>{switch(e.name){case"debug":return gt(e);case"link":return k(e);case"panel":return N(e);case"lr":return pe(e);case"map_view":return De(e);case"mcheckbox":return le(e);case"mradiobutton":return he(e);case"ios_switch":return Ke(e);case"android_switch":return Le(e);case"ios_check":return Ye(e);case"android_check":return Xe(e);case"android_radio":return yt(e);case"switch":return Mt(e);case"iphone_keyboard":return Ct(e);case"ipad_keyboard":return wt(e);case"android_keyboard":return Pt(e);case"keyboard":return St(e);case"unified_keyboard":return Bt(e);case"search_bar":return Rt(e);case"tab_bar":return xt(e);case"ios_status_bar":return Lt(e);case"iphone_x_status_bar":return Ft(e);case"android_status_bar":return I(e);case"navigation_bar":return F(e);case"nav_bar":return Y(e);case"status_bar":return se(e);case"legacy_iphone_status_bar":return Be(e);case"legacy_iphone_x_status_bar":return Qe(e);case"legacy_android_status_bar":return pt(e);case"legacy_ipad_status_bar":return at(e);case"webpage":return it(e);case"mtext_input":return tt(e);case"mtextarea":return ct(e);case"mselect":return We(e);case"tab_item":return bt(e);case"sticky":return Et(e);case"button":return kt(e);case"text_field":return jt(e);case"mtooltip":return _n(e);case"rounded_rect":return Yt(e);case"polygon":return un(e);case"star":return vt(e);case"table":return Zt(e);case"circle_rect":return mn(e);case"image_view":return Xt(e);case"rectangle":return pn(e);case"line":return an(e);case"arrow":return zt(e);case"label":return Ut(e);case"text_view":return Nt(e);case"icon_button":return Gt(e);case"svg_icon_button":return dn(e);case"svg_icon_path":return hn(e);case"rich_text":return fn(e);case"hr":return gn(e);case"ve":return yn(e);case"triangleb":return bn(e);case"triangletl":return $t(e);case"carousel":return Qt(e);case"mfile_input":return En(e);case"group":return qt(e);case"pg":return kn(e);case"audio":return Mn(e);case"video":return Cn(e);case"qrcode":return Kt(e);case"placeholder":return wn(e);case"chart":return g(e);case"digital_stepper":return z(e);case"pagination_mobile":return H(e);case"pagination_web":return oe(e);case"slider":return q(e);case"collapse":return Ce(e);case"segmented_control":return Te(e);case"selection_control":return ae(e);case"drop_menu":return fe(e);case"navigation_menu":return ye(e);case"tabs":return $(e);case"mobile_tab_bars":return ie(e);case"button_solid":return G(e);case"annotate":return J(e)}throw new Error("unexpected data name from: "+JSON.stringify(e))},Ue=null,Se=(e,t)=>{e.forEach(c=>{t(c),Se(c.children,t)})},Oe=(e,t)=>{const{name:c,cid:r,gid:l,link_cids:C}=e;if(t(r,CID_ITEM),l&&t(l,CID_ITEM_GROUP),C&&C.split(",").forEach(b=>t(b,CID_REF_ITEM)),c==="link"){const{widget_cids:b,target_cid:w,targetstate_cid:B,state_cid:K}=e;if(b)for(const ce of b.split(","))t(ce,CID_REF_ITEM);w&&t(w,CID_REF_SCREEN_META),B&&t(B,CID_REF_SCREEN_STATE),K&&t(K,CID_REF_SCREEN_META)}if(c==="panel"){const{screen_state_cid:b,screen_meta_cid:w,screen_glue_cid:B}=e;b&&t(b,CID_REF_SCREEN_STATE),w&&t(w,CID_REF_SCREEN_META),B&&t(B,CID_REF_SCREEN_GLUE)}c==="annotate"&&e.bind_widget_cid&&t(e.bind_widget_cid,CID_REF_ITEM)},Fe=(e,t)=>{e=filterEntry(e),JSON_TYPE_KEY_LIST.forEach(K=>{e[K]&&(e[K]=JSON.parse(JSON.stringify(e[K])))});const{name:c,cid:r,gid:l,link_cids:C,tableData:b,optionData:w,data:B}=e;if(e.cid=t(r,CID_ITEM),l&&(e.gid=t(l,CID_ITEM_GROUP)),C&&(e.link_cids=C.split(",").map(K=>t(K,CID_REF_ITEM)).join(",")),c==="table"){const ce=b.links.map(te=>te.map(_e=>_e?_e.split(",").map(Me=>t(Me,CID_REF_ITEM)).join(","):""));e.tableData.links=ce}if(Ue.indexOf(c)!==-1){const K=[...w];Se(K,ce=>{ce.data.link_cids&&(ce.data.link_cids=t(ce.data.link_cids,CID_REF_ITEM))}),e.optionData=K}if(c==="carousel"){const K=B.slides.map(ce=>ce.link_cids?{...ce,link_cids:t(ce.link_cids,CID_REF_ITEM)}:{...ce});e.data={...B,slides:K}}if(c==="link"){const{widget_cids:K,target_cid:ce,targetstate_cid:te,state_cid:_e}=e;K&&(e.widget_cids=K.split(",").map(Me=>t(Me,CID_REF_ITEM)).join(",")),ce&&(e.target_cid=t(ce,CID_REF_SCREEN_META)),te&&(e.targetstate_cid=t(te,CID_REF_SCREEN_STATE)),_e&&(e.state_cid=t(_e,CID_REF_SCREEN_META))}if(c==="panel"){const{screen_state_cid:K,screen_meta_cid:ce,screen_glue_cid:te}=e;K&&(e.screen_state_cid=t(K,CID_REF_SCREEN_STATE)),ce&&(e.screen_meta_cid=t(ce,CID_REF_SCREEN_META)),te&&(e.screen_glue_cid=t(te,CID_REF_SCREEN_GLUE))}return c==="annotate"&&e.bind_widget_cid&&(e.bind_widget_cid=t(e.bind_widget_cid,CID_REF_ITEM)),e},Ne=(e,t)=>{switch(e.name){case"carousel":for(const c of e.data.slides)c.asset&&t(c.asset);break}e.image&&t(e.image)},ue=_(A),Ee=e=>({cid:e.cid,mtime:e.mtime,ttag:e.ttag||ue,type:e.type,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),Re=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},xe=(e,t)=>(e=Ee(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Ge=e=>({cid:e.cid,mtime:e.mtime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),He=(e,t)=>{t(e.cid,CID_SCREEN_META),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},V=(e,t)=>(e=Ge(e),e.cid=t(e.cid,CID_SCREEN_META),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),ke=e=>({cid:e.cid,mtime:e.mtime,name:e.name}),_t=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},st=(e,t)=>(e=ke(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),dt=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,z:e.z,pageType:e.pageType}),Tt=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,clip:e.clip,layoutGrid:e.layoutGrid}),ht=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,clip:e.clip,layoutGrid:e.layoutGrid}),Ot=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,x:e.x,y:e.y,v:e.v,locked:e.locked,z:e.z,complex:e.complex,symbolCid:e.symbolCid,overrides:e.overrides,layoutGrid:e.layoutGrid}),en=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,x:e.x,y:e.y,o:e.o,v:e.v,z:e.z}),Mi=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,combineType:e.combineType,fills:e.fills,x:e.x,y:e.y,o:e.o,v:e.v,z:e.z}),Ci=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,style:e.style,paragraphs:e.paragraphs,textAlign:e.textAlign,verticalAlign:e.verticalAlign,paragraphSpacing:e.paragraphSpacing,textAutoResize:e.textAutoResize}),wi=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,aspectRatio:e.aspectRatio,o:e.o,z:e.z,v:e.v,fills:e.fills,vector:e.vector}),Pi=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,corner:e.corner}),Si=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,fills:e.fills,start:e.start,sweep:e.sweep,ratio:e.ratio}),vi=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v}),Ti=e=>{switch(e.type){case"Page":return dt(e);case"Frame":return Tt(e);case"Symbol":return ht(e);case"Instance":return Ot(e);case"Group":return en(e);case"CombinedShape":return Mi(e);case"RichText":return Ci(e);case"Vector":return wi(e);case"RoundedRect":return Pi(e);case"Circle":return Si(e);case"Slice":return vi(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},Mo=(e,t)=>{const{cid:c,parentCid:r,symbolCid:l}=e;t(c,CID_ITEM),r&&t(r,CID_REF_ITEM),l&&t(l,CID_REF_ITEM)},Co=(e,t)=>{e=filterEntry(e);const{cid:c,parentCid:r,symbolCid:l}=e;return e.cid=t(c,CID_ITEM),r&&(e.parentCid=t(r,CID_REF_ITEM)),l&&(e.symbolCid=t(l,CID_REF_ITEM)),e};var wo=n(58129);const Po=(e,t)=>{let{name:c,mtime:r,locale:l}=t;const C=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,project_meta_cid:e.cid})],b=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,screen_glue_cid:C[0].cid,project_meta_cid:e.cid})],w=[{type:"Page",name:T("i_Page"),cid:getRandomCid("p"),mtime:getLocalTimestamp(),z:0,pageType:1},{type:"Page",name:"Recycler",cid:getRandomCid("p"),mtime:getLocalTimestamp(),z:-1e4,pageType:0}],B=[createScreenObject(b[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r},w,e.type)])];return{screenGlueList:C,screenMetaList:b,screenObjectList:B}};var So=n(1372);const Oi=new Set(["android","iphone","ipad"]),Bn=new Set(["ipad_mini","ipad_pro_11","ipad_pro_12"]),Ai=new Set(["iphone_x","iphone_xs_max","iphone_11_pro","iphone_11_pro_max","iphone_12_pro","iphone_12_pro_max","iphone_13_pro","iphone_13_pro_max","iphone_14_pro","iphone_14_pro_max","ipad_mini","ipad_pro_11","ipad_pro_12"]),xi={iphone_14_pro_max:[919,148,134,898],iphone_14_pro:[839,130,134,818],iphone_13_pro_max:[913,147,134,892],iphone_13_pro:[831,129,134,810],iphone_12_pro_max:[913,147,134,892],iphone_12_pro:[831,129,134,810],iphone_x:[799,121,134,778],iphone_xs_max:[883,141,134,862],iphone_11_pro:[799,121,134,778],iphone_11_pro_max:[883,141,134,862],ipad_mini:[1011,227,314,1009],ipad_pro_11:[1181,260,314,1179],ipad_pro_12:[1353,355,314,1351]},Di={iphone_14_pro:48,iphone_13_pro:44,iphone_12_pro:44,iphone_x:44,iphone_11_pro:44,iphone_11_pro_max:44,iphone:20,ipad:24,ipad_3_4:20,ipad_pro:24,android:24,huawei_p40:58},Ii={iphone_14_pro:48,iphone_12_pro:44,iphone_13_pro:44,iphone_x:44,iphone_11_pro_max:44,iphone_11_pro:44,iphone:44,ipad:50,ipad_3_4:44,ipad_pro:50,android:56,huawei_p40:56},Bi=(e,t)=>{const c=t==="iphone_14_pro"||t==="iphone_14_pro_max"?"iphone_14_pro":t==="iphone_12_pro"||t==="iphone_x"||t==="iphone_xs_max"||t==="iphone_11_pro"||t==="iphone_11_pro_max"||t==="iphone_12_pro_max"||t==="iphone_13_pro"||t==="iphone_13_pro_max"?"iphone_x":e==="iphone"?"iphone":t==="ipad_3_4"?"ipad_3_4":t==="ipad_pro"?"ipad_pro":t==="ipad_mini"||t==="ipad_pro_11"||t==="ipad_pro_12"?"ipad":e==="android"&&t==="Huawei_p40"?"huawei_p40":e==="android"?"android":null;return{statusBarHeight:Di[c],navBarHeight:Ii[c]}},vo=(e,t)=>{let{name:c,mtime:r,width:l,height:C,device:b,model:w}=t;const B=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:c,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,width:l,height:C,project_meta_cid:e.cid}),filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:c,type:SCREEN_GLUE_TYPE.PROJECT_TRASHCAN,ctime:r,width:l,height:C,project_meta_cid:e.cid})],K=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:T("s_home"),parent_cid:null,position:1,expanded:!1,orientation:"portrait",width:l,height:C,bgcolor:"#fff",screen_glue_cid:B[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:T("s_screen")+" 2",parent_cid:null,position:2,expanded:!1,orientation:"portrait",width:l,height:C,bgcolor:"#fff",screen_glue_cid:B[0].cid,project_meta_cid:e.cid})],ce={device:b,model:w,name:c,width:l},{itemList:te,extraInfo:_e}=Rn({hasNavBar:!0,...ce}),{itemList:Me,extraInfo:Ie}=Rn({hasNavBar:!1,...ce}),je=[createScreenObject(K[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,name:T("s_state")+" 1",position:1,timestamp:r,..._e},te,e.type)]),createScreenObject(K[1].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,name:T("s_state")+" 1",position:1,timestamp:r,...Ie},Me,e.type)])];return{screenGlueList:B,screenMetaList:K,screenObjectList:je,itemListSecondScreen:Me,extraInfoSecondScreen:Ie}},Rn=e=>{let{hasNavBar:t,device:c,model:r,name:l,width:C}=e;const b=Oi.has(c),w=Ai.has(r),B=[],K={hh:0,fh:0};if(b){const{itemList:ce,extraInfo:te}=ji({name:l,width:C,device:c,model:r,hasNavBar:t});if(B.push(...ce),Object.assign(K,te),w){const{itemList:_e,extraInfo:Me}=Ri({width:C,model:r});B.push(..._e),Object.assign(K,Me)}}return{itemList:B,extraInfo:K}},Ri=e=>{let{width:t,model:c}=e;const[r,l,C,b]=xi[c],w=getLocalTimestamp(),B=Bn.has(c)?15:34,K=Bn.has(c)?0:1;return{extraInfo:{fh:B},itemList:[{cid:getRandomItemCid(),name:"rounded_rect",mtime:w,display_name:T("i_tab_bar"),background:[K,4177066239],width:t,left:0,top:b,height:B,border:[1,HEX8NUMBER_TRANSPARENT,1,"0"],v:!0},{cid:getRandomItemCid(),name:"rounded_rect",mtime:w,display_name:T("i_rounded_rect"),border:[0,HEX8NUMBER_TRANSPARENT,0,"0"],border_radius:"3",background:[1,255],top:r,left:l,width:C,height:5,v:!0}]}},ji=e=>{let{name:t,width:c,device:r,model:l,hasNavBar:C=!1}=e;const b=r==="android"&&l==="Huawei_p40"?"android_status_bar":l==="iphone_12_pro"||l==="iphone_13_pro"||l==="iphone_14_pro"||l==="iphone_x"||l==="iphone_xs_max"||l==="iphone_11_pro"||l==="iphone_11_pro_max"||l==="iphone_12_pro_max"||l==="iphone_13_pro_max"||l==="iphone_14_pro_max"||r==="android"?"iphone_x_status_bar":r==="iphone"||r==="ipad"?"ios_status_bar":null,{statusBarHeight:w,navBarHeight:B}=Bi(r,l),K=getLocalTimestamp(),ce={};return r==="android"&&l==="Huawei_p40"&&Object.assign(ce,{tc:"rgba(16, 16, 16, 1)",background:[1,4177066239]}),{extraInfo:{hh:w+(C?B:0)},itemList:[{cid:getRandomItemCid(),name:b,mtime:K,display_name:T("i_"+b),left:0,top:0,width:c,height:w,v:!0,...ce},C&&{cid:getRandomItemCid(),name:"nav_bar",mtime:K,display_name:T("i_nav_bar"),left:0,top:w,height:B,text:t,width:c,v:!0}].filter(Boolean)}},Li=_(A),jn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Li,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,project_meta_cid:e.project_meta_cid}),To=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&t(e.panel_screen_meta_cid,CID_REF_SCREEN_META),t(e.project_meta_cid,CID_REF_PROJECT_META)},Oo=(e,t)=>(e=jn(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&(e.panel_screen_meta_cid=t(e.panel_screen_meta_cid,CID_REF_SCREEN_META)),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Fi=_(A),Ln=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Fi,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Ao=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},xo=(e,t)=>(e=Ln(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Do=(e,t)=>{let{name:c,mtime:r,width:l,height:C,locale:b}=t;const w=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:c,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,width:l,height:C,project_meta_cid:e.cid})],B=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:T("s_home"),parent_cid:null,position:1,expanded:!1,orientation:"portrait",width:l,height:C,bgcolor:"#fff",screen_glue_cid:w[0].cid,project_meta_cid:e.cid})],K=[createScreenObjectWithDefaultState(B[0].cid,b)];return{screenGlueList:w,screenMetaList:B,screenObjectList:K}},zi=_(A),Fn=e=>({cid:e.cid,mtime:e.mtime,ttag:e.ttag||zi,type:e.type,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),Io=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},Bo=(e,t)=>(e=Fn(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),zn=e=>({cid:e.cid,mtime:e.mtime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Ro=(e,t)=>{t(e.cid,CID_SCREEN_META),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},jo=(e,t)=>(e=zn(e),e.cid=t(e.cid,CID_SCREEN_META),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Lo=(e,t)=>{let{mtime:c,locale:r}=t;const l=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:c,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:c,project_meta_cid:e.cid})],C=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:c,screen_glue_cid:l[0].cid,project_meta_cid:e.cid})],b=[createScreenObjectWithDefaultState(C[0].cid,r)];return{screenGlueList:l,screenMetaList:C,screenObjectList:b}},Ui=_(A),Un=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Ui,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),Fo=(e,t)=>{},zo=(e,t)=>(e=Un(e),e),Ni=_(A),Nn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Ni,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Uo=(e,t)=>{},No=(e,t)=>(e=Nn(e),e),Go=(e,t)=>{let{name:c,mtime:r,width:l,height:C,device:b,model:w}=t;const B=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:c,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,width:l,height:C,project_meta_cid:e.cid}),filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:c,type:SCREEN_GLUE_TYPE.PROJECT_TRASHCAN,ctime:r,width:l,height:C,project_meta_cid:e.cid})],K=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:"page_list",screen_glue_cid:B[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:"widget_items",screen_glue_cid:B[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:"comment_items",screen_glue_cid:B[0].cid,project_meta_cid:e.cid})],te=[{cid:getRandomItemCid("pg"),type:"Page",name:"\u9ED8\u8BA4\u5206\u9875",isDefault:!0,ctime:getLocalTimestamp(),sketchObjectID:"",z:0}],_e=[],Me=[];return{screenGlueList:B,screenMetaList:K,screenObjectList:[createScreenObject(K[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,timestamp:r},te,e.type)]),createScreenObject(K[1].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,timestamp:r},_e,e.type)]),createScreenObject(K[2].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,timestamp:r},Me,e.type)])]}},Gn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position,theme:e.theme,strokeTheme:e.strokeTheme,nodeTheme:e.nodeTheme,fh:e.fh,hh:e.hh,timestamp:e.timestamp}),Ko=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},Wo=(e,t)=>(e=Gn(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),Gi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,TID:e.TID,name:e.name,rect:e.rect,lineWidth:e.lineWidth,globalAlpha:e.globalAlpha,dash:e.dash,strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,font:e.font,text:e.text,textRect:e.textRect,locked:e.locked,zIndex:e.zIndex,data:e.data,from:e.from,to:e.to,controlPoints:e.controlPoints,fromArrow:e.fromArrow,toArrow:e.toArrow}),Ki=e=>({cid:e.cid,type:e.type,mtime:e.mtime,TID:e.TID,name:e.name,rect:e.rect,lineWidth:e.lineWidth,globalAlpha:e.globalAlpha,dash:e.dash,strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,font:e.font,text:e.text,textRect:e.textRect,locked:e.locked,zIndex:e.zIndex,data:e.data,rotate:e.rotate,borderRadius:e.borderRadius,image:e.image,lastImage:e.lastImage,imgNaturalWidth:e.imgNaturalWidth,imgNaturalHeight:e.imgNaturalHeight,imockImg:e.imockImg,img:e.img,anchors:e.anchors,rotatedAnchors:e.rotatedAnchors,hideAnchor:e.hideAnchor,hideSizeCP:e.hideSizeCP}),Ho=536870911,Wi=e=>{switch(e.type){case"Line":return Gi(e);case"Node":return Ki(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},Vo=(e,t)=>{const{cid:c,type:r,from:l,to:C,controlPoints:b}=e;t(c,CID_ITEM),r==="Line"&&(l&&t(l.id,CID_REF_ITEM),C&&t(C.id,CID_REF_ITEM),b&&b.forEach(w=>t(w.id,CID_REF_ITEM)))},Jo=(e,t)=>{e=filterEntry(e);const{cid:c,type:r,from:l,to:C,controlPoints:b}=e;return e.cid=t(c,CID_ITEM),r==="Line"&&(l&&(e.from.id=t(l.id,CID_REF_ITEM)),C&&(e.to.id=t(C.id,CID_REF_ITEM)),b&&(e.controlPoints=b.map(w=>({...w,id:t(w.id,CID_REF_ITEM)})))),e},Yo=(e,t)=>{e.image&&t(e.image),e.lastImage&&t(e.lastImage),e.imockImg&&t(e.imockImg),e.img&&t(e.img)},Kn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position}),Zo=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},Xo=(e,t)=>(e=Kn(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),Hi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,theme:e.theme,backgroundColor:e.backgroundColor}),Vi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,parentCid:e.parentCid,expanded:e.expanded,width:e.width,height:e.height,placement:e.placement,order:e.order,background_color:e.background_color,border_color:e.border_color,border_width:e.border_width,border_style:e.border_style,text:e.text,font_size:e.font_size,font_weight:e.font_weight,font_family:e.font_family,font_bold:e.font_bold,font_italic:e.font_italic,font_underline:e.font_underline,font_line_through:e.font_line_through,font_color:e.font_color,link:e.link,link_desc:e.link_desc,img_path:e.img_path,img_width:e.img_width,img_height:e.img_height}),Ji=e=>{switch(e.name){case"mindConfigNode":return Hi(e);case"mindNode":return Vi(e)}throw new Error("unexpected data name from: "+JSON.stringify(e))},$o=(e,t)=>{const{cid:c,parentCid:r}=e;t(c,CID_ITEM),r&&t(r,CID_ITEM_GROUP)},Qo=(e,t)=>{e=filterEntry(e);const{cid:c,parentCid:r}=e;return e.cid=t(c,CID_ITEM),r&&(e.parentCid=t(r,CID_ITEM_GROUP)),e},qo=(e,t)=>{e.img_path&&t(e.img_path)},Wn=e=>({cid:e.cid,mtime:e.mtime,name:e.name}),ec=(e,t)=>{},tc=(e,t)=>(e=Wn(e),e),Yi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,isStraight:e.isStraight,fromCid:e.fromCid,fromDirection:e.fromDirection,startPoint:e.startPoint,toCid:e.toCid,toDirection:e.toDirection,endPoint:e.endPoint,dPathList:e.dPathList,lineStyle:e.lineStyle,comment:e.comment,commentStyle:e.commentStyle,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,pageCid:e.pageCid,groupCid:e.groupCid,name:e.name}),Zi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,width:e.width,height:e.height,initialHeight:e.initialHeight,initialWidth:e.initialWidth,layup:e.layup,isEditing:e.isEditing,x:e.x,y:e.y,z:e.z,backgroundColor:e.backgroundColor,rawContent:e.rawContent,pageCid:e.pageCid,groupCid:e.groupCid,noteStyle:e.noteStyle,name:e.name}),Xi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,isDefault:e.isDefault,sketchObjectID:e.sketchObjectID,ctime:e.ctime,etime:e.etime,z:e.z}),$i=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,isDefault:e.isDefault,pageCid:e.pageCid,pageSketchObjectID:e.pageSketchObjectID,sketchObjectID:e.sketchObjectID,z:e.z,ctime:e.ctime}),Qi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,sketchObjectID:e.sketchObjectID,pageCid:e.pageCid,pageSketchObjectID:e.pageSketchObjectID,groupCid:e.groupCid,ctime:e.ctime,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,imageUrl:e.imageUrl,sliceUrl:e.sliceUrl,statusCid:e.statusCid,statusIndex:e.statusIndex,isActivedInStatus:e.isActivedInStatus,resource_type:e.resource_type,original_resource_type:e.original_resource_type}),qi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,isEditing:e.isEditing,no:e.no,rawContent:e.rawContent,recordList:e.recordList,rect:e.rect,status:e.status,vec2:e.vec2,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,artboardCid:e.artboardCid,artboardVec2:e.artboardVec2,pageCid:e.pageCid,groupCid:e.groupCid}),er=e=>({cid:e.cid,type:e.type,mtime:e.mtime,commentCid:e.commentCid,content:e.content,isEditing:e.isEditing,cTime:e.cTime,mTime:e.mTime,user:e.user,replyUser:e.replyUser}),tr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,layup:e.layup,iconName:e.iconName,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,complexRect:e.complexRect,pageCid:e.pageCid,groupCid:e.groupCid,name:e.name}),nr=e=>{switch(e.type){case"AboardLine":return Yi(e);case"Note":return Zi(e);case"Page":return Xi(e);case"Group":return $i(e);case"AboardsRef":return Qi(e);case"Comment":return qi(e);case"CommentRecord":return er(e);case"Stamp":return tr(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},ir=e=>{switch(e){case x.DESIGN_DRAFT:return{filterEntryProjectMeta:W,filterEntryScreenGlue:Ee,filterEntryScreenMeta:Ge,filterEntryScreenState:ke,filterEntryItem:Ti};case x.PROTOTYPE:case ne:return{filterEntryProjectMeta:W,filterEntryScreenGlue:Z,filterEntryScreenMeta:Ze,filterEntryScreenState:ot,filterEntryItem:Je};case x.FLOW_CHART:return{filterEntryProjectMeta:W,filterEntryScreenGlue:jn,filterEntryScreenMeta:Ln,filterEntryScreenState:Gn,filterEntryItem:Wi};case x.MIND_MAP:return{filterEntryProjectMeta:W,filterEntryScreenGlue:Fn,filterEntryScreenMeta:zn,filterEntryScreenState:Kn,filterEntryItem:Ji};case x.ABOARD:return{filterEntryProjectMeta:W,filterEntryScreenGlue:Un,filterEntryScreenMeta:Nn,filterEntryScreenState:Wn,filterEntryItem:nr}}throw new Error("unexpected projectMetaType: "+e)},nc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueDesignDraft,collectCidScreenMeta:collectCidScreenMetaDesignDraft,collectCidScreenState:collectCidScreenStateDesignDraft,collectCidItem:collectCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGluePrototype,collectCidScreenMeta:collectCidScreenMetaPrototype,collectCidScreenState:collectCidScreenStatePrototype,collectCidItem:collectCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueFlowChart,collectCidScreenMeta:collectCidScreenMetaFlowChart,collectCidScreenState:collectCidScreenStateFlowChart,collectCidItem:collectCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueMindMap,collectCidScreenMeta:collectCidScreenMetaMindMap,collectCidScreenState:collectCidScreenStateMindMap,collectCidItem:collectCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueAboard,collectCidScreenMeta:collectCidScreenMetaAboard,collectCidScreenState:collectCidScreenStateAboard,collectCidItem:collectCidItemAboard}}throw new Error("unexpected projectMetaType: "+e)},ic=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueDesignDraft,remapCidScreenMeta:remapCidScreenMetaDesignDraft,remapCidScreenState:remapCidScreenStateDesignDraft,remapCidItem:remapCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGluePrototype,remapCidScreenMeta:remapCidScreenMetaPrototype,remapCidScreenState:remapCidScreenStatePrototype,remapCidItem:remapCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueFlowChart,remapCidScreenMeta:remapCidScreenMetaFlowChart,remapCidScreenState:remapCidScreenStateFlowChart,remapCidItem:remapCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueMindMap,remapCidScreenMeta:remapCidScreenMetaMindMap,remapCidScreenState:remapCidScreenStateMindMap,remapCidItem:remapCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueAboard,remapCidScreenMeta:remapCidScreenMetaAboard,remapCidScreenState:remapCidScreenStateAboard,remapCidItem:remapCidItemAboard}}throw new Error("unexpected projectMetaType: "+e)},rc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:case PROJECT_META_TYPE.MIND_MAP:case PROJECT_META_TYPE.FLOW_CHART:case PROJECT_META_TYPE.ABOARD:return{};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{MAX_Z:MAX_Z_PROTOTYPE,STICKY_Z:STICKY_Z_PROTOTYPE}}throw new Error("unexpected projectMetaType: "+e)},oc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return createPresetProjectMetaDataDesignDraft;case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return createPresetProjectMetaDataProtoType;case PROJECT_META_TYPE.FLOW_CHART:return createPresetProjectMetaDataFlowChart;case PROJECT_META_TYPE.MIND_MAP:return createPresetProjectMetaDataMindMap;case PROJECT_META_TYPE.ABOARD:return createPresetProjectMetaDataAboard}},cc=e=>{switch(e){case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return collectAssetUrlPrototype;case PROJECT_META_TYPE.FLOW_CHART:return collectAssetUrlFlowChart;case PROJECT_META_TYPE.MIND_MAP:return collectAssetUrlMindMap;case PROJECT_META_TYPE.ABOARD:return collectAssetUrlAboard;default:throw new Error("unexpected projectMetaType: "+e)}},tn="v1",Hn="screen",Vn="screen-patch",Jn=_({PB:tn,PBT:Hn}),rr=_({PB:tn,PBT:Vn}),or="data",cr="itemList",Yn=function(e,t){return t===void 0&&(t=[]),{ttag:Jn,cid:e,stateList:t}},_c=function(e,t,c){c===void 0&&(c=[]),SET_LOCALE(t);const r=getRandomScreenStateCid();return{ttag:Jn,cid:e,stateList:[{cid:r,data:{cid:r,name:T("s_page_1_state"),mtime:getLocalTimestamp(),fh:0,hh:0,position:0},itemList:c}]}},Zn=function(e,t,c){e===void 0&&(e={}),t===void 0&&(t=[]);const{filterEntryScreenState:r,filterEntryItem:l}=ir(c);return{cid:e.cid,data:r(e),itemList:t.map(l)}},Xn=e=>{let{ttag:t}=e;const{PB:c,PBT:r}=d(t);if(c!==tn||r!==Hn)throw new Error("[ScreenObject] invalid ttag: "+t)},uc=function(e,t){return t===void 0&&(t=[]),{ttag:rr,cid:e,statePatchList:t}},sr=e=>{let{ttag:t}=e;const{PB:c,PBT:r}=d(t);if(c!==tn||r!==Vn)throw new Error("[ScreenPatchObject] invalid ttag: "+t)},lr=e=>({screenMetaCid:e,dataMap:{},itemListMap:{}}),mc=e=>{const{dataMap:t,itemListMap:c}=e;if(!isCompactArrayShallowEqual(Object.keys(t),Object.keys(c)))throw new Error("[verifyScreenRuntimeState] stateCid mismatch")},_r=e=>{const{cid:t,stateList:c}=e,r=lr(t);for(const{cid:l,data:C,itemList:b}of c)r.dataMap[l]=C,r.itemListMap[l]=b;return r},ur=(e,t)=>{const{screenMetaCid:c,dataMap:r,itemListMap:l}=e,C=[];for(const b of Object.keys(r)){const w=r[b],B=l[b];C.push(Zn(w,B,t))}return Yn(c,C)};var nn=n(93834);const Dt="cid",ut="mtime",mr=1,Pn=(e,t)=>e[ut]!==t[ut],pr=(e,t)=>e[ut]>=t[ut],ar=(e,t)=>e[ut]>t[ut],dr=(e,t)=>e[ut]<t[ut]?{...e,[ut]:t[ut]+mr}:e,$n=(e,t)=>{for(let c=0,r=t.length;c<r;c++){const l=t[c],C=l[Dt],b=e.get(C);if(b===void 0)return!0;if(Pn(b,l))return!0;e.delete(C)}return!!e.size},Qn=(e,t)=>{let c=0;for(let r=0,l=t.length;r<l;r++){const C=t[r],b=C[Dt],w=e.get(b);(w===void 0||Pn(w,C))&&c++,e.delete(b)}return c+=e.size,c},qn=(e,t)=>{const c=[],r=[];for(let l=0,C=t.length;l<C;l++){const b=t[l],w=b[Dt],B=e.get(w);B===void 0?c.push({[Dt]:w,[ut]:b[ut]}):Pn(B,b)&&r.push(dr(B,b)),e.delete(w)}return e.forEach(l=>{r.push(l)}),{deleteList:c,updateList:r}},Sn=(e,t,c,r)=>{let l=!1;const C=e.reduce(Wt,new Map),b=t.reduce(Wt,new Map);for(const w of c){const B=w[Dt],K=C.get(B);if(K!==void 0&&pr(K,w)){r(void 0,w),l=!0;continue}const ce=b.get(B);if(ce!==void 0&&(b.delete(B),ar(ce,w))){r(ce,w),l=!0;continue}r(w,w)}return b.forEach(w=>{r(w,void 0),l=!0}),l},Wt=(e,t)=>e.set(t[Dt],t),pc=(e,t)=>$n(new Map(Object.entries(e)),Object.values(t)),ac=(e,t)=>Qn(new Map(Object.entries(e)),Object.values(t)),dc=(e,t)=>qn(new Map(Object.entries(e)),Object.values(t)),hc=(e,t)=>{let{deleteList:c,updateList:r}=t;const l={};return Sn(c,r,Object.values(e),(b,w)=>{b!==void 0&&(l[b[Dt]]=b)})?l:e},fc=(e,t)=>$n(e.reduce(Wt,new Map),t),gc=(e,t)=>Qn(e.reduce(Wt,new Map),t),yc=(e,t)=>qn(e.reduce(Wt,new Map),t),hr=(e,t)=>{let{deleteList:c,updateList:r}=t;const l=[];return Sn(c,r,e,(b,w)=>{b!==void 0&&l.push(b)})?l:e},bc=(e,t)=>{if(e===void 0||t===void 0||e.dataMap!==t.dataMap&&hasObjectPatch(e.dataMap,t.dataMap))return!0;if(e.itemListMap!==t.itemListMap){const c=new Set([...Object.keys(e.itemListMap),...Object.keys(t.itemListMap)]);for(const r of c){const l=e.itemListMap[r]||[],C=t.itemListMap[r]||[];if(e.dataMap[r]!==void 0&&hasArrayWithKeyPatch(l,C))return!0}}return!1},Ec=(e,t)=>{if(e===void 0)return 1;if(t===void 0)return Object.keys(e.dataMap).length+Object.keys(e.itemListMap).length;let c=0;if(e.dataMap!==t.dataMap&&(c+=countObjectPatch(e.dataMap,t.dataMap)),e.itemListMap!==t.itemListMap){const r=new Set([...Object.keys(e.itemListMap),...Object.keys(t.itemListMap)]);for(const l of r){const C=e.itemListMap[l]||[],b=t.itemListMap[l]||[];e.dataMap[l]!==void 0&&(c+=countArrayWithKeyPatch(C,b))}}return c},kc=function(e,t){t===void 0&&(t=fr);const c=[];if(e.dataMap!==t.dataMap){const{deleteList:r,updateList:l}=generateObjectPatch(e.dataMap,t.dataMap);(r.length||l.length)&&c.push({type:PB_PATCH_SCREEN_STATE_DATA,deleteList:r,updateList:l})}if(e.itemListMap!==t.itemListMap){const r=new Set([...Object.keys(e.itemListMap),...Object.keys(t.itemListMap)]);for(const l of r){const C=e.itemListMap[l]||[],b=t.itemListMap[l]||[];if(e.dataMap[l]===void 0)continue;const{deleteList:w,updateList:B}=generateArrayWithKeyPatch(C,b);(w.length||B.length)&&c.push({type:PB_PATCH_SCREEN_STATE_ITEM_LIST,stateCid:l,deleteList:w,updateList:B})}}return c},fr={screenMetaCid:void 0,dataMap:{},itemListMap:{}},gr=(e,t)=>{if(t.length===0)return e;let{dataMap:c,itemListMap:r}=e;for(const{type:l,stateCid:C,deleteList:b,updateList:w}of t)switch(l){case or:{const B=c,K={};c=Sn(b,w,Object.values(B),(te,_e)=>{te===void 0?r=(0,nn.i7)(r,_e.cid):(K[te.cid]=te,r[te.cid]===void 0&&(r[te.cid]=[]))})?K:B;break}case cr:{if(c[C]===void 0)break;const B=r[C]||[],K=hr(B,{deleteList:b,updateList:w});r=(0,nn.iA)(r,C,K);break}}return e=(0,nn.iA)(e,"dataMap",c),e=(0,nn.iA)(e,"itemListMap",r),e},ei=function(e,t,c){if(t===void 0&&(t=[]),Xn(e),t.length===0)return e;let r=_r(e);for(const l of t){if(sr(l),l.cid!==e.cid)throw new Error("[applyScreenPatchObjectList] unexpected patch cid: "+l.cid+", expect: "+e.cid);r=gr(r,l.statePatchList)}return e=ur(r,c),e},yr=async e=>{let{projectBufferData:t,parseConcatGzipDataToObjectList:c,projectMetaType:r}=e;const l=await c(t);return br(l,r)},br=(e,t)=>{const c={},r=C=>{let b=c[C];return b===void 0&&(b=[],c[C]=b),b};return e.forEach(C=>r(C.cid).push(C)),Object.values(c).map(C=>{let[b,...w]=C;return b=ti(b,t),w.length&&(b=ei(b,w,t)),b=ti(b,t),b})},ti=(e,t)=>{Xn(e);const c=r=>r.mtime!==void 0?r:{...r,mtime:0};return Yn(e.cid,e.stateList.map(r=>Zn(c(r.data),r.itemList.map(c),t)))},Mc=async e=>{let{projectScreenData:t,parseConcatGzipDataToObjectList:c,projectMetaType:r}=e;const[l,...C]=await c(t);return ei(l,C,r)};var Er=n(35608),ni=n(30388);const{Blob:rn}=window,kr=e=>e instanceof ArrayBuffer?e:parseBlobAsArrayBuffer(e),Cc=async e=>new rn([gzip(new Uint8Array(await parseBlobAsArrayBuffer(new rn([JSON.stringify(e)]))))]),wc=async e=>JSON.parse(await parseBlobAsText(new rn([gunzip(new Uint8Array(await kr(e)))]))),Mr=e=>{const t=[];let c=0,r=1;for(;r>0;){const l=new Er.Inflate;if(l.push(new Uint8Array(e,c)),l.err)throw new Error("[gunzipAsArrayBufferList|pako] errorCode: "+l.err+", message: "+l.msg);t.push(l.result),c+=l.strm.total_in,r=l.strm.avail_in}return t},Cr=async e=>{const t=e instanceof ArrayBuffer?e:await(0,ni.H)(e),c=Mr(t),r=[];for(const l of c){const C=await(0,ni.n8)(new rn([l]));for(const b of C.split("\n"))b&&b.length>2&&r.push(JSON.parse(b))}return r},{fetch:on}=window,Pc=async e=>{const t=await on(e,{credentials:"same-origin"});if(!t.ok)throw new Error("[fetchGetHead] failed with "+t.status+": "+e)},vn=async(e,t)=>{const c=new Error(e);return c.payload={...await t.json().catch(()=>null),status:t.status},c},wr=async e=>{const t=await on(e,{credentials:"same-origin"});if(!t.ok)throw await vn("[fetchGetJSON] failed with "+t.status+": "+e,t);return t.json()},Sc=async(e,t)=>{const c=await on(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"});if(!c.ok)throw await vn("[fetchPostJSON] failed with "+c.status+": "+e,c);return c.json()},Pr=async(e,t)=>{const c=await on(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"});if(!c.ok)throw await vn("[fetchPostBlob] failed with "+c.status+": "+e,c);return c.blob()},Sr=async e=>{let{projectMetaCid:t,projectMetaType:c,screenMetaCidList:r,projectBasicEncryptedPassword:l,accessToken:C=""}=e;if(r.length===0)return[];const b="/project-buffer/"+ve(c)+"/all/"+t+"?password="+l+"&access_token="+C,w=await Pr(b,{localKeyList:r});return await yr({projectBufferData:w,parseConcatGzipDataToObjectList:Cr,projectMetaType:c})},It=async e=>{let{projectMetaList:t,screenMetaList:c,projectBasicEncryptedPassword:r="",accessToken:l=""}=e;const C=[];for(const b of t){const w=c.filter(K=>K.project_meta_cid===b.cid).map(K=>K.cid);w.length>2048&&console.warn("[fdPSOL] big proj: "+w.length);const B=(0,j.eO)(w,1024);for(const K of B)C.push(...await Sr({projectMetaCid:b.cid,projectMetaType:b.type,screenMetaCidList:K,projectBasicEncryptedPassword:r,accessToken:l}))}return C},vc=async e=>{let{userLocale:t}=e;const{user_combo_groups:c,screen_aligns:r,project_metas:l,screen_glues:C,screen_metas:b}=await fetchGetJSON("/api/library/v3/project_upper/user_combo_groups");console.log("[fdUSG] pm#"+l.length+" sg#"+C.length+" sm#"+b.length+" | ucg#"+c.length+" sa#"+r.length);const w=await It({projectMetaList:l,screenMetaList:b});return{userComboGroupList:c,screenAlignList:r,projectMetaList:l,screenGlueList:C,screenMetaList:b,projectScreenObjectList:w}},Tc=async e=>{let{projectBasicCid:t,userLocale:c}=e;const{project_basic:r,screen_aligns:l,project_metas:C,screen_glues:b,screen_metas:w}=await fetchGetJSON("/api/upper/web_v1/basics/"+t);console.log("[fdPB] pm#"+C.length+" sg#"+b.length+" sm#"+w.length+" | sa#"+l.length);const B=await It({projectMetaList:C,screenMetaList:w});return{projectBasic:r,screenAlignList:l,projectMetaList:C,screenGlueList:b,screenMetaList:w,projectScreenObjectList:B}},vr=async e=>{let{projectBasicAccessToken:t,projectBasicEncryptedPassword:c="",userLocale:r,projectVersion:l}=e;const{project_basic:C,screen_aligns:b,project_metas:w,screen_glues:B,screen_metas:K}=await wr("/api/upper/web_v1/basics/"+t+"?password="+c+(l?"&version="+l:"")),ce=B.find(Me=>Me.type===h.PROJECT_TRASHCAN),te=ce?K.filter(Me=>Me.screen_glue_cid!==ce.cid):K;console.log("[fdPB+] pm#"+w.length+" sg#"+B.length+" sm#"+K.length+"/"+te.length+" | sa#"+b.length);const _e=await It({projectMetaList:w,screenMetaList:te,projectBasicEncryptedPassword:c,accessToken:t});return{projectBasic:C,screenAlignList:b,projectMetaList:w,screenGlueList:B,screenMetaList:te,projectScreenObjectList:_e}},Oc=async e=>{let{projectBasicAccessToken:t,projectBasicEncryptedPassword:c="",userLocale:r}=e;const{project_basic:l,screen_aligns:C,project_metas:b,screen_glues:w,screen_metas:B}=await fetchGetJSON("/api/upper/web_v1/basics/"+t+"?password="+c);console.log("[fdPBbAT] pm#"+b.length+" sg#"+w.length+" sm#"+B.length+" | sa#"+C.length);const K=await It({projectMetaList:b,screenMetaList:B,projectBasicEncryptedPassword:c,accessToken:t});return{projectBasic:l,screenAlignList:C,projectMetaList:b,screenGlueList:w,screenMetaList:B,projectScreenObjectList:K}},Ac=async e=>{let{projectUpperCid:t,isFromIframe:c=!1}=e;const{market_template:r,screen_aligns:l,project_metas:C,screen_glues:b,screen_metas:w}=await fetchGetJSON("/api/community/v1/market_template/"+t+(c?"?is_from_iframe=true":""));console.log("[fdMT] pm#"+C.length+" sg#"+b.length+" sm#"+w.length+" | sa#"+l.length);const B=await It({projectMetaList:C,screenMetaList:w});return{projectUpper:r,screenAlignList:l,projectMetaList:C,screenGlueList:b,screenMetaList:w,projectScreenObjectList:B}},xc=async e=>{let{projectUpperCid:t,isFromIframe:c=1}=e;const{data:r,market_template:l,project_metas:C}=await fetchGetJSON("/api/community/v1/market_template/"+t+(c?"?is_from_iframe=true":""));return{screenMetaList:r,projectUpper:l,projectMetaList:C}},Dc=async e=>{let{projectUpperCid:t}=e;const{reviewable_project:c,screen_aligns:r,project_metas:l,screen_glues:C,screen_metas:b}=await fetchGetJSON("/api/community/v1/reviewable_project/"+t);console.log("[fdRP] pm#"+l.length+" sg#"+C.length+" sm#"+b.length+" | sa#"+r.length);const w=await It({projectMetaList:l,screenMetaList:b});return{projectUpper:c,screenAlignList:r,projectMetaList:l,screenGlueList:C,screenMetaList:b,projectScreenObjectList:w}},Ic=async e=>{let{projectUpperCid:t}=e;const{reviewable_project:c,screen_aligns:r,project_metas:l}=await fetchGetJSON("/api/community/v1/reviewable_project/"+t);return{projectUpper:c,projectMetaList:l,screenAlignList:r}},Bc=async e=>{let{projectUpperCid:t}=e;const{product:c,screen_aligns:r,project_metas:l,screen_glues:C,screen_metas:b}=await fetchGetJSON("/api/upper/web_v1/product/"+t);console.log("[fdCP] pm#"+l.length+" sg#"+C.length+" sm#"+b.length+" | sa#"+r.length);const w=await It({projectMetaList:l,screenMetaList:b});return{projectUpper:c,screenAlignList:r,projectMetaList:l,screenGlueList:C,screenMetaList:b,projectScreenObjectList:w}},Rc=async(e,t)=>{let{teamCid:c,userLocale:r}=e;const{name:l,type:C,attr:b={},device:w,model:B,width:K,height:ce,subProject:te,zboardTag:_e,visibility:Me}=t,Ie=UPPER_META_PROJECT_BASIC,{userId:je,upperCid:Ve,zboardTabs:qe,projectMetaCid:lt}=await fetchPostJSON("/project-buffer/"+C+"/check-init/project-upper?upperType="+Ie,{presetOption:{locale:r,name:l,type:C,device:w,model:B,width:K,height:ce},railsExtra:{team_cid:c,visibility:Me,name:l,type:C,attr:b,device:w,model:B,width:K,height:ce,subProject:te,zboardTag:_e}});return{userId:je,upperCid:Ve,upperType:Ie,zboardTabs:qe,projectMetaCid:lt}},jc=async e=>{let{projectBasicCid:t,projectBasicType:c,teamCid:r}=e;const l=UPPER_META_PROJECT_BASIC,{userId:C,upperCid:b,projectMetaCid:w}=await fetchPostJSON("/project-buffer/"+c+"/check-duplicate/project-upper?upperAction=duplicate-project-basic&upperCid="+t,{railsExtra:{team_cid:r}});return{userId:C,upperCid:b,upperType:l,projectMetaCid:w}},Lc=async e=>{let{upperCid:t,projectMetaCid:c,projectMetaType:r,screenGlueCid:l,screenMetaCidList:C,screenGlueCidList:b=[],nextUpperCid:w,nextProjectMetaCid:B,nextScreenGlueCid:K}=e;const{userId:ce}=await fetchPostJSON("/project-buffer/"+r+"/check-transfer/screen-meta?upperCid="+t,{projectMetaCid:c,screenGlueCid:l,screenMetaCidList:C,screenGlueCidList:b,nextUpperCid:w,nextProjectMetaCid:B,nextScreenGlueCid:K});return{userId:ce,upperCid:t,nextUpperCid:w}},Fc=async e=>{let{encryptedPassword:t,accessToken:c}=e;const{urlHtmlZip:r}=await fetchPostJSON("/nodekiq/build-html-zip",{encryptedPassword:t,accessToken:c});return{urlHtmlZip:r}},zc=async e=>{let{encryptedPassword:t,accessToken:c}=e;const{urlApk:r}=await fetchPostJSON("/nodekiq/build-apk",{encryptedPassword:t,accessToken:c});return{urlApk:r}};var Tn=n(73752);const Uc=e=>{let{isVersions:t}=e;return{requestPreviewSetting:ri,requestPreviewInitialData:ii,requestProjectFullDataByAccessToken:oi,updateProjectBasicsInfo:Ar,requestPreviewInitialData4ReadOnlyV2:Tr}},ii=async e=>{let{projectAccessToken:t,projectEncryptedPassword:c}=e;const r=c?"&password="+c:"";return(0,Tn.EE)("/api/upper/web_v1/design/readonly_initial?access_token="+t+r)},Tr=async e=>{let{projectAccessToken:t,view_mode:c}=e;return fetchGetJSON("/api/flat/web_v1/preview/initial?access_token="+t+"&view_mode="+c)},ri=e=>{let{projectAccessToken:t,password:c}=e;return(0,Tn.EE)("/api/upper/web_v1/preview/setting?access_token="+t+"&password="+(c||""))},Or=e=>{let{projectAccessToken:t,password:c}=e;return(0,Tn.EE)("/api/flat/web_v1/preview/setting?access_token="+t+"&password="+(c||""))},oi=async e=>{let{projectAccessToken:t,projectEncryptedPassword:c,userLocale:r,projectVersion:l}=e;const C=await vr({projectBasicAccessToken:t,projectBasicEncryptedPassword:c,userLocale:r,projectVersion:l});if(!C)return;const{projectMetaList:[b],screenGlueList:w,screenMetaList:B,projectScreenObjectList:K,projectBasic:ce,screenAlignList:te}=C;return{projectMeta:b,screenGlueList:w,screenMetaList:B,projectScreenObjectList:K,projectBasic:ce,screenAlignList:te}},Ar=(e,t)=>fetchPutJSON("/api/upper/web_v1/basics/"+e,{...t}),Nc=(e,t)=>fetchGetJSON("/api/upper/web_v1/basics/auth/"+e+"?password="+t),Gc={requestPreviewSetting:ri,requestPreviewSettingV2:Or,requestPreviewInitialData:ii,requestProjectFullDataByAccessToken:oi};var xr=n(70103),ci=n(37780),Dr=n(23895),Ir=n(82042),nt=n(35269);const Br={canUploadToSquare:!1},si=function(e){e===void 0&&(e="POPUP-HELPER-ROOT");const t=document.createElement("div");t.id=e,document.body.appendChild(t);const c=(0,xr.MT)(Dr.Z);E.render((0,nt.jsx)(ci.zt,{store:c,children:(0,nt.jsx)(Ir.Z,{})}),t);const{confirmAsync:r,alertAsync:l,alertAsyncWide:C,alertAsyncBlocked:b,promptGetPasswordAsync:w,loginAsync:B,teamSelectModalAsync:K,sharingAsync:ce,chargeAsync:te,upgradeChatGPTAsync:_e}=Rr(c.dispatch);return{confirmAsync:r,alertAsync:l,alertAsyncWide:C,alertAsyncBlocked:b,promptGetPasswordAsync:w,loginAsync:B,teamSelectModalAsync:K,sharingAsync:ce,chargeAsync:te,upgradeChatGPTAsync:_e,destroy:()=>{E.unmountComponentAtNode(t),t.remove()}}},Rr=e=>({confirmAsync:te=>{let{className:_e,title:Me,desc:Ie,isHTML:je,confirmText:Ve,cancelText:qe,isClose:lt,theme:rt}=te;return new Promise(At=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,className:_e,title:Me,desc:Ie,isHTML:je,type:"alert",alertType:"confirm",canClose:lt!==!1,canCancel:!0,canConfirm:!0,cancelText:qe,confirmText:Ve,theme:rt,onCancel:()=>At(!1),onConfirm:()=>At(!0)}}}))},alertAsync:te=>{let{title:_e,desc:Me,isHTML:Ie,confirmText:je}=te;return new Promise(Ve=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:_e,desc:Me,isHTML:Ie,type:"alert",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:je,onConfirm:()=>Ve()}}}))},alertAsyncWide:te=>{let{title:_e,desc:Me,isHTML:Ie,confirmText:je}=te;return new Promise(Ve=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:_e,desc:Me,isHTML:Ie,type:"functional",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:je,onConfirm:()=>Ve()}}}))},alertAsyncBlocked:te=>{let{title:_e,desc:Me,isHTML:Ie,confirmText:je}=te;return new Promise(Ve=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:_e,desc:Me,isHTML:Ie,type:"alert",alertType:"alert",canClose:!1,canCancel:!1,canConfirm:!0,confirmText:je,onConfirm:()=>Ve()}}}))},promptGetPasswordAsync:(te,_e)=>new Promise(Me=>e({type:"modal:update:state",payload:{previewAuthModal:{isOpen:te,isWrongPwd:_e,onConfirm:Ie=>Ie&&Me(Ie)}}})),loginAsync:te=>{let{onCancel:_e=Ht,onConfirm:Me=Ht,type:Ie="signin",source:je}=te;return e({type:"modal:update:state",payload:{loginModal:{source:je,isOpen:!0,type:Ie,onCancel:_e,onConfirm:Me}}})},teamSelectModalAsync:te=>{let{projectCid:_e="",onCancel:Me=Ht,onConfirm:Ie=Ht}=te;return e({type:"modal:update:state",payload:{teamSelectModal:{isOpen:!0,projectCid:_e,onCancel:Me,onConfirm:Ie}}})},sharingAsync:te=>{let{project:_e,theme:Me,isGuestMode:Ie,screenMetaList:je=[],onUpdateProject:Ve=Ht,extraInfo:qe=Br,screenMetaCidToVisit:lt,user:rt}=te;return e({type:"modal:update:state",payload:{sharingModal:{isOpen:!0,project:_e,theme:Me,extraInfo:qe,isGuestMode:Ie,screenMetaList:je,onUpdateProject:Ve,screenMetaCidToVisit:lt,user:rt}}})},chargeAsync:te=>e({type:"modal:update:state",payload:{chargeOverlay:{isOpen:!0,...te}}}),upgradeChatGPTAsync:te=>e({type:"modal:update:state",payload:{upgradeChatGPTModal:{isOpen:!0,...te}}})}),Ht=()=>{},Kc=e=>localStorageGetItem(e+"_pwd"),Wc=(e,t)=>localStorageSetItem(e+"_pwd",t),li=async(e,t)=>{let c;try{c=await checkAuthorization(e,t)}catch(r){c=r}return c},Hc=async e=>{const t=createPopupHelper();let c=!1,r=md5(await t.promptGetPasswordAsync(!0,!1));for((await li(e,r)).status===403&&(c=!0);c;)r=md5(await t.promptGetPasswordAsync(!0,c)),(await li(e,r)).status===403?c=!0:c=!1;return t.promptGetPasswordAsync(!1),r},Vc=(e,t,c)=>{if(!e)return!0;if(t){var r;return(c==null||(r=c.permissions.find(C=>C.user_id===e.id))==null?void 0:r.role)===void 0}else return!(e.id===c.owner_id)},jr={api:{}},Lr=e=>{Object.assign(jr,e)};var _i=n(27239),cn=n(85322),ui=n(24011),On=n(95485);const mi=async e=>{let{projectMetaCid:t}=e;await(0,On.By)({userId:void 0,flpakKey:t,onTransferError:On.$p,onReadOnlyError:On.Yo,isDummyCmt:!0,__fetchFlpakAsync:p.Ev},void 0)};var Jc=n(35517);const Fr=async e=>{let{projectBasicCid:t,accessToken:c,password:r}=e;try{const{userId:l,flatKey:C}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+t+"&access_token="+c+"&password="+r);return{userId:l,flatKey:C}}catch(l){await apiErrorModals(l)}},Yc=async e=>{let{projectBasic:t,password:c,accessToken:r}=e;{const l=r||t.access_token,{userId:C,flatKey:b}=await Fr({projectBasicCid:t.cid,accessToken:l,password:c});console.log("[p2edit] uId="+C+" key="+b+" pbCid="+t.cid);const w=!!C,B=w&&!getIsInPreviewViewMode();await initRootSdk({userId:C,flpakKey:b,onTransferError,onReadOnlyError,isAllowDat:w?"RO":!1,isAllowCmt:w,isAllowCur:B,token:l,passwd:c},t)}};var zr=n(44069);const pi=function(e,t,c){const r=t.getGuidesData()||"[]",l=new Set(JSON.parse(r)),C=new Set,b=new Map;return{checkGuideHasShown:w=>l.has(w),checkGuideToBeShown:w=>C.has(w),getState:()=>({commonGuidesHasShown:Array.from(l),commonGuidesToBeShown:Array.from(C),mountGuidesMap:b}),tryToShowGuide:w=>{var B;if(l.has(w)||!((B=MB)!=null&&(B=B.user)!=null&&B.id))return;const K=document.getElementById("MD_"+w);if(K){K.style.display="block";return}C.add(w),(0,zr.k)(w,e,c)},markGuideAsRead:w=>{l.add(w),t.setGuidesData(JSON.stringify(Array.from(l)))},batchMarkGuideAsRead:w=>{w.forEach(B=>l.add(B)),t.setGuidesData(JSON.stringify(Array.from(l)))},closeGuide:w=>{const B=document.getElementById("MD_"+w);B&&B.parentNode&&B.parentNode.removeChild(B)},closeAllGuide:()=>{const w=document.getElementById("GUIDES");w&&w.parentNode&&w.parentNode.removeChild(w)},removeGuide:w=>{l.delete(w),t.setGuidesData(JSON.stringify(Array.from(l)))},tryToContinueMountGuide:(w,B)=>{const K=b.get(w);K&&typeof(K==null?void 0:K.handleContinue)=="function"&&K.handleContinue(B)},tryToResizeMountGuide:w=>{const B=b.get(w);B&&typeof(B==null?void 0:B.handleResize)=="function"&&B.handleResize()},tryToCloseMountGuide:w=>{const B=b.get(w);B&&typeof(B==null?void 0:B.handleClose)=="function"&&B.handleClose()},registerMountGuideCallback:(w,B)=>{const K=b.get(w)||{};b.set(w,{...K,...B})},removeMountGuideCallback:(w,B)=>{if(!B){b.delete(w);return}const K=b.get(w)||{};b.set(w,{...K,[B]:void 0})}}},Zc=e=>{let{store:t,commonGuidesData:c,isDesign:r,isPreview:l}=e;MB.commonGuideHelper=pi(t,{getGuidesData:()=>c,setGuidesData:updateUserCommonGuidesData},{isDesign:r,isPreview:l})},Ur=e=>{let{store:t,isDesign:c,isPreview:r}=e;const l={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:C}}=l;MB.commonGuideHelper=pi(t,{getGuidesData:()=>C,setGuidesData:()=>{}},{isDesign:c,isPreview:r})};var ai=n(68035);const{MB:$e}=window;$e.f.inSharing=!0;const Xc=e=>{let{initialData:t,designOptions:c,previewOptions:r,sharing:l,password:C,api:{updateProjectBasicsInfo:b}}=e;const{runnerController:w,messageBucket:B,webpackInterface:K,PreviewApp:ce}=createPreviewRelated(getPreviewComponentByOptions(r));return setExternal({api:{updateProjectBasicsInfo:b}}),Object.assign($e,{runnerController:w,messageBucket:B,webpackInterface:K,global:{popupHelper:createPopupHelper(),designOptions:c}}),$e.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:r}}),{requestData:async te=>{let{projectAccessToken:_e,isPasswordRequired:Me,projectBasicCid:Ie}=te;const{user:je,org:Ve,preference:qe,canEditByCurrentUser:lt,project_basic:rt,project_meta:At,space:gi}=t,bo=getIsNeedInputPassword(je,gi,rt);let ln=loadProjectEncryptedPassword(_e);const Eo=await tryCheckAuthorization(_e,ln);if(Me&&bo&&Eo.status===403){var yi;$e==null||(yi=$e.messageBucket)==null||yi.send("ready"),ln=await checkAuthorizationWithPrompt(_e),saveProjectEncryptedPassword(_e,ln)}try{await requestProjectFullDataFlat4ReadOnly({projectBasic:rt,password:ln||C,accessToken:_e})}catch(Jt){return setTimeout(()=>{var Ei,ki;return $e==null||(Ei=$e.messageBucket)==null?void 0:Ei.send("mobileLoadProjectError",{errMsg:"\u4EC5\u4F01\u4E1A\u6210\u5458\u53EF\u89C1-"+($e!=null&&(ki=$e.user)!=null&&ki.id?"\u5DF2\u767B\u5F55\u4F46\u975E\u4F01\u4E1A\u6210\u5458":"\u672A\u767B\u5F55")})},1e3),crashedPageWithUser(Jt)}$e.webpackInterface.store.dispatch({type:"entry:preview:update:current:sharing",payload:{sharing:l}}),$e.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:qe||{}}});const ko=lt&&(At.is_org_project?!(rt!=null&&rt.expired):!(rt!=null&&rt.expired)||je.apps.length<=je.free_projects_count);Object.assign($e,{user:je||{},canEditByCurrentUser:ko,org:Ve||void 0}),$e.webpackInterface.store.dispatch({type:"entry:state:init"}),hideLoading();let bi="[]";try{const{guide:Jt}=await requestUserCommonGuidesData();bi=(Jt==null?void 0:Jt.workspace_guides)||"[]"}catch(Jt){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}return initCommonGuide({store:$e.webpackInterface.store,commonGuidesData:bi,isDesign:!1,isPreview:!0}),{projectAlike:rt,projectMeta:At,projectShare:l}},renderPreview:(te,_e,Me,Ie)=>{const je=sharingVisibleCrashEffect(Ie);if(je)return je;const Ve=new KeyboardManager;return _jsx(KeyboardManagerContext.Provider,{value:Ve,children:_jsx(TooltipsManagerProvider,{children:_jsx(ce,{store:K.store,projectAlike:te,projectMeta:_e,projectShare:Ie})})})}}},Nr=e=>{let{initialData:t,designOptions:c,previewOptions:r,sharing:l,api:{updateProjectBasicsInfo:C}}=e;const{isMobile:b,isIOSClient:w,isStandAlone:B}=r;(B||w)&&(document.documentElement.style.height="100vh");const{runnerController:K,messageBucket:ce,webpackInterface:te,PreviewApp:_e}=(0,m.o)(y(r));return Lr({api:{updateProjectBasicsInfo:C}}),Object.assign($e,{runnerController:K,messageBucket:ce,webpackInterface:te,global:{popupHelper:si(),designOptions:c}}),$e.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:r}}),{requestData:async Me=>{let{projectAccessToken:Ie,projectBasicCid:je}=Me;const{user:Ve,org:qe,preference:lt,project_basic:rt,project_meta:At}=t;return await mi({projectMetaCid:At.cid}),$e.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:l}}),$e.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:lt||{}}}),Object.assign($e,{user:Ve||{},canEditByCurrentUser:!1,org:qe||void 0}),$e.webpackInterface.store.dispatch({type:"entry:state:init"}),(0,_i.Z)(),{projectAlike:rt,projectMeta:At}},renderPreview:(Me,Ie,je,Ve)=>{(0,ai.K)(Ve);const qe=new cn.Sm,lt=new URLSearchParams(location.search),rt=b?"preview":lt.has("inspect")?"inspect":lt.has("comment")?"comment":"preview";return(0,nt.jsx)(cn.XC.Provider,{value:qe,children:(0,nt.jsx)(ui.Z,{children:(0,nt.jsx)(_e,{store:te.store,previewMode:rt,projectAlike:Me,projectMeta:Ie,projectShare:Ve})})})}}},$c=async e=>{let{initialData:t,previewOptions:c,api:r,projectAccessToken:l,projectEncryptedPassword:C,isPasswordRequired:b,$root:w,projectBasicCid:B,sharing:K,password:ce}=e;const te={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{requestData:_e,renderPreview:Me}=initPreview({api:r,initialData:t,previewOptions:c,designOptions:te,sharing:K,password:ce}),{projectAlike:Ie,projectMeta:je,projectShare:Ve}=await _e({projectAccessToken:l,projectEncryptedPassword:C,isPasswordRequired:b,projectBasicCid:B}),qe=location.hash||"",lt=qe&&qe.startsWith("#screen=")&&qe.substr(8);ReactDOM.render(Me(Ie,je,lt,Ve),w)},Gr=async e=>{let{initialData:t,previewOptions:c,api:r,projectAccessToken:l,projectEncryptedPassword:C,isPasswordRequired:b,$root:w,projectBasicCid:B,sharing:K}=e;const ce={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{requestData:te,renderPreview:_e}=Nr({api:r,initialData:t,previewOptions:c,designOptions:ce,sharing:K}),{projectAlike:Me,projectMeta:Ie}=await te({projectAccessToken:l,projectEncryptedPassword:C,isPasswordRequired:b,projectBasicCid:B}),je=location.hash||"",Ve=je&&je.startsWith("#screen=")&&je.substr(8);E.render(_e(Me,Ie,Ve),w)};var An=n(49650),Kr=n(29402),Wr=n(39715),Hr=n(15514),Vr=n(7966),di=n(444);class Jr extends v.PureComponent{constructor(t){super(t);const{store:c,projectBasic:r,projectMeta:l,isHtmlZip:C}=t,{screenKey:b,canvasKey:w}=(0,di.Qw)();this.state={visibleIsEmpty:!1};try{const B=(0,di.FZ)(b);c.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:r,projectMeta:l,screenCid:B,canvasCid:w,isHtmlZip:C}})}catch(B){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount()}render(){const{store:t}=this.props;return this.state.visibleIsEmpty?(0,ai.L)():(0,nt.jsx)(ci.zt,{store:t,children:(0,nt.jsx)(Vr.Z,{children:(0,nt.jsx)(Hr.Z,{})})})}}var Yr=n(32380),Qc=n(16426),Zr=n(98388),Xr=function(e){return e[e.Design=0]="Design",e[e.Experience=1]="Experience",e[e.ReadOnly=2]="ReadOnly",e[e.Version=3]="Version",e[e.HTMLZip=4]="HTMLZip",e[e.Community=5]="Community",e}(Xr||{}),$r=n(29184),Qr=n(11230);const qr=e=>{let{initialData:t,designOptions:c,onUpdateAiState:r,global:l,onUpdateSharing:C}=e;const{user:b,org:w,team:B,preference:K,orgList:ce,user_fcg:te,org_fcg:_e,space:Me,canEditByCurrentUser:Ie,solo_org:je}=t,{currentUser:Ve,currentOrg:qe}=(0,Qr.t)({user:b,org:w});(0,Zr.PX)((0,$r.F)()),Object.assign(MB,{user:Ve||{},currentOrg:qe,canEditByCurrentUser:Ie,global:{...l,popupHelper:si(),experienceLoginModalHelper:Yr.m}}),MB.action("current:update:state",{currentOrg:qe,currentTeam:B,currentUser:Ve,orgList:ce,user_fcg:te,org_fcg:_e,currentSpace:Me}),MB.action("update:design:options",{designOptions:c}),b!=null&&b.id&&MB.action("entry:init:preference",{preference:K}),MB.action("entry:init:community:params"),r&&r({user:Ve,org:qe}),C&&C()},qc=async e=>{let{designStore:t}=e,c="[]";try{const{guide:r}=await requestUserCommonGuidesData();c=r==null?void 0:r.workspace_guides}catch(r){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await initCommonGuide({store:t,commonGuidesData:c,isDesign:!0,isPreview:!1})},es=async e=>{let{type:t,projectBasicCid:c}=e;switch(t){case DesignType.Design:return requestProjectFullDataFlat(c);case DesignType.Experience:return requestExperienceFullDataFlat(c);default:throw new Error(t+" not found in known design types for "+c)}},eo=e=>{let{designOptions:t,initialData:c,onComponentDidMount:r}=e,l=!1;const C=(0,Wr.t)(MB);return qr({initialData:c,designOptions:t,global:{designOptions:t},onUpdateSharing:()=>{}}),{requestData:async()=>{const{project_basic:b,project_meta:w}=c;return Ur({store:C,isDesign:!0,isPreview:!1}),await mi({projectMetaCid:w.cid}),Object.assign(MB,{tag:b==null?void 0:b.version}),MB.action("update:design:options",{designOptions:MB.global.designOptions}),l=!0,{projectAlike:b,projectMeta:w}},renderDesign:b=>{let{projectAlike:w,projectMeta:B}=b;return l?(0,nt.jsx)(Jr,{store:C,projectBasic:w,projectMeta:B,onComponentDidMount:r,isHtmlZip:!0}):null}}};var to=n(6725),no=n(34788),io=n.n(no);class ro extends v.PureComponent{render(){const{isCollapse:t,renderDesign:c,projectAlike:r,projectMeta:l}=this.props;return(0,nt.jsx)("div",{ref:C=>this.$element=C,className:io()("mb-design-page",{"is-collapse":t}),children:c({projectAlike:r,projectMeta:l})})}}var oo=n(66039);class co extends v.PureComponent{constructor(t){super(t),(0,An.Z)(this,"handleWheelChanged",b=>{if(b.deltaX===0)return;const w=document.getElementById("workspace"),B=w.scrollLeft+w.offsetWidth===w.scrollWidth&&b.deltaX>0,K=w.scrollLeft===0&&b.deltaX<0;(B||K)&&b.preventDefault()}),(0,An.Z)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(oo.T),this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,An.Z)(this,"keyboardManager",new cn.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,projectAlike:null,projectMeta:null};const{designOptions:c,initialData:r}=t,{requestData:l,renderDesign:C}=eo({initialData:r,designOptions:c,onComponentDidMount:this.handleDesignDidMount});this.requestData=l,this.renderDesign=C}componentDidMount(){const{projectUpperCid:t}=this.props;Promise.all([this.requestData(t)]).then(c=>{let[{projectAlike:r,projectMeta:l}]=c;this.setState({projectAlike:r,projectMeta:l},()=>{this.setState({isDataLoaded:!0})});const C=document.getElementById("workspace");C&&C.addEventListener("wheel",this.handleWheelChanged)})}componentWillUnmount(){const t=document.getElementById("workspace");t&&t.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:t,isDataLoaded:c,isDesignCollapse:r,projectAlike:l,projectMeta:C}=this.state,{renderDesign:b}=this;return(0,nt.jsx)(cn.XC.Provider,{value:this.keyboardManager,children:(0,nt.jsx)(ui.Z,{children:(0,nt.jsxs)(to.X,{className:"example-app",children:[c&&(0,nt.jsx)(ro,{isCollapse:r,projectAlike:l,projectMeta:C,renderDesign:b}),t&&(0,nt.jsx)(Kr.S6,{className:"mb-loading"})]})})})}}var so=n(92029);const sn="hzv3",lo="pid",_o="pbj",uo="psol",ts="psv2am",ns=()=>isBasicObject(window[TAG_HTML_ZIP_V3]),Vt=()=>(0,so.hK)(window[sn],"missing htmlZipV3 data"),mo=async()=>(Vt(),window[sn][lo]),hi=async()=>{Vt();const{project_basic:e,screen_aligns:t,project_metas:c,screen_glues:r,screen_metas:l}=window[sn][_o],C=window[sn][uo];return{projectBasic:e,screenAlignList:t,projectMetaList:c,screenGlueList:r,screenMetaList:l,projectScreenObjectList:C}},is=async()=>(Vt(),{artboards:Object.values(window[TAG_HTML_ZIP_V3][TAG_PROJECT_SKETCH_V2_ARTBOARD_MAP]).map(e=>{let{artboard:t}=e;return t})}),rs=async e=>(Vt(),window[TAG_HTML_ZIP_V3][TAG_PROJECT_SKETCH_V2_ARTBOARD_MAP][e]),os=async()=>{Vt();const{project_share:e}=window[TAG_HTML_ZIP_V3][TAG_PROJECT_BASIC_JSON];return{projectShare:e}},fi={requestPreviewInitialData:mo,requestProjectFullDataByAccessToken:async e=>{let{projectEncryptedPassword:t}=e;const{projectMetaList:[c],screenGlueList:r,screenMetaList:l,projectScreenObjectList:C,projectBasic:b,screenAlignList:w}=await hi(),{password:B}=b;if(B&&t!==B)throw new Error("error password");return{projectMeta:c,screenGlueList:r,screenMetaList:l,projectScreenObjectList:C,projectBasic:b,screenAlignList:w}},fetchDataProjectBasic:hi};var po=n(61033),ao=n(49373),ho=n(89719),fo=n(89500);n.p="./mb-proto2/";const go=document.getElementById("workspace"),yo=async()=>{var e,t;const c=a({isHTMLZip:!0});(0,o.tq)()&&((e=document.querySelector("body"))==null||e.classList.add("mobile"));let r=await(0,p.vn)();const{projectUpper:l,projectMeta:C}=r;r={...r,projectName:l.name,project_basic:l,project_meta:C};const{sharing:b}=await(0,ho.ec)({project:l}),{projectName:w}=r,{generateLang:B}=await fo.Ar.loadLLG();await B(),document.title=""+(0,ao.FQ)(l.name||l.title),!ENV.IS_ON_PREMISES&&(0,po.wb)();const{projectAccessToken:K,projectEncryptedPassword:ce,isPasswordRequired:te}=r,_e=(t=new URLSearchParams(location.search))==null?void 0:t.get("view_mode"),Me=window.HZv5_PREVIEW_MODE||"";if(_e?_e==="device":Me==="device")(0,_i.v)(w),await Gr({initialData:r,previewOptions:c,api:fi,projectAccessToken:K,projectEncryptedPassword:ce,isPasswordRequired:te,sharing:b,$root:document.getElementById("workspace")});else{const je={isDesign:!0,isExperience:!1,isLoggedExperience:!1};E.render((0,nt.jsx)(co,{initialData:r,designOptions:je,api:fi,projectAccessToken:K,projectEncryptedPassword:ce,isPasswordRequired:te,sharing:b,isHtmlZip:!0}),go)}};document.addEventListener("DOMContentLoaded",async()=>{await yo()})},30388:(L,D,n)=>{"use strict";n.d(D,{H:()=>O,n8:()=>u});const{Blob:E,FileReader:p}=window,v=R=>s=>new Promise((f,o)=>{const a=new p;a.addEventListener("error",o),a.addEventListener("load",()=>f(a.result)),a[R](s)}),u=v("readAsText"),i=v("readAsDataURL"),O=v("readAsArrayBuffer")},27444:(L,D,n)=>{"use strict";n.d(D,{Up:()=>U,Uv:()=>a,Zv:()=>v,eO:()=>_,z6:()=>p});const E=(d,A,h)=>{if(d[A]===h)return d;const P=[...d];return P[A]=h,P},p=(d,A)=>A>=0&&A<=d.length-1?[...d.slice(0,A),...d.slice(A+1)]:d,v=(d,A,h)=>[...d.slice(0,A),h,...d.slice(A)],u=(d,A,h)=>h===A?d:h<A?[...d.slice(0,h),...d.slice(h+1,A+1),d[h],...d.slice(A+1)]:[...d.slice(0,A),d[h],...d.slice(A,h),...d.slice(h+1)],i=(d,A)=>[...d,A],O=(d,A)=>[A,...d],R=d=>{if(d.length===0)return d;const A=[...d];return A.pop(),A},s=d=>{if(d.length===0)return d;const A=[...d];return A.shift(),A},f=(d,A)=>A&&A.length?[...d,...A]:d,o=(d,A)=>d.includes(A)?d:[...d,A],a=(d,A)=>{const h=d.indexOf(A);return~h?[...d.slice(0,h),...d.slice(h+1)]:d},y=(d,A,h)=>{const P=d.indexOf(h);return~P?u(d,A,P):d},m=(d,A)=>{const h=d.findIndex(A);return~h?[...d.slice(0,h),...d.slice(h+1)]:d},S=(d,A,h)=>{const P=d.findIndex(A);return~P?u(d,h,P):d},U=(d,A,h)=>{const P=d.findIndex(A);if(!~P||d[P]===h)return d;const x=[...d];return x[P]=h,x},M=(d,A,h)=>{const P=d.findIndex(A);if(!~P)return[...d,h];if(d[P]===h)return d;const x=[...d];return x[P]=h,x},j=(d,A,h)=>d.find(A)===void 0?[...d,h]:d,_=(d,A)=>{const h=[];for(let P=0,x=d.length;P<x;P+=A)h.push(d.slice(P,P+A));return h}},92029:(L,D,n)=>{"use strict";n.d(D,{AY:()=>j,Bk:()=>M,M0:()=>W,Z_:()=>i,_L:()=>f,hK:()=>m});var E=n(53705),p=n(11972);const v=(Z,ee,be)=>{throw new Error("[verify|"+Z+"]"+(ee?" "+ee+";":"")+" "+(be||""))},u=(Z,ee)=>(be,Ze)=>{ee(be)||v(Z,Ze,"get: "+(0,p.yY)(be))},i=u("String",E.HD),O=u("Boolean",E.jn),R=u("Truthy",E.fQ),s=u("Number",E.hj),f=u("Integer",E.U),o=u("RegExp",E.Kj),a=u("ArrayBuffer",E.eP),y=u("ObjectAlike",E.$N),m=u("BasicObject",E.i3),S=(Z,ee,be)=>{isObjectKey(Z,ee)||v("ObjectKey",be,"expect to have key: "+ee)},U=(Z,ee,be)=>{isObjectContain(Z,ee)||v("ObjectContain",be,"expect to contain: "+describe(ee))},M=u("Array",E.PH),j=(Z,ee,be)=>{(0,E._e)(Z,ee)||v("ArrayLength",be,"expect length: "+ee+", get: "+((0,E.PH)(Z)?Z.length:(0,p.yY)(Z)))},_=u("Function",E.BV),d=u("PromiseAlike",E.om),A=(Z,ee,be)=>{isOneOf(Z,ee)||v("OneOf",be,"expect one of: ["+ee+"], get: "+describe(Z))},h=(Z,ee)=>{isFunctionThrow(Z)||v("DoThrow",ee)},P=(Z,ee)=>{isFunctionThrow(Z)&&v("DoNotThrow",ee)},x=async(Z,ee)=>{await isFunctionThrowAsync(Z)||v("DoThrowAsync",ee)},ne=async(Z,ee)=>{await isFunctionThrowAsync(Z)&&v("DoNotThrowAsync",ee)},ve=(Z,ee)=>"\nactual: "+(0,p.yY)(Z)+"\nexpect: "+(0,p.yY)(ee),ge=(Z,ee,be)=>{isStrictEqual(Z,ee)||v("StrictEqual",be,ve(Z,ee))},me=(Z,ee,be)=>{isStrictEqual(Z,ee)&&v("NotStrictEqual",be,ve(Z,ee))},W=function(Z,ee,be){be===void 0&&(be="should stringify equal"),(0,E.LP)(Z,ee)||v("StringifyEqual",be,ve(Z,ee))},Q=function(Z,ee,be){be===void 0&&(be="should not stringify equal"),isStringifyEqual(Z,ee)&&v("NotStringifyEqual",be,ve(Z,ee))},Ae=(Z,ee,be)=>{Z&&Z.includes&&Z.includes(ee)||v("Includes",be,"expect "+describe(Z)+" to include "+ee)},we=(Z,ee,be)=>{Z&&Z.includes&&!Z.includes(ee)||v("NotIncludes",be,"expect "+describe(Z)+" to not include "+ee)}},75985:(L,D,n)=>{(function(){var E=n(55983),p=n(97279).utf8,v=n(85884),u=n(97279).bin,i=function(O,R){O.constructor==String?R&&R.encoding==="binary"?O=u.stringToBytes(O):O=p.stringToBytes(O):v(O)?O=Array.prototype.slice.call(O,0):!Array.isArray(O)&&O.constructor!==Uint8Array&&(O=O.toString());for(var s=E.bytesToWords(O),f=O.length*8,o=1732584193,a=-271733879,y=-1732584194,m=271733878,S=0;S<s.length;S++)s[S]=(s[S]<<8|s[S]>>>24)&16711935|(s[S]<<24|s[S]>>>8)&4278255360;s[f>>>5]|=128<<f%32,s[(f+64>>>9<<4)+14]=f;for(var U=i._ff,M=i._gg,j=i._hh,_=i._ii,S=0;S<s.length;S+=16){var d=o,A=a,h=y,P=m;o=U(o,a,y,m,s[S+0],7,-680876936),m=U(m,o,a,y,s[S+1],12,-389564586),y=U(y,m,o,a,s[S+2],17,606105819),a=U(a,y,m,o,s[S+3],22,-1044525330),o=U(o,a,y,m,s[S+4],7,-176418897),m=U(m,o,a,y,s[S+5],12,1200080426),y=U(y,m,o,a,s[S+6],17,-1473231341),a=U(a,y,m,o,s[S+7],22,-45705983),o=U(o,a,y,m,s[S+8],7,1770035416),m=U(m,o,a,y,s[S+9],12,-1958414417),y=U(y,m,o,a,s[S+10],17,-42063),a=U(a,y,m,o,s[S+11],22,-1990404162),o=U(o,a,y,m,s[S+12],7,1804603682),m=U(m,o,a,y,s[S+13],12,-40341101),y=U(y,m,o,a,s[S+14],17,-1502002290),a=U(a,y,m,o,s[S+15],22,1236535329),o=M(o,a,y,m,s[S+1],5,-165796510),m=M(m,o,a,y,s[S+6],9,-1069501632),y=M(y,m,o,a,s[S+11],14,643717713),a=M(a,y,m,o,s[S+0],20,-373897302),o=M(o,a,y,m,s[S+5],5,-701558691),m=M(m,o,a,y,s[S+10],9,38016083),y=M(y,m,o,a,s[S+15],14,-660478335),a=M(a,y,m,o,s[S+4],20,-405537848),o=M(o,a,y,m,s[S+9],5,568446438),m=M(m,o,a,y,s[S+14],9,-1019803690),y=M(y,m,o,a,s[S+3],14,-187363961),a=M(a,y,m,o,s[S+8],20,1163531501),o=M(o,a,y,m,s[S+13],5,-1444681467),m=M(m,o,a,y,s[S+2],9,-51403784),y=M(y,m,o,a,s[S+7],14,1735328473),a=M(a,y,m,o,s[S+12],20,-1926607734),o=j(o,a,y,m,s[S+5],4,-378558),m=j(m,o,a,y,s[S+8],11,-2022574463),y=j(y,m,o,a,s[S+11],16,1839030562),a=j(a,y,m,o,s[S+14],23,-35309556),o=j(o,a,y,m,s[S+1],4,-1530992060),m=j(m,o,a,y,s[S+4],11,1272893353),y=j(y,m,o,a,s[S+7],16,-155497632),a=j(a,y,m,o,s[S+10],23,-1094730640),o=j(o,a,y,m,s[S+13],4,681279174),m=j(m,o,a,y,s[S+0],11,-358537222),y=j(y,m,o,a,s[S+3],16,-722521979),a=j(a,y,m,o,s[S+6],23,76029189),o=j(o,a,y,m,s[S+9],4,-640364487),m=j(m,o,a,y,s[S+12],11,-421815835),y=j(y,m,o,a,s[S+15],16,530742520),a=j(a,y,m,o,s[S+2],23,-995338651),o=_(o,a,y,m,s[S+0],6,-198630844),m=_(m,o,a,y,s[S+7],10,1126891415),y=_(y,m,o,a,s[S+14],15,-1416354905),a=_(a,y,m,o,s[S+5],21,-57434055),o=_(o,a,y,m,s[S+12],6,1700485571),m=_(m,o,a,y,s[S+3],10,-1894986606),y=_(y,m,o,a,s[S+10],15,-1051523),a=_(a,y,m,o,s[S+1],21,-2054922799),o=_(o,a,y,m,s[S+8],6,1873313359),m=_(m,o,a,y,s[S+15],10,-30611744),y=_(y,m,o,a,s[S+6],15,-1560198380),a=_(a,y,m,o,s[S+13],21,1309151649),o=_(o,a,y,m,s[S+4],6,-145523070),m=_(m,o,a,y,s[S+11],10,-1120210379),y=_(y,m,o,a,s[S+2],15,718787259),a=_(a,y,m,o,s[S+9],21,-343485551),o=o+d>>>0,a=a+A>>>0,y=y+h>>>0,m=m+P>>>0}return E.endian([o,a,y,m])};i._ff=function(O,R,s,f,o,a,y){var m=O+(R&s|~R&f)+(o>>>0)+y;return(m<<a|m>>>32-a)+R},i._gg=function(O,R,s,f,o,a,y){var m=O+(R&f|s&~f)+(o>>>0)+y;return(m<<a|m>>>32-a)+R},i._hh=function(O,R,s,f,o,a,y){var m=O+(R^s^f)+(o>>>0)+y;return(m<<a|m>>>32-a)+R},i._ii=function(O,R,s,f,o,a,y){var m=O+(s^(R|~f))+(o>>>0)+y;return(m<<a|m>>>32-a)+R},i._blocksize=16,i._digestsize=16,L.exports=function(O,R){if(O==null)throw new Error("Illegal argument "+O);var s=E.wordsToBytes(i(O,R));return R&&R.asBytes?s:R&&R.asString?u.bytesToString(s):E.bytesToHex(s)}})()},46198:(L,D,n)=>{"use strict";function E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E)}catch(p){console.error(p)}}E(),L.exports=n(23801)},93168:(L,D,n)=>{"use strict";n.d(D,{Z:()=>O});var E=n(7485),p=n(79929),v=n(79573),u=n(14207);function i(R){var s=R.store,f=R.context,o=R.children,a=(0,E.useMemo)(function(){var S=(0,v.X)(s);return{store:s,subscription:S}},[s]),y=(0,E.useMemo)(function(){return s.getState()},[s]);(0,u.L)(function(){var S=a.subscription;return S.onStateChange=S.notifyNestedSubs,S.trySubscribe(),y!==s.getState()&&S.notifyNestedSubs(),function(){S.tryUnsubscribe(),S.onStateChange=null}},[a,y]);var m=f||p.E;return E.createElement(m.Provider,{value:a},o)}const O=i},67887:(L,D,n)=>{"use strict";/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=n(5658),p=typeof Symbol=="function"&&Symbol.for,v=p?Symbol.for("react.element"):60103,u=p?Symbol.for("react.portal"):60106,i=p?Symbol.for("react.fragment"):60107,O=p?Symbol.for("react.strict_mode"):60108,R=p?Symbol.for("react.profiler"):60114,s=p?Symbol.for("react.provider"):60109,f=p?Symbol.for("react.context"):60110,o=p?Symbol.for("react.forward_ref"):60112,a=p?Symbol.for("react.suspense"):60113,y=p?Symbol.for("react.memo"):60115,m=p?Symbol.for("react.lazy"):60116,S=typeof Symbol=="function"&&Symbol.iterator;function U(k){for(var N="https://reactjs.org/docs/error-decoder.html?invariant="+k,pe=1;pe<arguments.length;pe++)N+="&args[]="+encodeURIComponent(arguments[pe]);return"Minified React error #"+k+"; visit "+N+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j={};function _(k,N,pe){this.props=k,this.context=N,this.refs=j,this.updater=pe||M}_.prototype.isReactComponent={},_.prototype.setState=function(k,N){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error(U(85));this.updater.enqueueSetState(this,k,N,"setState")},_.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function d(){}d.prototype=_.prototype;function A(k,N,pe){this.props=k,this.context=N,this.refs=j,this.updater=pe||M}var h=A.prototype=new d;h.constructor=A,E(h,_.prototype),h.isPureReactComponent=!0;var P={current:null},x=Object.prototype.hasOwnProperty,ne={key:!0,ref:!0,__self:!0,__source:!0};function ve(k,N,pe){var De,le={},he=null,Ke=null;if(N!=null)for(De in N.ref!==void 0&&(Ke=N.ref),N.key!==void 0&&(he=""+N.key),N)x.call(N,De)&&!ne.hasOwnProperty(De)&&(le[De]=N[De]);var Le=arguments.length-2;if(Le===1)le.children=pe;else if(1<Le){for(var Ye=Array(Le),Xe=0;Xe<Le;Xe++)Ye[Xe]=arguments[Xe+2];le.children=Ye}if(k&&k.defaultProps)for(De in Le=k.defaultProps,Le)le[De]===void 0&&(le[De]=Le[De]);return{$$typeof:v,type:k,key:he,ref:Ke,props:le,_owner:P.current}}function ge(k,N){return{$$typeof:v,type:k.type,key:N,ref:k.ref,props:k.props,_owner:k._owner}}function me(k){return typeof k=="object"&&k!==null&&k.$$typeof===v}function W(k){var N={"=":"=0",":":"=2"};return"$"+(""+k).replace(/[=:]/g,function(pe){return N[pe]})}var Q=/\/+/g,Ae=[];function we(k,N,pe,De){if(Ae.length){var le=Ae.pop();return le.result=k,le.keyPrefix=N,le.func=pe,le.context=De,le.count=0,le}return{result:k,keyPrefix:N,func:pe,context:De,count:0}}function Z(k){k.result=null,k.keyPrefix=null,k.func=null,k.context=null,k.count=0,10>Ae.length&&Ae.push(k)}function ee(k,N,pe,De){var le=typeof k;(le==="undefined"||le==="boolean")&&(k=null);var he=!1;if(k===null)he=!0;else switch(le){case"string":case"number":he=!0;break;case"object":switch(k.$$typeof){case v:case u:he=!0}}if(he)return pe(De,k,N===""?"."+Ze(k,0):N),1;if(he=0,N=N===""?".":N+":",Array.isArray(k))for(var Ke=0;Ke<k.length;Ke++){le=k[Ke];var Le=N+Ze(le,Ke);he+=ee(le,Le,pe,De)}else if(k===null||typeof k!="object"?Le=null:(Le=S&&k[S]||k["@@iterator"],Le=typeof Le=="function"?Le:null),typeof Le=="function")for(k=Le.call(k),Ke=0;!(le=k.next()).done;)le=le.value,Le=N+Ze(le,Ke++),he+=ee(le,Le,pe,De);else if(le==="object")throw pe=""+k,Error(U(31,pe==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":pe,""));return he}function be(k,N,pe){return k==null?0:ee(k,"",N,pe)}function Ze(k,N){return typeof k=="object"&&k!==null&&k.key!=null?W(k.key):N.toString(36)}function mt(k,N){k.func.call(k.context,N,k.count++)}function ze(k,N,pe){var De=k.result,le=k.keyPrefix;k=k.func.call(k.context,N,k.count++),Array.isArray(k)?ot(k,De,pe,function(he){return he}):k!=null&&(me(k)&&(k=ge(k,le+(!k.key||N&&N.key===k.key?"":(""+k.key).replace(Q,"$&/")+"/")+pe)),De.push(k))}function ot(k,N,pe,De,le){var he="";pe!=null&&(he=(""+pe).replace(Q,"$&/")+"/"),N=we(N,he,De,le),be(k,ze,N),Z(N)}var ft={current:null};function et(){var k=ft.current;if(k===null)throw Error(U(321));return k}var gt={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:P,IsSomeRendererActing:{current:!1},assign:E};D.Children={map:function(k,N,pe){if(k==null)return k;var De=[];return ot(k,De,null,N,pe),De},forEach:function(k,N,pe){if(k==null)return k;N=we(null,null,N,pe),be(k,mt,N),Z(N)},count:function(k){return be(k,function(){return null},null)},toArray:function(k){var N=[];return ot(k,N,null,function(pe){return pe}),N},only:function(k){if(!me(k))throw Error(U(143));return k}},D.Component=_,D.Fragment=i,D.Profiler=R,D.PureComponent=A,D.StrictMode=O,D.Suspense=a,D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gt,D.cloneElement=function(k,N,pe){if(k==null)throw Error(U(267,k));var De=E({},k.props),le=k.key,he=k.ref,Ke=k._owner;if(N!=null){if(N.ref!==void 0&&(he=N.ref,Ke=P.current),N.key!==void 0&&(le=""+N.key),k.type&&k.type.defaultProps)var Le=k.type.defaultProps;for(Ye in N)x.call(N,Ye)&&!ne.hasOwnProperty(Ye)&&(De[Ye]=N[Ye]===void 0&&Le!==void 0?Le[Ye]:N[Ye])}var Ye=arguments.length-2;if(Ye===1)De.children=pe;else if(1<Ye){Le=Array(Ye);for(var Xe=0;Xe<Ye;Xe++)Le[Xe]=arguments[Xe+2];De.children=Le}return{$$typeof:v,type:k.type,key:le,ref:he,props:De,_owner:Ke}},D.createContext=function(k,N){return N===void 0&&(N=null),k={$$typeof:f,_calculateChangedBits:N,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider={$$typeof:s,_context:k},k.Consumer=k},D.createElement=ve,D.createFactory=function(k){var N=ve.bind(null,k);return N.type=k,N},D.createRef=function(){return{current:null}},D.forwardRef=function(k){return{$$typeof:o,render:k}},D.isValidElement=me,D.lazy=function(k){return{$$typeof:m,_ctor:k,_status:-1,_result:null}},D.memo=function(k,N){return{$$typeof:y,type:k,compare:N===void 0?null:N}},D.useCallback=function(k,N){return et().useCallback(k,N)},D.useContext=function(k,N){return et().useContext(k,N)},D.useDebugValue=function(){},D.useEffect=function(k,N){return et().useEffect(k,N)},D.useImperativeHandle=function(k,N,pe){return et().useImperativeHandle(k,N,pe)},D.useLayoutEffect=function(k,N){return et().useLayoutEffect(k,N)},D.useMemo=function(k,N){return et().useMemo(k,N)},D.useReducer=function(k,N,pe){return et().useReducer(k,N,pe)},D.useRef=function(k){return et().useRef(k)},D.useState=function(k){return et().useState(k)},D.version="16.14.0"},7485:(L,D,n)=>{"use strict";L.exports=n(67887)},84515:L=>{"use strict";L.exports=canvg},29750:L=>{"use strict";L.exports=dompurify},75177:L=>{"use strict";L.exports=html2canvas}},Dn={};function de(L){var D=Dn[L];if(D!==void 0)return D.exports;var n=Dn[L]={id:L,loaded:!1,exports:{}};return xn[L].call(n.exports,n,n.exports,de),n.loaded=!0,n.exports}de.m=xn,de.amdO={},(()=>{var L=[];de.O=(D,n,E,p)=>{if(n){p=p||0;for(var v=L.length;v>0&&L[v-1][2]>p;v--)L[v]=L[v-1];L[v]=[n,E,p];return}for(var u=1/0,v=0;v<L.length;v++){for(var[n,E,p]=L[v],i=!0,O=0;O<n.length;O++)(p&!1||u>=p)&&Object.keys(de.O).every(y=>de.O[y](n[O]))?n.splice(O--,1):(i=!1,p<u&&(u=p));if(i){L.splice(v--,1);var R=E();R!==void 0&&(D=R)}}return D}})(),de.n=L=>{var D=L&&L.__esModule?()=>L.default:()=>L;return de.d(D,{a:D}),D},(()=>{var L=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__,D;de.t=function(n,E){if(E&1&&(n=this(n)),E&8||typeof n=="object"&&n&&(E&4&&n.__esModule||E&16&&typeof n.then=="function"))return n;var p=Object.create(null);de.r(p);var v={};D=D||[null,L({}),L([]),L(L)];for(var u=E&2&&n;typeof u=="object"&&!~D.indexOf(u);u=L(u))Object.getOwnPropertyNames(u).forEach(i=>v[i]=()=>n[i]);return v.default=()=>n,de.d(p,v),p}})(),de.d=(L,D)=>{for(var n in D)de.o(D,n)&&!de.o(L,n)&&Object.defineProperty(L,n,{enumerable:!0,get:D[n]})},de.f={},de.e=L=>Promise.all(Object.keys(de.f).reduce((D,n)=>(de.f[n](L,D),D),[])),de.u=L=>""+{126:"lazy-lib-i18n",147:"lazy-lib-rehype",972:"lazy-lib-dl"}[L]+"-"+{126:"decbc614bce07958ebf6",147:"b19e130d71a6816b983e",972:"58e8123e2490e2e9db9a"}[L]+".js",de.miniCssF=L=>{},de.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(L){if(typeof window=="object")return window}}(),de.hmd=L=>(L=Object.create(L),L.children||(L.children=[]),Object.defineProperty(L,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+L.id)}}),L),de.o=(L,D)=>Object.prototype.hasOwnProperty.call(L,D),(()=>{var L={},D="@mb2023/mb-proto:";de.l=(n,E,p,v)=>{if(L[n]){L[n].push(E);return}var u,i;if(p!==void 0)for(var O=document.getElementsByTagName("script"),R=0;R<O.length;R++){var s=O[R];if(s.getAttribute("src")==n||s.getAttribute("data-webpack")==D+p){u=s;break}}u||(i=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,de.nc&&u.setAttribute("nonce",de.nc),u.setAttribute("data-webpack",D+p),u.src=n),L[n]=[E];var f=(a,y)=>{u.onerror=u.onload=null,clearTimeout(o);var m=L[n];if(delete L[n],u.parentNode&&u.parentNode.removeChild(u),m&&m.forEach(S=>S(y)),a)return a(y)},o=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),i&&document.head.appendChild(u)}})(),de.r=L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},de.nmd=L=>(L.paths=[],L.children||(L.children=[]),L),de.j=96,de.p="/mb-proto2/",(()=>{var L={96:0};de.f.j=(E,p)=>{var v=de.o(L,E)?L[E]:void 0;if(v!==0)if(v)p.push(v[2]);else{var u=new Promise((s,f)=>v=L[E]=[s,f]);p.push(v[2]=u);var i=de.p+de.u(E),O=new Error,R=s=>{if(de.o(L,E)&&(v=L[E],v!==0&&(L[E]=void 0),v)){var f=s&&(s.type==="load"?"missing":s.type),o=s&&s.target&&s.target.src;O.message="Loading chunk "+E+" failed.\n("+f+": "+o+")",O.name="ChunkLoadError",O.type=f,O.request=o,v[1](O)}};de.l(i,R,"chunk-"+E,E)}},de.O.j=E=>L[E]===0;var D=(E,p)=>{var[v,u,i]=p,O,R,s=0;if(v.some(o=>L[o]!==0)){for(O in u)de.o(u,O)&&(de.m[O]=u[O]);if(i)var f=i(de)}for(E&&E(p);s<v.length;s++)R=v[s],de.o(L,R)&&L[R]&&L[R][0](),L[R]=0;return de.O(f)},n=self.webpackChunk_mb2023_mb_proto=self.webpackChunk_mb2023_mb_proto||[];n.forEach(D.bind(null,0)),n.push=D.bind(null,n.push.bind(n))})(),de.nc=void 0,de.O(void 0,[736],()=>de(76557)),de.O(void 0,[736],()=>de(61936));var In=de.O(void 0,[736],()=>de(2470));In=de.O(In)})();

//# sourceMappingURL=preview-html-zip-4b2a51156fd34dc4da19.js.map